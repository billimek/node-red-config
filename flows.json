[
    {
        "id": "afb0f186.cfb0d",
        "type": "tab",
        "label": "Home Assistant",
        "disabled": false,
        "info": ""
    },
    {
        "id": "ea946133.0085b",
        "type": "tab",
        "label": "Cameras",
        "disabled": false,
        "info": ""
    },
    {
        "id": "4aedf9e8.044e08",
        "type": "tab",
        "label": "Alarm",
        "disabled": false,
        "info": ""
    },
    {
        "id": "9143c7f2.16df18",
        "type": "tab",
        "label": "Presence",
        "disabled": false,
        "info": ""
    },
    {
        "id": "75b62c93.dd5d84",
        "type": "tab",
        "label": "Garage",
        "disabled": false,
        "info": ""
    },
    {
        "id": "af228686.65c8a8",
        "type": "tab",
        "label": "zwave",
        "disabled": false,
        "info": ""
    },
    {
        "id": "2fad043e.317c8c",
        "type": "tab",
        "label": "Pending Deprecation",
        "disabled": true,
        "info": ""
    },
    {
        "id": "b8b74cae.ffe4",
        "type": "subflow",
        "name": "open?",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "4b2cdbdc.3114a4"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 520,
                "y": 20,
                "wires": [
                    {
                        "id": "99015cad.bf158",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "a9b8c57d.9659a8",
        "type": "subflow",
        "name": "closed?",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "39ce4ca0.57f4a4"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 520,
                "y": 40,
                "wires": [
                    {
                        "id": "d1347059.c62f3",
                        "port": 0
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "b38cb3c4.c4815",
        "type": "subflow",
        "name": "garage doors closed?",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 50,
                "y": 30,
                "wires": [
                    {
                        "id": "8ec79c77.29d63"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 700,
                "y": 40,
                "wires": [
                    {
                        "id": "ca1db6d.dab8448",
                        "port": "1"
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "43703bf3.b01b24",
        "type": "subflow",
        "name": "turn off lights",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 80,
                "wires": [
                    {
                        "id": "6050e0f4.c5a5f"
                    }
                ]
            }
        ],
        "out": [],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "29f6dc7c.662814",
        "type": "subflow",
        "name": "home?",
        "info": "",
        "category": "",
        "in": [
            {
                "x": 60,
                "y": 40,
                "wires": [
                    {
                        "id": "6303d5b7.53726c"
                    }
                ]
            }
        ],
        "out": [
            {
                "x": 1260,
                "y": 40,
                "wires": [
                    {
                        "id": "ab22106d.8bafb",
                        "port": 0
                    }
                ]
            },
            {
                "x": 1260,
                "y": 100,
                "wires": [
                    {
                        "id": "ab22106d.8bafb",
                        "port": 1
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "2299e9e0.40f656",
        "type": "subflow",
        "name": "frigate camera",
        "info": "",
        "category": "",
        "in": [],
        "out": [
            {
                "x": 980,
                "y": 80,
                "wires": [
                    {
                        "id": "8858eb58.4a5e68",
                        "port": 0
                    }
                ]
            },
            {
                "x": 980,
                "y": 80,
                "wires": [
                    {
                        "id": "8858eb58.4a5e68",
                        "port": 1
                    }
                ]
            },
            {
                "x": 980,
                "y": 80,
                "wires": [
                    {
                        "id": "8858eb58.4a5e68",
                        "port": 2
                    }
                ]
            },
            {
                "x": 980,
                "y": 80,
                "wires": [
                    {
                        "id": "8858eb58.4a5e68",
                        "port": 3
                    }
                ]
            },
            {
                "x": 980,
                "y": 80,
                "wires": [
                    {
                        "id": "8858eb58.4a5e68",
                        "port": 4
                    }
                ]
            }
        ],
        "env": [],
        "color": "#DDAA99"
    },
    {
        "id": "8b52884a.b76658",
        "type": "server",
        "name": "Home Assistant",
        "legacy": false,
        "rejectUnauthorizedCerts": true,
        "ha_boolean": "y|yes|true|on|home|open"
    },
    {
        "id": "649859a4.a17818",
        "type": "mqtt-broker",
        "name": "mqtt",
        "broker": "10.0.6.50",
        "port": "1883",
        "clientid": "node-red",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "1be7789.845ca87",
        "type": "pushover-keys",
        "name": ""
    },
    {
        "id": "f26da246.74a7f",
        "type": "light-scheduler-settings",
        "name": "home",
        "latitude": "33.95092",
        "longitude": "-84.44805"
    },
    {
        "id": "d02fa8ec.7c1538",
        "type": "googleCredentials",
        "name": "node-red google project"
    },
    {
        "id": "738ad7f2.c345c8",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "Turn on Basement Fan",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "climate",
        "service": "set_fan_mode",
        "entityId": "climate.basement",
        "data": "{\"fan_mode\":\"on\"}",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 560,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "dcb17b9f.340438",
        "type": "bigtimer",
        "z": "afb0f186.cfb0d",
        "outtopic": "",
        "outpayload1": "1",
        "outpayload2": "",
        "name": "Noon every day",
        "comment": "",
        "lat": "33.94519",
        "lon": "-84.45379",
        "starttime": "720",
        "endtime": "735",
        "starttime2": 0,
        "endtime2": 0,
        "startoff": "0",
        "endoff": "0",
        "offs": 0,
        "outtext1": "",
        "outtext2": "",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "repeat": false,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 160,
        "y": 80,
        "wires": [
            [
                "ca516132.aac1d"
            ],
            [],
            []
        ]
    },
    {
        "id": "6cb23d50.77ced4",
        "type": "bigtimer",
        "z": "4aedf9e8.044e08",
        "outtopic": "",
        "outpayload1": "1",
        "outpayload2": "",
        "name": "Midnight every day",
        "comment": "",
        "lat": "33.94519",
        "lon": "-84.45379",
        "starttime": "0",
        "endtime": "15",
        "starttime2": 0,
        "endtime2": 0,
        "startoff": "0",
        "endoff": "0",
        "offs": 0,
        "outtext1": "",
        "outtext2": "",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "repeat": false,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 130,
        "y": 140,
        "wires": [
            [
                "cd1caa8c.300358",
                "910caaaf.b41098"
            ],
            [],
            []
        ]
    },
    {
        "id": "c77d382a.cb6bf8",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 530,
        "y": 140,
        "wires": [
            [
                "8d782ee4.3daf1"
            ],
            [
                "8d782ee4.3daf1"
            ]
        ]
    },
    {
        "id": "bafec0ae.30733",
        "type": "inject",
        "z": "4aedf9e8.044e08",
        "name": "force-run",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 200,
        "wires": [
            [
                "cd1caa8c.300358"
            ]
        ]
    },
    {
        "id": "24e58e6b.442df2",
        "type": "bigtimer",
        "z": "4aedf9e8.044e08",
        "outtopic": "",
        "outpayload1": "1",
        "outpayload2": "",
        "name": "5am every day",
        "comment": "",
        "lat": "33.94519",
        "lon": "-84.45379",
        "starttime": "300",
        "endtime": "315",
        "starttime2": 0,
        "endtime2": 0,
        "startoff": "0",
        "endoff": "0",
        "offs": 0,
        "outtext1": "",
        "outtext2": "",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "repeat": false,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 140,
        "y": 420,
        "wires": [
            [
                "b15d162c.105c28"
            ],
            [],
            []
        ]
    },
    {
        "id": "73c30e71.e8d46",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 530,
        "y": 420,
        "wires": [
            [
                "f36487b8.7e8c48"
            ],
            [
                "f36487b8.7e8c48"
            ]
        ]
    },
    {
        "id": "d6646d02.af28b",
        "type": "inject",
        "z": "4aedf9e8.044e08",
        "name": "force-run",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 160,
        "y": 480,
        "wires": [
            [
                "b15d162c.105c28"
            ]
        ]
    },
    {
        "id": "8d782ee4.3daf1",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "alarm disarmed?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "disarmed",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "alarm_control_panel.alarm_panel",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 750,
        "y": 140,
        "wires": [
            [],
            [
                "892a8bfd.69c738"
            ]
        ]
    },
    {
        "id": "f36487b8.7e8c48",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "alarm not disarmed?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "disarmed",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "alarm_control_panel.alarm_panel",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 800,
        "y": 420,
        "wires": [
            [],
            [
                "81c2d258.033ce"
            ]
        ]
    },
    {
        "id": "ca516132.aac1d",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "input_boolean.auto_run_basement_fan",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 350,
        "y": 80,
        "wires": [
            [],
            [
                "738ad7f2.c345c8"
            ]
        ]
    },
    {
        "id": "cd1caa8c.300358",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "input_boolean.auto_arm_disarm_alarm_night",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 350,
        "y": 140,
        "wires": [
            [],
            [
                "c77d382a.cb6bf8",
                "3ff0a0c.e3cf96"
            ]
        ]
    },
    {
        "id": "b15d162c.105c28",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "input_boolean.auto_arm_disarm_alarm_night",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 350,
        "y": 420,
        "wires": [
            [],
            [
                "73c30e71.e8d46",
                "de5bd3a9.a8a66"
            ]
        ]
    },
    {
        "id": "46cdb220.d99dbc",
        "type": "mqtt out",
        "z": "9143c7f2.16df18",
        "name": "trigger arrival scan",
        "topic": "monitor/scan/arrive",
        "qos": "",
        "retain": "",
        "broker": "649859a4.a17818",
        "x": 1110,
        "y": 840,
        "wires": []
    },
    {
        "id": "5b3f844.f2cf77c",
        "type": "mqtt out",
        "z": "9143c7f2.16df18",
        "name": "trigger departure scan",
        "topic": "monitor/scan/depart",
        "qos": "",
        "retain": "",
        "broker": "649859a4.a17818",
        "x": 1120,
        "y": 220,
        "wires": []
    },
    {
        "id": "53603f27.a87b3",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "sliding door open?",
        "server": "8b52884a.b76658",
        "version": 1,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.sliding_door",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 230,
        "y": 600,
        "wires": [
            [],
            [
                "52a680e.b58558",
                "fe1f1f4a.3f5bc",
                "e0d9002.3e0be"
            ]
        ]
    },
    {
        "id": "8acbd984.50cab8",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "sun-room door open?",
        "server": "8b52884a.b76658",
        "version": "1",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.sun_room_door",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 220,
        "y": 660,
        "wires": [
            [],
            [
                "fe1f1f4a.3f5bc",
                "52a680e.b58558",
                "e0d9002.3e0be"
            ]
        ]
    },
    {
        "id": "14f56181.1b2ffe",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "front door open?",
        "server": "8b52884a.b76658",
        "version": "1",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.front_door",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 240,
        "y": 720,
        "wires": [
            [],
            [
                "fe1f1f4a.3f5bc",
                "52a680e.b58558",
                "e0d9002.3e0be"
            ]
        ]
    },
    {
        "id": "e2bb16da.b2bc68",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "basement door open?",
        "server": "8b52884a.b76658",
        "version": "1",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.basement_door",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 220,
        "y": 780,
        "wires": [
            [],
            [
                "fe1f1f4a.3f5bc",
                "52a680e.b58558",
                "e0d9002.3e0be"
            ]
        ]
    },
    {
        "id": "a1b717c7.bed8e8",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "garage door open?",
        "server": "8b52884a.b76658",
        "version": "1",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.garage_door",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 230,
        "y": 840,
        "wires": [
            [],
            [
                "fe1f1f4a.3f5bc",
                "d7acbe2a.ab111",
                "e0d9002.3e0be"
            ]
        ]
    },
    {
        "id": "fe1f1f4a.3f5bc",
        "type": "api-current-state",
        "z": "9143c7f2.16df18",
        "name": "not home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 850,
        "y": 860,
        "wires": [
            [],
            [
                "46cdb220.d99dbc"
            ]
        ]
    },
    {
        "id": "16f12e62.2031d2",
        "type": "api-current-state",
        "z": "9143c7f2.16df18",
        "name": "home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 870,
        "y": 220,
        "wires": [
            [],
            [
                "5b3f844.f2cf77c"
            ]
        ]
    },
    {
        "id": "e2f343b.68adbc",
        "type": "api-call-service",
        "z": "75b62c93.dd5d84",
        "name": "notify jeff iOS",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "notify",
        "service": "mobile_app_jeffs_xs",
        "entityId": "",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1440,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "eb2d3623.194588",
        "type": "api-call-service",
        "z": "75b62c93.dd5d84",
        "name": "notify jen iOS",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "notify",
        "service": "mobile_app_jennifers_xs_max",
        "entityId": "",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1440,
        "y": 280,
        "wires": [
            []
        ]
    },
    {
        "id": "f9971550.66b808",
        "type": "poll-state",
        "z": "2fad043e.317c8c",
        "name": "",
        "server": "8b52884a.b76658",
        "updateinterval": "10",
        "outputinitially": true,
        "outputonchanged": true,
        "entity_id": "cover.jen_garage_door",
        "state_type": "str",
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "x": 210,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "717193c9.50b80c",
        "type": "poll-state",
        "z": "2fad043e.317c8c",
        "name": "",
        "server": "8b52884a.b76658",
        "updateinterval": "10",
        "outputinitially": true,
        "outputonchanged": true,
        "entity_id": "cover.jeff_garage_door",
        "state_type": "str",
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "x": 210,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "9e95fe2d.47e3b",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jen's garage door open -> closed",
        "server": "8b52884a.b76658",
        "entityid": "cover.jen_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "5vfaipig414",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            },
            {
                "id": "27umjiospq7",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 220,
        "y": 280,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "209e019f.d3994e",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "garage door closed for > 5 mins?",
        "func": "var minsToCheck = 5;\nvar minutesInMs = 60000;\nvar openTimeinMS = global.get('cover.jen_garage_door.closedTimeinMS') || 0;\nif (openTimeinMS >= (minutesInMs*minsToCheck) && msg.payload === \"closed\") {\n   msg.payload = millisecondsToStr(openTimeinMS)\n   return [ msg ];\n}\n\n\nfunction millisecondsToStr (milliseconds) {\n    // TIP: to find current time in milliseconds, use:\n    // var  current_time_milliseconds = new Date().getTime();\n\n    function numberEnding (number) {\n        return (number > 1) ? 's' : '';\n    }\n\n    var temp = Math.floor(milliseconds / 1000);\n    var years = Math.floor(temp / 31536000);\n    if (years) {\n        return years + ' year' + numberEnding(years);\n    }\n    //TODO: Months! Maybe weeks? \n    var days = Math.floor((temp %= 31536000) / 86400);\n    if (days) {\n        return days + ' day' + numberEnding(days);\n    }\n    var hours = Math.floor((temp %= 86400) / 3600);\n    if (hours) {\n        return hours + ' hour' + numberEnding(hours);\n    }\n    var minutes = Math.floor((temp %= 3600) / 60);\n    if (minutes) {\n        return minutes + ' minute' + numberEnding(minutes);\n    }\n    var seconds = temp % 60;\n    if (seconds) {\n        return seconds + ' second' + numberEnding(seconds);\n    }\n    return 'less than a second'; //'just now' //or other string you like;\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 900,
        "y": 340,
        "wires": [
            [
                "761ad3eb.80eb6c"
            ]
        ]
    },
    {
        "id": "bea4a801.9f6cc8",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "reset jens garage door closed timer",
        "func": "global.set('cover.jen_garage_door.closedTimeinMS',0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 560,
        "y": 280,
        "wires": [
            [
                "6e7d8be1.205d04"
            ]
        ]
    },
    {
        "id": "6e7d8be1.205d04",
        "type": "debug",
        "z": "2fad043e.317c8c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 830,
        "y": 280,
        "wires": []
    },
    {
        "id": "814a7aa3.a517e8",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jen's garage door closed?",
        "server": "8b52884a.b76658",
        "entityid": "cover.jen_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "5vfaipig414",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            },
            {
                "id": "jqxehrylwml",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 190,
        "y": 340,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "22b6bdb.37aed42",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "capture & add current closed time",
        "func": "var currentSavedTime = global.get('cover.jen_garage_door.closedTimeinMS') || 0;\nglobal.set('cover.jen_garage_door.closedTimeinMS', Math.abs(msg.data.event.new_state.timeSinceChangedMs - currentSavedTime) + currentSavedTime);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 560,
        "y": 340,
        "wires": [
            [
                "209e019f.d3994e"
            ]
        ]
    },
    {
        "id": "761ad3eb.80eb6c",
        "type": "debug",
        "z": "2fad043e.317c8c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1150,
        "y": 340,
        "wires": []
    },
    {
        "id": "e1917b2b.6060b8",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jen's garage door closed -> open",
        "server": "8b52884a.b76658",
        "entityid": "cover.jen_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "7ssscforb0o",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            },
            {
                "id": "ca2smqkbbur",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 220,
        "y": 420,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "21c9b96d.62eae6",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "garage door open for > 10 mins?",
        "func": "var minsToCheck = 10;\nvar minutesInMs = 60000;\nvar openTimeinMS = global.get('cover.jen_garage_door.openTimeinMS') || 0;\nif (openTimeinMS >= (minutesInMs*minsToCheck) && msg.payload === \"open\") {\n   msg.payload = millisecondsToStr(openTimeinMS)\n   return [ msg ];\n}\n\n\nfunction millisecondsToStr (milliseconds) {\n    // TIP: to find current time in milliseconds, use:\n    // var  current_time_milliseconds = new Date().getTime();\n\n    function numberEnding (number) {\n        return (number > 1) ? 's' : '';\n    }\n\n    var temp = Math.floor(milliseconds / 1000);\n    var years = Math.floor(temp / 31536000);\n    if (years) {\n        return years + ' year' + numberEnding(years);\n    }\n    //TODO: Months! Maybe weeks? \n    var days = Math.floor((temp %= 31536000) / 86400);\n    if (days) {\n        return days + ' day' + numberEnding(days);\n    }\n    var hours = Math.floor((temp %= 86400) / 3600);\n    if (hours) {\n        return hours + ' hour' + numberEnding(hours);\n    }\n    var minutes = Math.floor((temp %= 3600) / 60);\n    if (minutes) {\n        return minutes + ' minute' + numberEnding(minutes);\n    }\n    var seconds = temp % 60;\n    if (seconds) {\n        return seconds + ' second' + numberEnding(seconds);\n    }\n    return 'less than a second'; //'just now' //or other string you like;\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 900,
        "y": 480,
        "wires": [
            [
                "969ccaba.6e0c78"
            ]
        ]
    },
    {
        "id": "bc976ef9.e301c",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "reset jens garage door open timer",
        "func": "global.set('cover.jen_garage_door.openTimeinMS',0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 560,
        "y": 420,
        "wires": [
            [
                "335ee75c.cd9da8"
            ]
        ]
    },
    {
        "id": "335ee75c.cd9da8",
        "type": "debug",
        "z": "2fad043e.317c8c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 830,
        "y": 420,
        "wires": []
    },
    {
        "id": "a4f31f.d9d5ace",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jen's garage door open?",
        "server": "8b52884a.b76658",
        "entityid": "cover.jen_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "03b4hq1eehkp",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            },
            {
                "id": "9b1umrt4zg4",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 190,
        "y": 480,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "ae423f3b.c222c",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "capture & add current open time",
        "func": "var currentSavedTime = global.get('cover.jen_garage_door.openTimeinMS') || 0;\nglobal.set('cover.jen_garage_door.openTimeinMS', Math.abs(msg.data.event.new_state.timeSinceChangedMs - currentSavedTime) + currentSavedTime);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 550,
        "y": 480,
        "wires": [
            [
                "21c9b96d.62eae6"
            ]
        ]
    },
    {
        "id": "969ccaba.6e0c78",
        "type": "debug",
        "z": "2fad043e.317c8c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1150,
        "y": 480,
        "wires": []
    },
    {
        "id": "2e7d95d4.cab80a",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jeff's garage door open -> closed",
        "server": "8b52884a.b76658",
        "entityid": "cover.jeff_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "5vfaipig414",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            },
            {
                "id": "27umjiospq7",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 220,
        "y": 580,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "bbd7b67.ad33648",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "garage door closed for > 10 mins?",
        "func": "var minsToCheck = 10;\nvar minutesInMs = 60000;\nvar openTimeinMS = global.get('cover.jeff_garage_door.closedTimeinMS') || 0;\nif (openTimeinMS >= (minutesInMs*minsToCheck) && msg.payload === \"closed\") {\n   msg.payload = millisecondsToStr(openTimeinMS)\n   return [ msg ];\n}\n\n\nfunction millisecondsToStr (milliseconds) {\n    // TIP: to find current time in milliseconds, use:\n    // var  current_time_milliseconds = new Date().getTime();\n\n    function numberEnding (number) {\n        return (number > 1) ? 's' : '';\n    }\n\n    var temp = Math.floor(milliseconds / 1000);\n    var years = Math.floor(temp / 31536000);\n    if (years) {\n        return years + ' year' + numberEnding(years);\n    }\n    //TODO: Months! Maybe weeks? \n    var days = Math.floor((temp %= 31536000) / 86400);\n    if (days) {\n        return days + ' day' + numberEnding(days);\n    }\n    var hours = Math.floor((temp %= 86400) / 3600);\n    if (hours) {\n        return hours + ' hour' + numberEnding(hours);\n    }\n    var minutes = Math.floor((temp %= 3600) / 60);\n    if (minutes) {\n        return minutes + ' minute' + numberEnding(minutes);\n    }\n    var seconds = temp % 60;\n    if (seconds) {\n        return seconds + ' second' + numberEnding(seconds);\n    }\n    return 'less than a second'; //'just now' //or other string you like;\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 900,
        "y": 640,
        "wires": [
            [
                "f3cb12aa.eb18c"
            ]
        ]
    },
    {
        "id": "11ba2469.e3f64c",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "reset jeffs garage door closed timer",
        "func": "global.set('cover.jeff_garage_door.closedTimeinMS',0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 560,
        "y": 580,
        "wires": [
            [
                "4cabb4ae.0d218c"
            ]
        ]
    },
    {
        "id": "4cabb4ae.0d218c",
        "type": "debug",
        "z": "2fad043e.317c8c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 830,
        "y": 580,
        "wires": []
    },
    {
        "id": "be2421c6.ad1b1",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jeff's garage door closed?",
        "server": "8b52884a.b76658",
        "entityid": "cover.jeff_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "5vfaipig414",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            },
            {
                "id": "ozukcporgrf",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 190,
        "y": 640,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "188011d5.077b8e",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "capture & add current closed time",
        "func": "var currentSavedTime = global.get('cover.jeff_garage_door.closedTimeinMS') || 0;\nglobal.set('cover.jeff_garage_door.closedTimeinMS', Math.abs(msg.data.event.new_state.timeSinceChangedMs - currentSavedTime) + currentSavedTime);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 560,
        "y": 640,
        "wires": [
            [
                "bbd7b67.ad33648"
            ]
        ]
    },
    {
        "id": "f3cb12aa.eb18c",
        "type": "debug",
        "z": "2fad043e.317c8c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1150,
        "y": 640,
        "wires": []
    },
    {
        "id": "5ec3e16b.b26b3",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jeff's garage door closed -> open",
        "server": "8b52884a.b76658",
        "entityid": "cover.jeff_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "7ssscforb0o",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            },
            {
                "id": "ca2smqkbbur",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 220,
        "y": 720,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "670deb94.a38f94",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "garage door open for > 10 mins?",
        "func": "var minsToCheck = 10;\nvar minutesInMs = 60000;\nvar openTimeinMS = global.get('cover.jeff_garage_door.openTimeinMS') || 0;\nif (openTimeinMS >= (minutesInMs*minsToCheck) && msg.payload === \"open\") {\n   msg.payload = millisecondsToStr(openTimeinMS)\n   return [ msg ];\n}\n\n\nfunction millisecondsToStr (milliseconds) {\n    // TIP: to find current time in milliseconds, use:\n    // var  current_time_milliseconds = new Date().getTime();\n\n    function numberEnding (number) {\n        return (number > 1) ? 's' : '';\n    }\n\n    var temp = Math.floor(milliseconds / 1000);\n    var years = Math.floor(temp / 31536000);\n    if (years) {\n        return years + ' year' + numberEnding(years);\n    }\n    //TODO: Months! Maybe weeks? \n    var days = Math.floor((temp %= 31536000) / 86400);\n    if (days) {\n        return days + ' day' + numberEnding(days);\n    }\n    var hours = Math.floor((temp %= 86400) / 3600);\n    if (hours) {\n        return hours + ' hour' + numberEnding(hours);\n    }\n    var minutes = Math.floor((temp %= 3600) / 60);\n    if (minutes) {\n        return minutes + ' minute' + numberEnding(minutes);\n    }\n    var seconds = temp % 60;\n    if (seconds) {\n        return seconds + ' second' + numberEnding(seconds);\n    }\n    return 'less than a second'; //'just now' //or other string you like;\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 900,
        "y": 780,
        "wires": [
            [
                "33b0d59a.f3ff0a"
            ]
        ]
    },
    {
        "id": "1f41324d.ff075e",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "reset jeff garage door open timer",
        "func": "global.set('cover.jeff_garage_door.openTimeinMS',0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 560,
        "y": 720,
        "wires": [
            [
                "f37fd716.72e5f8"
            ]
        ]
    },
    {
        "id": "f37fd716.72e5f8",
        "type": "debug",
        "z": "2fad043e.317c8c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 830,
        "y": 720,
        "wires": []
    },
    {
        "id": "6deda104.38775",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jeff's garage door open?",
        "server": "8b52884a.b76658",
        "entityid": "cover.jeff_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "03b4hq1eehkp",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            },
            {
                "id": "tle0bbbbad",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 190,
        "y": 780,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "934edc1c.267bd",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "capture & add current open time",
        "func": "var currentSavedTime = global.get('cover.jeff_garage_door.openTimeinMS') || 0;\nglobal.set('cover.jeff_garage_door.openTimeinMS', Math.abs(msg.data.event.new_state.timeSinceChangedMs - currentSavedTime) + currentSavedTime);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 550,
        "y": 780,
        "wires": [
            [
                "670deb94.a38f94"
            ]
        ]
    },
    {
        "id": "33b0d59a.f3ff0a",
        "type": "debug",
        "z": "2fad043e.317c8c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1150,
        "y": 780,
        "wires": []
    },
    {
        "id": "1e1c0d7e.a68d03",
        "type": "inject",
        "z": "2fad043e.317c8c",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 300,
        "y": 540,
        "wires": [
            [
                "bc976ef9.e301c",
                "bea4a801.9f6cc8",
                "11ba2469.e3f64c",
                "1f41324d.ff075e"
            ]
        ]
    },
    {
        "id": "9c97bcf0.cc525",
        "type": "pushover api",
        "z": "2fad043e.317c8c",
        "keys": "1be7789.845ca87",
        "title": "",
        "name": "",
        "x": 340,
        "y": 1340,
        "wires": []
    },
    {
        "id": "9d177358.52fa5",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "pushover payload (frigate)",
        "func": "msg.topic = \"Person Detected (frigate)\";\nmsg.payload = \"Porch\";\nmsg.sound = \"intermission\"\nmsg.priority = 1;\nmsg.image = \"http://k8s-4:5000/porch/best_person.jpg\"\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 590,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "773c4cee.01cb04",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "pushover payload (frigate)",
        "func": "msg.topic = \"Person Detected (frigate)\";\nmsg.payload = \"Driveway\";\nmsg.sound = \"intermission\"\nmsg.priority = 1;\nmsg.image = \"http://k8s-4:5000/driveway/best_person.jpg\"\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 590,
        "y": 1140,
        "wires": [
            []
        ]
    },
    {
        "id": "84d264de.6d8a68",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "pushover payload (frigate)",
        "func": "msg.topic = \"Person Detected (frigate)\";\nmsg.payload = \"Front\";\nmsg.sound = \"intermission\"\nmsg.priority = 1;\nmsg.image = \"http://k8s-4:5000/front/best_person.jpg\"\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 590,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "7ef5891a.b8bc68",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "pushover payload (frigate)",
        "func": "msg.topic = \"Person Detected (frigate)\";\nmsg.payload = \"Pool\";\nmsg.sound = \"intermission\"\nmsg.priority = 1;\nmsg.image = \"http://k8s-4:5000/pool/best_person.jpg\"\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 590,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "31992598.4bd18a",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "pushover payload (frigate)",
        "func": "msg.topic = \"Person Detected (frigate)\";\nmsg.payload = \"Basement\";\nmsg.sound = \"intermission\"\nmsg.priority = 1;\nmsg.image = \"http://k8s-4:5000/basement/best_person.jpg\"\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 590,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "b0b84fff.f8d14",
        "type": "api-current-state",
        "z": "2fad043e.317c8c",
        "name": "not home?",
        "server": "8b52884a.b76658",
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "override_payload": true,
        "override_data": true,
        "x": 150,
        "y": 1340,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "5319a7a5.1e0138",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Basement Camera (BI)",
        "topic": "BlueIris/alert/basement",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 180,
        "y": 1260,
        "wires": [
            [
                "70260327.9f0f6c"
            ]
        ]
    },
    {
        "id": "70260327.9f0f6c",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "motion",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ON",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 370,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "60dde288.63d11c",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "pushover payload (hass)",
        "func": "msg.topic = \"Person Detected\";\nmsg.payload = \"Basement\";\nmsg.sound = \"intermission\"\nmsg.priority = 1;\nmsg.image = \"https://hass.eviljungle.com/local/tensorflow/snapshot/basement_latest.jpg\"\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 850,
        "y": 1260,
        "wires": [
            []
        ]
    },
    {
        "id": "e4d9e9e8.5f2668",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Pool Camera (BI)",
        "topic": "BlueIris/alert/pool",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 160,
        "y": 1200,
        "wires": [
            [
                "f79436e7.296b28"
            ]
        ]
    },
    {
        "id": "f79436e7.296b28",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "motion",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ON",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 370,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "7522cacd.6915e4",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "pushover payload (hass)",
        "func": "msg.topic = \"Person Detected\";\nmsg.payload = \"Pool\";\nmsg.sound = \"intermission\"\nmsg.priority = 1;\nmsg.image = \"https://hass.eviljungle.com/local/tensorflow/snapshot/pool_latest.jpg\"\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 850,
        "y": 1200,
        "wires": [
            []
        ]
    },
    {
        "id": "d0145ca5.75af3",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Driveway Camera (BI)",
        "topic": "BlueIris/alert/driveway",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 180,
        "y": 1140,
        "wires": [
            [
                "1b81c37e.528dad"
            ]
        ]
    },
    {
        "id": "1b81c37e.528dad",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "motion",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ON",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 370,
        "y": 1140,
        "wires": [
            []
        ]
    },
    {
        "id": "49116105.c024c",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "pushover payload (hass)",
        "func": "msg.topic = \"Person Detected\";\nmsg.payload = \"Driveway\";\nmsg.sound = \"intermission\"\nmsg.priority = 1;\nmsg.image = \"https://hass.eviljungle.com/local/tensorflow/snapshot/driveway_latest.jpg\"\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 850,
        "y": 1140,
        "wires": [
            []
        ]
    },
    {
        "id": "ca7bf332.0c743",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Porch Camera (BI)",
        "topic": "BlueIris/alert/porch",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 170,
        "y": 1080,
        "wires": [
            [
                "8db8621e.17aaf"
            ]
        ]
    },
    {
        "id": "8db8621e.17aaf",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "motion",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ON",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 370,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "177acca2.5b81c3",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "pushover payload (hass)",
        "func": "msg.topic = \"Person Detected\";\nmsg.payload = \"Porch\";\nmsg.sound = \"intermission\"\nmsg.priority = 1;\nmsg.image = \"https://hass.eviljungle.com/local/tensorflow/snapshot/porch_latest.jpg\"\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 850,
        "y": 1080,
        "wires": [
            []
        ]
    },
    {
        "id": "436c43b4.19d48c",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Front Camera (BI)",
        "topic": "BlueIris/alert/front",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 160,
        "y": 1020,
        "wires": [
            [
                "cd7cb133.06abc"
            ]
        ]
    },
    {
        "id": "cd7cb133.06abc",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "motion",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ON",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 370,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "39c37970.6dd626",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "pushover payload (hass)",
        "func": "msg.topic = \"Person Detected\";\nmsg.payload = \"Front\";\nmsg.sound = \"intermission\"\nmsg.priority = 1;\nmsg.image = \"https://hass.eviljungle.com/local/tensorflow/snapshot/front_latest.jpg\"\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 850,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "884946fa.65a098",
        "type": "comment",
        "z": "2fad043e.317c8c",
        "name": "Old stuff",
        "info": "",
        "x": 140,
        "y": 960,
        "wires": []
    },
    {
        "id": "857f47d0.3b4578",
        "type": "server-state-changed",
        "z": "2fad043e.317c8c",
        "name": "Jen's Garage Door Opening",
        "server": "8b52884a.b76658",
        "entityidfilter": "sensor.garage2_status",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "Opening",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "outputs": 2,
        "x": 540,
        "y": 60,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "5c0b449c.02fbac",
        "type": "server-state-changed",
        "z": "2fad043e.317c8c",
        "name": "Jeff's Garage Door Opening",
        "server": "8b52884a.b76658",
        "entityidfilter": "sensor.garage_status",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "Opening",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "outputs": 2,
        "x": 540,
        "y": 120,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "d6999820.055628",
        "type": "server-state-changed",
        "z": "2fad043e.317c8c",
        "name": "Jen's Garage Door Closing",
        "server": "8b52884a.b76658",
        "entityidfilter": "sensor.garage2_status",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "Closing",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "outputs": 2,
        "x": 530,
        "y": 180,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "b4e5e07d.3a0d2",
        "type": "server-state-changed",
        "z": "2fad043e.317c8c",
        "name": "Jen's Garage Door Closing",
        "server": "8b52884a.b76658",
        "entityidfilter": "sensor.garage2_status",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "Closing",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "outputs": 2,
        "x": 530,
        "y": 240,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "1104f7d2.7a2938",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "Alarm iOS msg",
        "func": "var action = msg.payload\n\nvar category = \"alarm\"\nvar title = \"Alarm System\"\nvar message = \"Alarm is now \" + action\n\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category\n            }\n        }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 920,
        "y": 760,
        "wires": [
            [
                "aeafe637.1aeaf8",
                "f27a9952.dc7b18"
            ]
        ]
    },
    {
        "id": "aeafe637.1aeaf8",
        "type": "api-call-service",
        "z": "4aedf9e8.044e08",
        "name": "notify jeff iOS",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "notify",
        "service": "mobile_app_jeffs_xs",
        "entityId": "",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1250,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "199cf4c0.bebdbb",
        "type": "api-call-service",
        "z": "4aedf9e8.044e08",
        "name": "Notify Slack",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "notify",
        "service": "slack",
        "entityId": "",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1250,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "42e3cc92.5ddb44",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "Alarm slack msg",
        "func": "var action = msg.payload\n\nvar title = \"Alarm System\"\nvar message = \"Alarm is now \" + action\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 920,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "f27a9952.dc7b18",
        "type": "api-call-service",
        "z": "4aedf9e8.044e08",
        "name": "notify jen iOS",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "notify",
        "service": "mobile_app_jennifers_xs_max",
        "entityId": "",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1250,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "3700839b.3d543c",
        "type": "server-state-changed",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Triggered",
        "server": "8b52884a.b76658",
        "version": "1",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "alarm_control_panel.alarm_panel",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "triggered",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 140,
        "y": 1000,
        "wires": [
            [],
            [
                "cca292a3.05942"
            ]
        ]
    },
    {
        "id": "32667083.17f79",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Triggerred iOS msg",
        "func": "var action = msg.payload\n\nvar category = \"alarm\"\nvar title = \"🚨 ALARM TRIGGERED! 🚨\"\nvar message = \"THE ALARM HAS TRIGGERED! OMG WTFBBQ!!!!111 🔥 \\n\" + action\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category,\n                sound: \"US-EN-Morgan-Freeman-Vacate-The-Premises.wav\"\n            }\n        }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 950,
        "y": 960,
        "wires": [
            []
        ]
    },
    {
        "id": "c7ea6dcc.c22e4",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Triggerred slack msg",
        "func": "var action = msg.payload\nvar message = \"@channel 🚨 ALARM HAS TRIGGERED 🚨\\n\" + action + \" \\n OMG WTFBBQ!!!!!11 :fire:\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        // data: {\n        //     attachments: [\n        //         {\n        //             title: \"Front Camera\",\n        //             image_url: \"https://hass.eviljungle.com/local/camera/camera.front.jpg\"\n        //         },\n        //         {\n        //             title: \"Driveway Camera\",\n        //             image_url: \"https://hass.eviljungle.com/local/camera/camera.driveway.jpg\"\n        //         },\n        //         {\n        //             title: \"Porch Camera\",\n        //             image_url: \"https://hass.eviljungle.com/local/camera/camera.porch.jpg\"\n        //         },\n        //         {\n        //             title: \"Pool Camera\",\n        //             image_url: \"https://hass.eviljungle.com/local/camera/camera.pool.jpg\"\n        //         },\n        //         {\n        //             title: \"Basement Camera\",\n        //             image_url: \"https://hass.eviljungle.com/local/camera/camera.basement.jpg\"\n        //         },\n        //         ]\n        // }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 960,
        "y": 1040,
        "wires": [
            [
                "199cf4c0.bebdbb"
            ]
        ]
    },
    {
        "id": "20800e94.dc37f2",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Panel Display",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "sensor.alarm_panel_display",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 680,
        "y": 1000,
        "wires": [
            [
                "dbaa0a2e.d4c668",
                "3c2430e1.ba8e3",
                "8cbf255e.433118",
                "c0e06a86.1980c8",
                "e2b8a6e2.e4fdc8",
                "32667083.17f79",
                "c7ea6dcc.c22e4",
                "8af4ba1c.44a458",
                "88ed4484.87c648"
            ]
        ]
    },
    {
        "id": "dbaa0a2e.d4c668",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "trigger basement camera (BI)",
        "func": "msg.payload = \"camera=basement&trigger\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 960,
        "y": 1280,
        "wires": [
            [
                "99152e82.75a54"
            ]
        ]
    },
    {
        "id": "e2b8a6e2.e4fdc8",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "trigger pool camera (BI)",
        "func": "msg.payload = \"camera=pool&trigger\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 950,
        "y": 1240,
        "wires": [
            [
                "99152e82.75a54"
            ]
        ]
    },
    {
        "id": "c0e06a86.1980c8",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "trigger driveway camera (BI)",
        "func": "msg.payload = \"camera=driveway&trigger\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 960,
        "y": 1200,
        "wires": [
            [
                "99152e82.75a54"
            ]
        ]
    },
    {
        "id": "8cbf255e.433118",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "trigger porch camera (BI)",
        "func": "msg.payload = \"camera=porch&trigger\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 950,
        "y": 1160,
        "wires": [
            [
                "99152e82.75a54"
            ]
        ]
    },
    {
        "id": "3c2430e1.ba8e3",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "trigger front camera (BI)",
        "func": "msg.payload = \"camera=front&trigger\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 950,
        "y": 1120,
        "wires": [
            [
                "99152e82.75a54"
            ]
        ]
    },
    {
        "id": "99152e82.75a54",
        "type": "mqtt out",
        "z": "4aedf9e8.044e08",
        "name": "trigger blue iris",
        "topic": "BlueIris/admin",
        "qos": "",
        "retain": "",
        "broker": "649859a4.a17818",
        "x": 1240,
        "y": 1200,
        "wires": []
    },
    {
        "id": "7cf2a0d2.f39ae",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "not home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 550,
        "y": 760,
        "wires": [
            [],
            [
                "fe046407.ab0868"
            ]
        ]
    },
    {
        "id": "71941591.c8558c",
        "type": "trigger-state",
        "z": "4aedf9e8.044e08",
        "name": "home -> not_home",
        "server": "8b52884a.b76658",
        "entityid": "sensor.anyone_home",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "m9qiqujd83",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "not_home"
            },
            {
                "id": "wl8tjeww34",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "home"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 130,
        "y": 340,
        "wires": [
            [
                "ccda8ca7.269df"
            ],
            []
        ]
    },
    {
        "id": "ccda8ca7.269df",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "input_boolean.auto_arm_alarm_when_gone",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 350,
        "y": 340,
        "wires": [
            [],
            [
                "513f0dbe.940124"
            ]
        ]
    },
    {
        "id": "892a8bfd.69c738",
        "type": "credentials",
        "z": "4aedf9e8.044e08",
        "name": "alarm code",
        "props": [
            {
                "value": "alarm_code",
                "type": "msg"
            }
        ],
        "x": 1030,
        "y": 340,
        "wires": [
            [
                "c901e347.7a1dc"
            ]
        ]
    },
    {
        "id": "c901e347.7a1dc",
        "type": "api-call-service",
        "z": "4aedf9e8.044e08",
        "name": "arm alarm",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "alarm_control_panel",
        "service": "alarm_arm_home",
        "entityId": "alarm_control_panel.alarm_panel",
        "data": "{\"code\":\"{{ alarm_code }}\"}",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1260,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "d530f3f1.e8195",
        "type": "trigger-state",
        "z": "4aedf9e8.044e08",
        "name": "not_home -> home",
        "server": "8b52884a.b76658",
        "entityid": "sensor.anyone_home",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "n16bzdqj6p",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "home"
            },
            {
                "id": "1cv3kmbt40v",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "not_home"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 130,
        "y": 640,
        "wires": [
            [
                "7f300b61.5a4044"
            ],
            []
        ]
    },
    {
        "id": "7f300b61.5a4044",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "input_boolean.auto_disarm_alarm_when_home",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 350,
        "y": 640,
        "wires": [
            [],
            [
                "f57054d6.5fd878"
            ]
        ]
    },
    {
        "id": "81c2d258.033ce",
        "type": "credentials",
        "z": "4aedf9e8.044e08",
        "name": "alarm code",
        "props": [
            {
                "value": "alarm_code",
                "type": "msg"
            }
        ],
        "x": 990,
        "y": 640,
        "wires": [
            [
                "d837e04d.b2546"
            ]
        ]
    },
    {
        "id": "d837e04d.b2546",
        "type": "api-call-service",
        "z": "4aedf9e8.044e08",
        "name": "disarm alarm",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "alarm_control_panel",
        "service": "alarm_disarm",
        "entityId": "alarm_control_panel.alarm_panel",
        "data": "{\"code\":\"{{ alarm_code }}\"}",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1230,
        "y": 640,
        "wires": [
            []
        ]
    },
    {
        "id": "3d0081db.06ffce",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "input_boolean.notify_alarm_armed",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 350,
        "y": 760,
        "wires": [
            [],
            [
                "7cf2a0d2.f39ae",
                "9e7b18fc.02bc08",
                "3b0b9b77.a62ff4"
            ]
        ]
    },
    {
        "id": "7c85f3a.d00500c",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "input_boolean.notify_alarm_disarmed",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 350,
        "y": 820,
        "wires": [
            [],
            [
                "7cf2a0d2.f39ae",
                "9e7b18fc.02bc08",
                "3d9da1d0.c9fb5e",
                "3b0b9b77.a62ff4"
            ]
        ]
    },
    {
        "id": "cca292a3.05942",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "input_boolean.notify_alarm_triggered",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 350,
        "y": 1000,
        "wires": [
            [],
            [
                "20800e94.dc37f2",
                "e2f0bf60.7c222"
            ]
        ]
    },
    {
        "id": "513f0dbe.940124",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "alarm automatic mode?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "automatic",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "input_select.alarm_mode",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 590,
        "y": 340,
        "wires": [
            [],
            [
                "dba11aed.2b5e28"
            ]
        ]
    },
    {
        "id": "f57054d6.5fd878",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "alarm automatic mode?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "automatic",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "input_select.alarm_mode",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 590,
        "y": 640,
        "wires": [
            [],
            [
                "81c2d258.033ce"
            ]
        ]
    },
    {
        "id": "fe046407.ab0868",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Status",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "alarm_control_panel.alarm_panel",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 730,
        "y": 760,
        "wires": [
            [
                "1104f7d2.7a2938"
            ]
        ]
    },
    {
        "id": "9e7b18fc.02bc08",
        "type": "api-current-state",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Status",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "alarm_control_panel.alarm_panel",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 730,
        "y": 820,
        "wires": [
            [
                "42e3cc92.5ddb44"
            ]
        ]
    },
    {
        "id": "a3022d37.abad7",
        "type": "inject",
        "z": "9143c7f2.16df18",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 860,
        "y": 180,
        "wires": [
            [
                "5b3f844.f2cf77c"
            ]
        ]
    },
    {
        "id": "8200a719.646368",
        "type": "inject",
        "z": "9143c7f2.16df18",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 860,
        "y": 820,
        "wires": [
            [
                "46cdb220.d99dbc"
            ]
        ]
    },
    {
        "id": "1ab168ac.d3e527",
        "type": "trigger-state",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Disarmed",
        "server": "8b52884a.b76658",
        "entityid": "alarm_control_panel.alarm_panel",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "u92ykgxcnd",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "disarmed"
            },
            {
                "id": "2vhxcfx6q13",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is_not",
                "comparatorValueDatatype": "str",
                "comparatorValue": "disarmed"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 140,
        "y": 820,
        "wires": [
            [
                "7c85f3a.d00500c"
            ],
            []
        ]
    },
    {
        "id": "cea06a40.728948",
        "type": "trigger-state",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Armed",
        "server": "8b52884a.b76658",
        "entityid": "alarm_control_panel.alarm_panel",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "ty01v74n8h",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "re",
                "comparatorValue": "^armed.*"
            },
            {
                "id": "i15iybgnzt",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is_not",
                "comparatorValueDatatype": "re",
                "comparatorValue": "^armed.*"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 150,
        "y": 760,
        "wires": [
            [
                "3d0081db.06ffce"
            ],
            []
        ]
    },
    {
        "id": "84269af4.ae7e98",
        "type": "debug",
        "z": "2fad043e.317c8c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 670,
        "y": 1620,
        "wires": []
    },
    {
        "id": "20fb1e76.a034e2",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "Alarm Disarmed 3",
        "server": "8b52884a.b76658",
        "entityid": "alarm_control_panel.alarm_panel",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "v3xl7gf8glf",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "disarmed"
            },
            {
                "id": "lfj0hpkx9i8",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "re",
                "comparatorValue": "^armed.*"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 190,
        "y": 1480,
        "wires": [
            [
                "9b45867f.955ba8"
            ],
            []
        ]
    },
    {
        "id": "9b45867f.955ba8",
        "type": "debug",
        "z": "2fad043e.317c8c",
        "name": "test 3",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 440,
        "y": 1480,
        "wires": []
    },
    {
        "id": "1f88175.8a907e9",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "Alarm Armed 3",
        "server": "8b52884a.b76658",
        "entityid": "alarm_control_panel.alarm_panel",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "x6ekl8kp0e",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "disarmed"
            },
            {
                "id": "bfwzhu9dots",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "re",
                "comparatorValue": "^armed.*"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 180,
        "y": 1540,
        "wires": [
            [
                "9b45867f.955ba8"
            ],
            []
        ]
    },
    {
        "id": "44e5b3e.e1d474c",
        "type": "server-state-changed",
        "z": "2fad043e.317c8c",
        "name": "Alarm Disarmed 4",
        "server": "8b52884a.b76658",
        "entityidfilter": "alarm_control_panel.alarm_panel",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "disarmed",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "outputs": 2,
        "x": 170,
        "y": 1620,
        "wires": [
            [
                "e872230d.c5e92"
            ],
            []
        ]
    },
    {
        "id": "6aeb62df.50892c",
        "type": "server-state-changed",
        "z": "2fad043e.317c8c",
        "name": "Alarm Armed 4",
        "server": "8b52884a.b76658",
        "entityidfilter": "alarm_control_panel.alarm_panel",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "^armed.*",
        "halt_if_type": "re",
        "halt_if_compare": "is_not",
        "outputs": 2,
        "x": 160,
        "y": 1680,
        "wires": [
            [
                "e872230d.c5e92"
            ],
            []
        ]
    },
    {
        "id": "e872230d.c5e92",
        "type": "debug",
        "z": "2fad043e.317c8c",
        "name": "test 4",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 370,
        "y": 1680,
        "wires": []
    },
    {
        "id": "6becc24f.c28d6c",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "Alarm Armed",
        "server": "8b52884a.b76658",
        "entityid": "sensor.alarm_status",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "r22ucrgnllj",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "Armed"
            },
            {
                "id": "06ml9kxp4abu",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "Disarmed"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 690,
        "y": 1500,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "aca97ac6.eba0d8",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "Alarm Disarmed",
        "server": "8b52884a.b76658",
        "entityid": "sensor.alarm_status",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "ugytonany1",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "Disarmed"
            },
            {
                "id": "frjli83mrw",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "Armed"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 680,
        "y": 1560,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "630ebb83.dbc224",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "Jeff's phone (wifi) not_home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "device_tracker.jeffs_xs",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 200,
        "y": 40,
        "wires": [
            [],
            [
                "16f12e62.2031d2",
                "21e5467e.c04e6a"
            ]
        ]
    },
    {
        "id": "7caa2413.62a4fc",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "Jen's phone (wifi) not_home?",
        "server": "8b52884a.b76658",
        "version": "1",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "device_tracker.jennifersxsmax",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 200,
        "y": 100,
        "wires": [
            [],
            [
                "16f12e62.2031d2",
                "21e5467e.c04e6a"
            ]
        ]
    },
    {
        "id": "84f77b1c.758d08",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "Jeff's phone (gps) not_home?",
        "server": "8b52884a.b76658",
        "version": "1",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "device_tracker.jeffs_xs_2",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 200,
        "y": 220,
        "wires": [
            [],
            [
                "16f12e62.2031d2",
                "21e5467e.c04e6a"
            ]
        ]
    },
    {
        "id": "4d79feec.8f286",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "Jen's phone (gps) not_home?",
        "server": "8b52884a.b76658",
        "version": "1",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "device_tracker.jennifers_xs_max",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 200,
        "y": 280,
        "wires": [
            [],
            [
                "16f12e62.2031d2",
                "21e5467e.c04e6a"
            ]
        ]
    },
    {
        "id": "bdd3ab2a.8fef78",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "Jeff's phone (wifi) home?",
        "server": "8b52884a.b76658",
        "version": "1",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "device_tracker.jeffs_xs",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "not_home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 210,
        "y": 960,
        "wires": [
            [],
            [
                "fe1f1f4a.3f5bc",
                "e0d9002.3e0be"
            ]
        ]
    },
    {
        "id": "8e0cf787.78b938",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "Jen's phone (wifi) home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "device_tracker.jennifersxsmax",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "not_home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 210,
        "y": 1020,
        "wires": [
            [],
            [
                "fe1f1f4a.3f5bc",
                "e0d9002.3e0be"
            ]
        ]
    },
    {
        "id": "90c40146.a5c44",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "Jeff's phone (gps) home?",
        "server": "8b52884a.b76658",
        "version": "1",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "device_tracker.jeffs_xs_2",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "not_home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 210,
        "y": 1140,
        "wires": [
            [],
            [
                "fe1f1f4a.3f5bc",
                "e0d9002.3e0be"
            ]
        ]
    },
    {
        "id": "7ac57ec8.a0491",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "Jen's phone (gps) home?",
        "server": "8b52884a.b76658",
        "version": "1",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "device_tracker.jennifers_xs_max",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "not_home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 210,
        "y": 1200,
        "wires": [
            [],
            [
                "fe1f1f4a.3f5bc",
                "e0d9002.3e0be"
            ]
        ]
    },
    {
        "id": "52a680e.b58558",
        "type": "delay",
        "z": "9143c7f2.16df18",
        "name": "",
        "pauseType": "delay",
        "timeout": "10",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 580,
        "y": 540,
        "wires": [
            [
                "16f12e62.2031d2",
                "21e5467e.c04e6a"
            ]
        ]
    },
    {
        "id": "d7acbe2a.ab111",
        "type": "delay",
        "z": "9143c7f2.16df18",
        "name": "",
        "pauseType": "delay",
        "timeout": "20",
        "timeoutUnits": "seconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 580,
        "y": 600,
        "wires": [
            [
                "16f12e62.2031d2",
                "21e5467e.c04e6a"
            ]
        ]
    },
    {
        "id": "98c38f0a.2ef8b",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "Someone came home",
        "server": "8b52884a.b76658",
        "version": "1",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "sensor.anyone_home",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "not_home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 220,
        "y": 1340,
        "wires": [
            [
                "4c5a09c0.3a0ee8"
            ],
            [
                "4c5a09c0.3a0ee8"
            ]
        ]
    },
    {
        "id": "31b8c785.cc1828",
        "type": "api-call-service",
        "z": "9143c7f2.16df18",
        "name": "notify jeff iOS",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "notify",
        "service": "mobile_app_jeffs_xs",
        "entityId": "",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 880,
        "y": 1380,
        "wires": [
            []
        ]
    },
    {
        "id": "4c5a09c0.3a0ee8",
        "type": "function",
        "z": "9143c7f2.16df18",
        "name": "Format iOS message",
        "func": "var title = \"Presence\"\nvar status = msg.payload;\nvar message = \"\"\n\nif (status == \"home\") {\n    message = \"Someone came home\"\n    msg.payload = {\n        \"data\": {\n            message,\n            title,\n        }\n    }\n} else {\n    message = \"Everyone has left home\"\n    msg.payload = {\n        \"data\": {\n            message,\n            title,\n            data: {\n                push: {\n                    sound: \"US-EN-Morgan-Freeman-Welcome-Home.wav\"\n                }\n            }\n        }\n    }    \n}\nreturn [ msg ];",
        "outputs": 1,
        "noerr": 0,
        "x": 580,
        "y": 1340,
        "wires": [
            [
                "31b8c785.cc1828"
            ]
        ]
    },
    {
        "id": "4f9d09c9.24c9f8",
        "type": "api-call-service",
        "z": "9143c7f2.16df18",
        "name": "notify jen iOS",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "notify",
        "service": "mobile_app_jennifers_xs_max",
        "entityId": "",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 880,
        "y": 1440,
        "wires": [
            []
        ]
    },
    {
        "id": "9ee1346f.7bc3b8",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "Jeff came home",
        "server": "8b52884a.b76658",
        "version": "1",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "sensor.jeff_home_status",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "False",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 240,
        "y": 1400,
        "wires": [
            [],
            [
                "398e9c65.547984"
            ]
        ]
    },
    {
        "id": "398e9c65.547984",
        "type": "function",
        "z": "9143c7f2.16df18",
        "name": "Format iOS message",
        "func": "var title = \"Presence\"\nvar message = \"Jeff came home\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n    }\n}\nreturn [ msg ];",
        "outputs": 1,
        "noerr": 0,
        "x": 580,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "93e5af26.4c3cd",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "Jen came home",
        "server": "8b52884a.b76658",
        "version": 1,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "sensor.jen_home_status",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "False",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 240,
        "y": 1460,
        "wires": [
            [],
            [
                "787546ca.e16058"
            ]
        ]
    },
    {
        "id": "787546ca.e16058",
        "type": "function",
        "z": "9143c7f2.16df18",
        "name": "Format iOS message",
        "func": "var title = \"Presence\"\nvar message = \"Jen came home\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                sound: \"US-EN-Morgan-Freeman-Wife-Is-Arriving.wav\"\n            }\n        }\n    }\n}\n\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 580,
        "y": 1460,
        "wires": [
            [
                "31b8c785.cc1828"
            ]
        ]
    },
    {
        "id": "8872c7a2.6c8f68",
        "type": "mqtt in",
        "z": "9143c7f2.16df18",
        "name": "Jeff's Garage",
        "topic": "og-jeff/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 250,
        "y": 420,
        "wires": [
            [
                "ff433106.9906a"
            ]
        ]
    },
    {
        "id": "9dde6613.499078",
        "type": "mqtt in",
        "z": "9143c7f2.16df18",
        "name": "Jen'sGarage",
        "topic": "og-jen/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 250,
        "y": 480,
        "wires": [
            [
                "ff433106.9906a"
            ]
        ]
    },
    {
        "id": "10c8fd39.3704f3",
        "type": "mqtt in",
        "z": "75b62c93.dd5d84",
        "name": "Jen'sGarage",
        "topic": "og-jen/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 90,
        "y": 100,
        "wires": [
            [
                "4e77c4e8.47d44c"
            ]
        ]
    },
    {
        "id": "9b53d510.6bf878",
        "type": "switch",
        "z": "75b62c93.dd5d84",
        "name": "open?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OPEN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 100,
        "wires": [
            [
                "bc004752.b8a2c8"
            ]
        ]
    },
    {
        "id": "bc004752.b8a2c8",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "open > 30 mins?",
        "func": "var epochMS = new Date().getTime();\nvar minsToCheck = 30;\nvar minutesInMS = 60000;\nvar initTimeMS = global.get('cover.jen_garage_door_mqtt.initTimeMS') || epochMS;\nvar duration = epochMS - initTimeMS\nglobal.set('cover.jen_garage_door_mqtt.durationTimeMS',duration);\n\nif ((duration) >= (minutesInMS*minsToCheck)) {\n  return [ msg ];\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 690,
        "y": 100,
        "wires": [
            [
                "c8596774.8efe78",
                "38a54037.e7812"
            ]
        ]
    },
    {
        "id": "980657f2.e40d48",
        "type": "mqtt in",
        "z": "75b62c93.dd5d84",
        "name": "Jeff's Garage",
        "topic": "og-jeff/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 90,
        "y": 440,
        "wires": [
            [
                "81746025.87fff"
            ]
        ]
    },
    {
        "id": "81746025.87fff",
        "type": "rbe",
        "z": "75b62c93.dd5d84",
        "name": "state change",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 310,
        "y": 440,
        "wires": [
            [
                "e240b7cc.3244e8"
            ]
        ]
    },
    {
        "id": "e240b7cc.3244e8",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "reset jeffs door timer",
        "func": "var epochMS = new Date().getTime();\nglobal.set('cover.jeff_garage_door_mqtt.initTimeMS',epochMS);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 700,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "898c5725.6b1c28",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Jen's garage open msg",
        "func": "var category = \"garage2\";\nvar name = \"Jen's\";\nvar title = \"Jen's Garage Door\";\nvar openTimeinMS = global.get('cover.jen_garage_door_mqtt.durationTimeMS') || 0;\nvar message = name + \" garage door has remained open for about \" + millisecondsToStr(openTimeinMS)\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category,\n                sound: \"US-EN-Morgan-Freeman-Garage-Door-Opened.wav\"\n            }\n        }\n    }\n}\nreturn [ msg ];\n\nfunction millisecondsToStr (milliseconds) {\n    // TIP: to find current time in milliseconds, use:\n    // var  current_time_milliseconds = new Date().getTime();\n\n    function numberEnding (number) {\n        return (number > 1) ? 's' : '';\n    }\n\n    var temp = Math.floor(milliseconds / 1000);\n    var years = Math.floor(temp / 31536000);\n    if (years) {\n        return years + ' year' + numberEnding(years);\n    }\n    //TODO: Months! Maybe weeks? \n    var days = Math.floor((temp %= 31536000) / 86400);\n    if (days) {\n        return days + ' day' + numberEnding(days);\n    }\n    var hours = Math.floor((temp %= 86400) / 3600);\n    if (hours) {\n        return hours + ' hour' + numberEnding(hours);\n    }\n    var minutes = Math.floor((temp %= 3600) / 60);\n    if (minutes) {\n        return minutes + ' minute' + numberEnding(minutes);\n    }\n    var seconds = temp % 60;\n    if (seconds) {\n        return seconds + ' second' + numberEnding(seconds);\n    }\n    return 'less than a second'; //'just now' //or other string you like;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1170,
        "y": 100,
        "wires": [
            [
                "e2f343b.68adbc",
                "eb2d3623.194588"
            ]
        ]
    },
    {
        "id": "30580f99.aa3ee",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "reset jens door timer",
        "func": "var epochMS = new Date().getTime();\nglobal.set('cover.jen_garage_door_mqtt.initTimeMS',epochMS);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 700,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "9b59b519.79bcb8",
        "type": "inject",
        "z": "75b62c93.dd5d84",
        "name": "reset timers",
        "repeat": "",
        "crontab": "",
        "once": true,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 310,
        "y": 560,
        "wires": [
            [
                "30580f99.aa3ee",
                "e240b7cc.3244e8"
            ]
        ]
    },
    {
        "id": "9f46e22a.d6ab2",
        "type": "mqtt in",
        "z": "75b62c93.dd5d84",
        "name": "Jen'sGarage",
        "topic": "og-jen/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 90,
        "y": 500,
        "wires": [
            [
                "d7b2d2e8.cc2b9"
            ]
        ]
    },
    {
        "id": "d7b2d2e8.cc2b9",
        "type": "rbe",
        "z": "75b62c93.dd5d84",
        "name": "state change",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 310,
        "y": 500,
        "wires": [
            [
                "30580f99.aa3ee"
            ]
        ]
    },
    {
        "id": "c8596774.8efe78",
        "type": "delay",
        "z": "75b62c93.dd5d84",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "hour",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 940,
        "y": 100,
        "wires": [
            [
                "898c5725.6b1c28",
                "d9d836af.784958"
            ]
        ]
    },
    {
        "id": "d9b23766.5625d8",
        "type": "switch",
        "z": "75b62c93.dd5d84",
        "name": "open?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OPEN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 490,
        "y": 280,
        "wires": [
            [
                "db4257d1.a80da8"
            ]
        ]
    },
    {
        "id": "db4257d1.a80da8",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "open > 30 mins?",
        "func": "var epochMS = new Date().getTime();\nvar minsToCheck = 30;\nvar minutesInMS = 60000;\nvar initTimeMS = global.get('cover.jeff_garage_door_mqtt.initTimeMS') || epochMS;\nvar duration = epochMS - initTimeMS\nglobal.set('cover.jeff_garage_door_mqtt.durationTimeMS',duration);\n\nif ((duration) >= (minutesInMS*minsToCheck)) {\n  return [ msg ];\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 690,
        "y": 280,
        "wires": [
            [
                "9a7bcfdf.52ec2",
                "153a9d8e.43b672"
            ]
        ]
    },
    {
        "id": "ae4f1159.d0923",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Jeff's garage open msg",
        "func": "var category = \"garage\"\nvar name = \"Jeff's\"\nvar title = \"Jeff's Garage Door\";\nvar openTimeinMS = global.get('cover.jeff_garage_door_mqtt.durationTimeMS') || 0;\nvar message = name + \" garage door has remained open for about \" + millisecondsToStr(openTimeinMS)\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category,\n                sound: \"US-EN-Morgan-Freeman-Garage-Door-Opened.wav\"\n            }\n        }\n    }\n}\nreturn [ msg ];\n\nfunction millisecondsToStr (milliseconds) {\n    // TIP: to find current time in milliseconds, use:\n    // var  current_time_milliseconds = new Date().getTime();\n\n    function numberEnding (number) {\n        return (number > 1) ? 's' : '';\n    }\n\n    var temp = Math.floor(milliseconds / 1000);\n    var years = Math.floor(temp / 31536000);\n    if (years) {\n        return years + ' year' + numberEnding(years);\n    }\n    //TODO: Months! Maybe weeks? \n    var days = Math.floor((temp %= 31536000) / 86400);\n    if (days) {\n        return days + ' day' + numberEnding(days);\n    }\n    var hours = Math.floor((temp %= 86400) / 3600);\n    if (hours) {\n        return hours + ' hour' + numberEnding(hours);\n    }\n    var minutes = Math.floor((temp %= 3600) / 60);\n    if (minutes) {\n        return minutes + ' minute' + numberEnding(minutes);\n    }\n    var seconds = temp % 60;\n    if (seconds) {\n        return seconds + ' second' + numberEnding(seconds);\n    }\n    return 'less than a second'; //'just now' //or other string you like;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1170,
        "y": 280,
        "wires": [
            [
                "e2f343b.68adbc",
                "eb2d3623.194588"
            ]
        ]
    },
    {
        "id": "9a7bcfdf.52ec2",
        "type": "delay",
        "z": "75b62c93.dd5d84",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "2",
        "rateUnits": "hour",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 940,
        "y": 280,
        "wires": [
            [
                "ae4f1159.d0923",
                "84638053.1d746"
            ]
        ]
    },
    {
        "id": "460b7861.053948",
        "type": "mqtt in",
        "z": "75b62c93.dd5d84",
        "name": "Jeff's Garage",
        "topic": "og-jeff/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 90,
        "y": 280,
        "wires": [
            [
                "c3f92fa3.2c705"
            ]
        ]
    },
    {
        "id": "38a54037.e7812",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "input_boolean.auto_close_garage_door_jen",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 970,
        "y": 40,
        "wires": [
            [],
            [
                "cb49991c.5e93f8"
            ]
        ]
    },
    {
        "id": "cb49991c.5e93f8",
        "type": "api-call-service",
        "z": "75b62c93.dd5d84",
        "name": "close jen's garage door",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "cover",
        "service": "close_cover",
        "entityId": "cover.jen_garage_door",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1170,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "153a9d8e.43b672",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "input_boolean.auto_close_garage_door_jeff",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 970,
        "y": 220,
        "wires": [
            [],
            [
                "cc79bb83.6bf098"
            ]
        ]
    },
    {
        "id": "cc79bb83.6bf098",
        "type": "api-call-service",
        "z": "75b62c93.dd5d84",
        "name": "close jeff's garage door",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "cover",
        "service": "close_cover",
        "entityId": "cover.jeff_garage_door",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1170,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "4e77c4e8.47d44c",
        "type": "weekday",
        "z": "75b62c93.dd5d84",
        "name": "",
        "sun": false,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": false,
        "x": 300,
        "y": 100,
        "wires": [
            [
                "9b53d510.6bf878"
            ],
            []
        ]
    },
    {
        "id": "c3f92fa3.2c705",
        "type": "weekday",
        "z": "75b62c93.dd5d84",
        "name": "",
        "sun": false,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": false,
        "x": 300,
        "y": 280,
        "wires": [
            [
                "d9b23766.5625d8"
            ],
            []
        ]
    },
    {
        "id": "2873dd6.dc95822",
        "type": "mqtt in",
        "z": "75b62c93.dd5d84",
        "name": "Jeff's Garage",
        "topic": "og-jeff/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 90,
        "y": 820,
        "wires": [
            [
                "fe687cbb.d4f38",
                "7b9c3894.6a8248"
            ]
        ]
    },
    {
        "id": "c42a5b00.4342c8",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Jeff's garage open msg",
        "func": "var category = \"garage\"\nvar title = \"Jeff's Garage Door\";\nvar message = title + \" is open\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category,\n                sound: \"US-EN-Morgan-Freeman-Garage-Door-Opened.wav\"\n            }\n        }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1070,
        "y": 740,
        "wires": [
            [
                "13e805e6.ba940a"
            ]
        ]
    },
    {
        "id": "13e805e6.ba940a",
        "type": "api-call-service",
        "z": "75b62c93.dd5d84",
        "name": "notify jeff iOS",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "notify",
        "service": "mobile_app_jeffs_xs",
        "entityId": "",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1440,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "aa116aed.726218",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 770,
        "y": 820,
        "wires": [
            [
                "3ab2d709.6538b8"
            ],
            [
                "c42a5b00.4342c8"
            ]
        ]
    },
    {
        "id": "3ab2d709.6538b8",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Jeff's garage open msg",
        "func": "var category = \"garage\"\nvar title = \"Jeff's Garage Door\";\nvar message = title + \" is open and no one is home!\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category,\n                sound: \"US-EN-Morgan-Freeman-Garage-Door-Opened.wav\"\n            }\n        }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1070,
        "y": 800,
        "wires": [
            [
                "13e805e6.ba940a",
                "fa6e731.f06f79"
            ]
        ]
    },
    {
        "id": "65fb8035.02a31",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "input_boolean.notify_garage_doors_home",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 510,
        "y": 820,
        "wires": [
            [],
            [
                "aa116aed.726218",
                "f9984dec.1157b"
            ]
        ]
    },
    {
        "id": "b9d7a102.ec945",
        "type": "mqtt in",
        "z": "75b62c93.dd5d84",
        "name": "Jen's Garage",
        "topic": "og-jen/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 90,
        "y": 1060,
        "wires": [
            [
                "d994bebd.cacc4",
                "1f4e8e01.7ed502"
            ]
        ]
    },
    {
        "id": "dba0b367.9cfa",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Jen's garage open msg",
        "func": "var category = \"garage2\"\nvar title = \"Jen's Garage Door\";\nvar message = title + \" is open\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category,\n                sound: \"US-EN-Morgan-Freeman-Garage-Door-Opened.wav\"\n            }\n        }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1070,
        "y": 1020,
        "wires": [
            [
                "13e805e6.ba940a"
            ]
        ]
    },
    {
        "id": "d8d2558c.c647a8",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 770,
        "y": 1060,
        "wires": [
            [
                "55f9ad38.78bbf4"
            ],
            [
                "dba0b367.9cfa"
            ]
        ]
    },
    {
        "id": "55f9ad38.78bbf4",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Jen's garage open msg",
        "func": "var category = \"garage2\"\nvar title = \"Jen's Garage Door\";\nvar message = title + \" is open and no one is home!\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category,\n                sound: \"US-EN-Morgan-Freeman-Garage-Door-Opened.wav\"\n            }\n        }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1070,
        "y": 1060,
        "wires": [
            [
                "13e805e6.ba940a",
                "fa6e731.f06f79"
            ]
        ]
    },
    {
        "id": "c31af48.35a2a08",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "input_boolean.notify_garage_doors_home",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 510,
        "y": 1060,
        "wires": [
            [],
            [
                "d8d2558c.c647a8",
                "2f3e0f3c.f3db3"
            ]
        ]
    },
    {
        "id": "fa6e731.f06f79",
        "type": "api-call-service",
        "z": "75b62c93.dd5d84",
        "name": "notify jen iOS",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "notify",
        "service": "mobile_app_jennifers_xs_max",
        "entityId": "",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1440,
        "y": 1000,
        "wires": [
            []
        ]
    },
    {
        "id": "5ba2f2e1.f603fc",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 770,
        "y": 880,
        "wires": [
            [
                "a7875b7c.d961c8"
            ],
            [
                "4cb25abb.6dc924"
            ]
        ]
    },
    {
        "id": "449a1640.2c5008",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "input_boolean.notify_garage_doors_away",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 510,
        "y": 880,
        "wires": [
            [],
            [
                "5ba2f2e1.f603fc",
                "59ec5f4a.d8bc9"
            ]
        ]
    },
    {
        "id": "4cb25abb.6dc924",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Jeff's garage closed msg",
        "func": "var category = \"garage\"\nvar title = \"Jeff's Garage Door\";\nvar message = title + \" is closed\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category,\n                sound: \"US-EN-Morgan-Freeman-Garage-Door-Closed.wav\"\n            }\n        }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1070,
        "y": 860,
        "wires": [
            [
                "13e805e6.ba940a"
            ]
        ]
    },
    {
        "id": "a7875b7c.d961c8",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Jeff's garage closed msg",
        "func": "var category = \"garage\"\nvar title = \"Jeff's Garage Door\";\nvar message = title + \" is closed and no one is home!\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category,\n                sound: \"US-EN-Morgan-Freeman-Garage-Door-Closed.wav\"\n            }\n        }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1070,
        "y": 920,
        "wires": [
            [
                "13e805e6.ba940a",
                "fa6e731.f06f79"
            ]
        ]
    },
    {
        "id": "dfd317cd.c2e2e8",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 770,
        "y": 1120,
        "wires": [
            [
                "1423693d.38f4a7"
            ],
            [
                "5a4230ac.531df"
            ]
        ]
    },
    {
        "id": "d047908d.ea259",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "input_boolean.notify_garage_doors_away",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 510,
        "y": 1120,
        "wires": [
            [],
            [
                "dfd317cd.c2e2e8",
                "1dba506a.727e2"
            ]
        ]
    },
    {
        "id": "5a4230ac.531df",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Jen's garage closed msg",
        "func": "var category = \"garage2\"\nvar title = \"Jen's Garage Door\";\nvar message = title + \" is closed\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category,\n                sound: \"US-EN-Morgan-Freeman-Garage-Door-Closed.wav\"\n            }\n        }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1070,
        "y": 1120,
        "wires": [
            [
                "13e805e6.ba940a"
            ]
        ]
    },
    {
        "id": "1423693d.38f4a7",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Jen's garage closed msg",
        "func": "var category = \"garage2\"\nvar title = \"Jen's Garage Door\";\nvar message = title + \" is closed and no one is home!\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category,\n                sound: \"US-EN-Morgan-Freeman-Garage-Door-Closed.wav\"\n            }\n        }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1070,
        "y": 1160,
        "wires": [
            [
                "13e805e6.ba940a",
                "fa6e731.f06f79"
            ]
        ]
    },
    {
        "id": "d7f5494a.ac87a8",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "open > 30 mins?",
        "func": "var minsToCheck = 30;\nvar minutesInMs = 60000;\nvar openTimeinMS = global.get('cover.jen_garage_door.openTimeinMS') || 0;\n\nif (openTimeinMS >= (minutesInMs*minsToCheck) && msg.payload === \"open\") {\n   return [ msg ];\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 850,
        "y": 1820,
        "wires": [
            [
                "48ae7752.987008",
                "ff456fb3.f8285"
            ]
        ]
    },
    {
        "id": "37abc17f.fcedee",
        "type": "api-call-service",
        "z": "2fad043e.317c8c",
        "name": "close jen's garage door",
        "server": "8b52884a.b76658",
        "service_domain": "cover",
        "service": "close_cover",
        "data": "{\"entity_id\":\"cover.jen_garage_door\"}",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "x": 1330,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "48ae7752.987008",
        "type": "api-current-state",
        "z": "2fad043e.317c8c",
        "name": "run?",
        "server": "8b52884a.b76658",
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "input_boolean.auto_close_garage_door_jen",
        "state_type": "str",
        "override_payload": true,
        "override_data": true,
        "x": 1130,
        "y": 1780,
        "wires": [
            [
                "37abc17f.fcedee"
            ],
            []
        ]
    },
    {
        "id": "de0fab42.363648",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "open > 30 mins?",
        "func": "var minsToCheck = 30;\nvar minutesInMs = 60000;\nvar openTimeinMS = global.get('cover.jeff_garage_door.openTimeinMS') || 0;\n\nif (openTimeinMS >= (minutesInMs*minsToCheck) && msg.payload === \"open\") {\n   return [ msg ];\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 850,
        "y": 1940,
        "wires": [
            [
                "e534ddd2.7c0f7",
                "d6091093.cb93c"
            ]
        ]
    },
    {
        "id": "d20bd289.82802",
        "type": "api-call-service",
        "z": "2fad043e.317c8c",
        "name": "close jeff's garage door",
        "server": "8b52884a.b76658",
        "service_domain": "cover",
        "service": "close_cover",
        "data": "{\"entity_id\":\"cover.jeff_garage_door\"}",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "x": 1330,
        "y": 1900,
        "wires": [
            []
        ]
    },
    {
        "id": "e534ddd2.7c0f7",
        "type": "api-current-state",
        "z": "2fad043e.317c8c",
        "name": "run?",
        "server": "8b52884a.b76658",
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "input_boolean.auto_close_garage_door_jeff",
        "state_type": "str",
        "override_payload": true,
        "override_data": true,
        "x": 1130,
        "y": 1900,
        "wires": [
            [
                "d20bd289.82802"
            ],
            []
        ]
    },
    {
        "id": "c38a17e9.a67c08",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "Jen's garage open msg",
        "func": "\nvar category = \"garage2\";\nvar name = \"Jen's\";\nvar title = msg.data.event.new_state.attributes.friendly_name;\nvar openTimeinMS = global.get('cover.jen_garage_door.openTimeinMS') || 0;\nvar message_time = name + \" garage door has remained open for about \" + millisecondsToStr(openTimeinMS)\nvar message_hint = \" \\n(tap & hold this message to close the garage door now)\";\nvar quotes = [\n    'is someone about to enter the house?',\n    'what have they taken from the garage already?',\n    'easy way for rodents to get into our stuff!',\n    'is anything missing?',\n    'Once inside the garage a burglar can work uninterrupted at getting into the house',\n    'over 50% of all burglaries are through the garage',\n    'An open door is an open invitation to crime!',\n    'Leaving your garage door open is like a welcome sign for a thief!'\n];\nvar randomQuote = Math.floor(Math.random() * (quotes.length));\nvar message = message_time + \" \\n\" + quotes[randomQuote];\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category,\n                sound: \"US-EN-Morgan-Freeman-Garage-Door-Opened.wav\"\n            }\n        }\n    }\n}\nreturn [ msg ];\n\nfunction millisecondsToStr (milliseconds) {\n    // TIP: to find current time in milliseconds, use:\n    // var  current_time_milliseconds = new Date().getTime();\n\n    function numberEnding (number) {\n        return (number > 1) ? 's' : '';\n    }\n\n    var temp = Math.floor(milliseconds / 1000);\n    var years = Math.floor(temp / 31536000);\n    if (years) {\n        return years + ' year' + numberEnding(years);\n    }\n    //TODO: Months! Maybe weeks? \n    var days = Math.floor((temp %= 31536000) / 86400);\n    if (days) {\n        return days + ' day' + numberEnding(days);\n    }\n    var hours = Math.floor((temp %= 86400) / 3600);\n    if (hours) {\n        return hours + ' hour' + numberEnding(hours);\n    }\n    var minutes = Math.floor((temp %= 3600) / 60);\n    if (minutes) {\n        return minutes + ' minute' + numberEnding(minutes);\n    }\n    var seconds = temp % 60;\n    if (seconds) {\n        return seconds + ' second' + numberEnding(seconds);\n    }\n    return 'less than a second'; //'just now' //or other string you like;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1330,
        "y": 1840,
        "wires": [
            []
        ]
    },
    {
        "id": "ff456fb3.f8285",
        "type": "delay",
        "z": "2fad043e.317c8c",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "46",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 1100,
        "y": 1840,
        "wires": [
            [
                "c38a17e9.a67c08"
            ]
        ]
    },
    {
        "id": "609cfeb9.46947",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "Jeff's garage open msg",
        "func": "var category = \"garage\"\nvar name = \"Jeff's\"\nvar title = msg.data.event.new_state.attributes.friendly_name;\nvar openTimeinMS = global.get('cover.jeff_garage_door.openTimeinMS') || 0;\nvar message = name + \" garage door has remained open for about \" + millisecondsToStr(openTimeinMS)\n\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category,\n                sound: \"US-EN-Morgan-Freeman-Garage-Door-Opened.wav\"\n            }\n        }\n    }\n}\nreturn [ msg ];\n\nfunction millisecondsToStr (milliseconds) {\n    // TIP: to find current time in milliseconds, use:\n    // var  current_time_milliseconds = new Date().getTime();\n\n    function numberEnding (number) {\n        return (number > 1) ? 's' : '';\n    }\n\n    var temp = Math.floor(milliseconds / 1000);\n    var years = Math.floor(temp / 31536000);\n    if (years) {\n        return years + ' year' + numberEnding(years);\n    }\n    //TODO: Months! Maybe weeks? \n    var days = Math.floor((temp %= 31536000) / 86400);\n    if (days) {\n        return days + ' day' + numberEnding(days);\n    }\n    var hours = Math.floor((temp %= 86400) / 3600);\n    if (hours) {\n        return hours + ' hour' + numberEnding(hours);\n    }\n    var minutes = Math.floor((temp %= 3600) / 60);\n    if (minutes) {\n        return minutes + ' minute' + numberEnding(minutes);\n    }\n    var seconds = temp % 60;\n    if (seconds) {\n        return seconds + ' second' + numberEnding(seconds);\n    }\n    return 'less than a second'; //'just now' //or other string you like;\n}",
        "outputs": 1,
        "noerr": 0,
        "x": 1330,
        "y": 1960,
        "wires": [
            []
        ]
    },
    {
        "id": "d6091093.cb93c",
        "type": "delay",
        "z": "2fad043e.317c8c",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "46",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 1100,
        "y": 1960,
        "wires": [
            [
                "609cfeb9.46947"
            ]
        ]
    },
    {
        "id": "f5781487.e5cb88",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jen's door open?",
        "server": "8b52884a.b76658",
        "entityid": "cover.jen_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "03b4hq1eehkp",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            },
            {
                "id": "9b1umrt4zg4",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 170,
        "y": 1820,
        "wires": [
            [
                "2fdf6f92.87999"
            ],
            []
        ]
    },
    {
        "id": "49c79cd6.234ae4",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "add current open time",
        "func": "var currentSavedTime = global.get('cover.jen_garage_door.openTimeinMS') || 0;\nglobal.set('cover.jen_garage_door.openTimeinMS', Math.abs(msg.data.event.new_state.timeSinceChangedMs - currentSavedTime) + currentSavedTime);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 600,
        "y": 1820,
        "wires": [
            [
                "d7f5494a.ac87a8"
            ]
        ]
    },
    {
        "id": "d04b4ada.18ee38",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jeff's door open?",
        "server": "8b52884a.b76658",
        "entityid": "cover.jeff_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "03b4hq1eehkp",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            },
            {
                "id": "tle0bbbbad",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 170,
        "y": 1940,
        "wires": [
            [
                "64a74a.07b288b8"
            ],
            []
        ]
    },
    {
        "id": "510c5991.b07a78",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "add current open time",
        "func": "var currentSavedTime = global.get('cover.jeff_garage_door.openTimeinMS') || 0;\nglobal.set('cover.jeff_garage_door.openTimeinMS', Math.abs(msg.data.event.new_state.timeSinceChangedMs - currentSavedTime) + currentSavedTime);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 600,
        "y": 1940,
        "wires": [
            [
                "de0fab42.363648"
            ]
        ]
    },
    {
        "id": "d31378a4.d54338",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jen's door closed -> open",
        "server": "8b52884a.b76658",
        "entityid": "cover.jen_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "7ssscforb0o",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            },
            {
                "id": "ca2smqkbbur",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 190,
        "y": 2020,
        "wires": [
            [
                "cea26499.ab66b8"
            ],
            []
        ]
    },
    {
        "id": "cea26499.ab66b8",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "reset jens door timer",
        "func": "global.set('cover.jen_garage_door.openTimeinMS',0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 700,
        "y": 2020,
        "wires": [
            []
        ]
    },
    {
        "id": "72c4436.33817bc",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jeff's door closed -> open",
        "server": "8b52884a.b76658",
        "entityid": "cover.jeff_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "7ssscforb0o",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            },
            {
                "id": "ca2smqkbbur",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 190,
        "y": 2080,
        "wires": [
            [
                "d08e0432.2ff2a8"
            ],
            []
        ]
    },
    {
        "id": "d08e0432.2ff2a8",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "reset jeff door timer",
        "func": "global.set('cover.jeff_garage_door.openTimeinMS',0);\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 690,
        "y": 2080,
        "wires": [
            []
        ]
    },
    {
        "id": "79bf855c.c19dec",
        "type": "inject",
        "z": "2fad043e.317c8c",
        "name": "reset timers",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 470,
        "y": 2200,
        "wires": [
            [
                "cea26499.ab66b8",
                "d08e0432.2ff2a8"
            ]
        ]
    },
    {
        "id": "6c3b318a.a98d9",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jen's door open -> closed",
        "server": "8b52884a.b76658",
        "entityid": "cover.jen_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "g9u7cbbteu8",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            },
            {
                "id": "iydwvunsg8",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 190,
        "y": 2140,
        "wires": [
            [
                "cea26499.ab66b8"
            ],
            []
        ]
    },
    {
        "id": "8b3f913d.eb1ed",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jeff's door open -> closed",
        "server": "8b52884a.b76658",
        "entityid": "cover.jeff_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "19z302q4msn",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            },
            {
                "id": "1kylpoo28e7",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 190,
        "y": 2200,
        "wires": [
            [
                "d08e0432.2ff2a8"
            ],
            []
        ]
    },
    {
        "id": "2fdf6f92.87999",
        "type": "weekday",
        "z": "2fad043e.317c8c",
        "name": "",
        "sun": false,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": false,
        "x": 380,
        "y": 1820,
        "wires": [
            [
                "49c79cd6.234ae4"
            ],
            []
        ]
    },
    {
        "id": "64a74a.07b288b8",
        "type": "weekday",
        "z": "2fad043e.317c8c",
        "name": "",
        "sun": false,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": false,
        "x": 380,
        "y": 1940,
        "wires": [
            [
                "510c5991.b07a78"
            ],
            []
        ]
    },
    {
        "id": "5b85b6ec.48bd58",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jeff's garage door closed -> open",
        "server": "8b52884a.b76658",
        "entityid": "cover.jeff_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "7ssscforb0o",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            },
            {
                "id": "ca2smqkbbur",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 220,
        "y": 2280,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "a388fdb6.d99c6",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jen's garage door closed -> open",
        "server": "8b52884a.b76658",
        "entityid": "cover.jen_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "7ssscforb0o",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            },
            {
                "id": "ca2smqkbbur",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 220,
        "y": 2340,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "e744fbe.5ec6708",
        "type": "api-call-service",
        "z": "2fad043e.317c8c",
        "name": "save front snapshot",
        "server": "8b52884a.b76658",
        "service_domain": "camera",
        "service": "snapshot",
        "data": "{\"entity_id\":\"camera.front\",\"filename\":\"/config/www/camera/camera.front.jpg\"}",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "x": 950,
        "y": 1440,
        "wires": [
            []
        ]
    },
    {
        "id": "f365df1c.c46c7",
        "type": "api-call-service",
        "z": "2fad043e.317c8c",
        "name": "save driveway snapshot",
        "server": "8b52884a.b76658",
        "service_domain": "camera",
        "service": "snapshot",
        "data": "{\"entity_id\":\"camera.driveway\",\"filename\":\"/config/www/camera/camera.driveway.jpg\"}",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "x": 970,
        "y": 1500,
        "wires": [
            []
        ]
    },
    {
        "id": "f646fe81.b0e6e",
        "type": "api-call-service",
        "z": "2fad043e.317c8c",
        "name": "save porch snapshot",
        "server": "8b52884a.b76658",
        "service_domain": "camera",
        "service": "snapshot",
        "data": "{\"entity_id\":\"camera.porch\",\"filename\":\"/config/www/camera/camera.porch.jpg\"}",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "x": 960,
        "y": 1560,
        "wires": [
            []
        ]
    },
    {
        "id": "2e956d98.030a92",
        "type": "api-call-service",
        "z": "2fad043e.317c8c",
        "name": "save pool snapshot",
        "server": "8b52884a.b76658",
        "service_domain": "camera",
        "service": "snapshot",
        "data": "{\"entity_id\":\"camera.pool\",\"filename\":\"/config/www/camera/camera.pool.jpg\"}",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "x": 950,
        "y": 1620,
        "wires": [
            []
        ]
    },
    {
        "id": "58344902.773898",
        "type": "api-call-service",
        "z": "2fad043e.317c8c",
        "name": "save basement snapshot",
        "server": "8b52884a.b76658",
        "service_domain": "camera",
        "service": "snapshot",
        "data": "{\"entity_id\":\"camera.basement\",\"filename\":\"/config/www/camera/camera.basement.jpg\"}",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "x": 970,
        "y": 1680,
        "wires": [
            []
        ]
    },
    {
        "id": "9175ff65.a0fbf",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jeff's garage door closed -> open",
        "server": "8b52884a.b76658",
        "entityid": "cover.jeff_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "7ssscforb0o",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            },
            {
                "id": "ca2smqkbbur",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 220,
        "y": 2400,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "f414eefc.1ff79",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jen's garage door closed -> open",
        "server": "8b52884a.b76658",
        "entityid": "cover.jen_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "7ssscforb0o",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            },
            {
                "id": "ca2smqkbbur",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 220,
        "y": 2460,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "933e6891.999fd8",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jeff's garage open -> closed?",
        "server": "8b52884a.b76658",
        "entityid": "cover.jeff_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "lfo3f7bo72",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            },
            {
                "id": "4rtzy4dvtq3",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 200,
        "y": 2520,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "29ff3ef2.e293a2",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "jen's garage open -> closed?",
        "server": "8b52884a.b76658",
        "entityid": "cover.jen_garage_door",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "lq80ra8i42",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "closed"
            },
            {
                "id": "er5106nygad",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "open"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 200,
        "y": 2580,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "59496f1a.445e4",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Jeff's Garage",
        "topic": "og-jeff/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 570,
        "y": 2280,
        "wires": [
            [
                "c9f8247f.7545c8"
            ]
        ]
    },
    {
        "id": "8472baf2.9b2ff8",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Jen'sGarage",
        "topic": "og-jen/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 570,
        "y": 2340,
        "wires": [
            [
                "c9f8247f.7545c8"
            ]
        ]
    },
    {
        "id": "72157b5e.eb6a94",
        "type": "debug",
        "z": "2fad043e.317c8c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1070,
        "y": 2460,
        "wires": []
    },
    {
        "id": "c9f8247f.7545c8",
        "type": "rbe",
        "z": "2fad043e.317c8c",
        "name": "state change",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 850,
        "y": 2320,
        "wires": [
            [
                "72157b5e.eb6a94",
                "19d01461.8f5bdc",
                "b4ba092f.066458"
            ]
        ]
    },
    {
        "id": "47f521f8.e8511",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Jen's Garage Notify",
        "topic": "og-jen/OUT/NOTIFY",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 590,
        "y": 2460,
        "wires": [
            [
                "230cff5a.e06e9",
                "5169186b.d08058"
            ]
        ]
    },
    {
        "id": "230cff5a.e06e9",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "closed?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "og-jen just CLOSED!",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 840,
        "y": 2460,
        "wires": [
            [
                "72157b5e.eb6a94"
            ]
        ]
    },
    {
        "id": "5169186b.d08058",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "opened?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "og-jen just OPENED!",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 840,
        "y": 2520,
        "wires": [
            [
                "72157b5e.eb6a94"
            ]
        ]
    },
    {
        "id": "b65c3188.bd83",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Jeff's Garage Notify",
        "topic": "og-jeff/OUT/NOTIFY",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 590,
        "y": 2580,
        "wires": [
            [
                "c9e5925d.d7aa8",
                "e061073f.d0d4f8"
            ]
        ]
    },
    {
        "id": "c9e5925d.d7aa8",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "closed?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "og-jeff just CLOSED!",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 840,
        "y": 2580,
        "wires": [
            [
                "72157b5e.eb6a94"
            ]
        ]
    },
    {
        "id": "e061073f.d0d4f8",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "opened?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "og-jeff just OPENED!",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 840,
        "y": 2640,
        "wires": [
            [
                "72157b5e.eb6a94"
            ]
        ]
    },
    {
        "id": "19d01461.8f5bdc",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "closed?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "CLOSED",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1060,
        "y": 2320,
        "wires": [
            [
                "3a378387.d3a07c"
            ]
        ]
    },
    {
        "id": "3a378387.d3a07c",
        "type": "debug",
        "z": "2fad043e.317c8c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1250,
        "y": 2320,
        "wires": []
    },
    {
        "id": "b4ba092f.066458",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "open?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OPEN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1050,
        "y": 2380,
        "wires": [
            [
                "2bce1f4b.5bd6f"
            ]
        ]
    },
    {
        "id": "2bce1f4b.5bd6f",
        "type": "debug",
        "z": "2fad043e.317c8c",
        "name": "",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 1250,
        "y": 2380,
        "wires": []
    },
    {
        "id": "da4a802.356038",
        "type": "trigger-state",
        "z": "9143c7f2.16df18",
        "name": "Jeff home -> not_home (bluetooth)",
        "server": "8b52884a.b76658",
        "entityid": "input_boolean.jeff_occupancy",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "a93we87h1kg",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "off"
            },
            {
                "id": "h6jm2s5l4bl",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": true,
        "state_type": "str",
        "x": 180,
        "y": 1540,
        "wires": [
            [
                "56dfba26.07b614",
                "eeb8b22f.4f942"
            ],
            [
                "33a9ae.2d6d7652",
                "48bb12b0.1900dc"
            ]
        ]
    },
    {
        "id": "49d47ae6.ee94b4",
        "type": "trigger-state",
        "z": "9143c7f2.16df18",
        "name": "Jeff not_home -> home (bluetooth)",
        "server": "8b52884a.b76658",
        "entityid": "input_boolean.jeff_occupancy",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "wg2s91i7aoc",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on"
            },
            {
                "id": "v6qek090ryb",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "off"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": true,
        "state_type": "str",
        "x": 180,
        "y": 1600,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "56dfba26.07b614",
        "type": "function",
        "z": "9143c7f2.16df18",
        "name": "Format iOS message",
        "func": "var title = \"Presence\"\nvar message = \"Jeff leaving (btle)\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n    }\n}\nreturn [ msg ];",
        "outputs": 1,
        "noerr": 0,
        "x": 580,
        "y": 2000,
        "wires": [
            []
        ]
    },
    {
        "id": "48bb12b0.1900dc",
        "type": "function",
        "z": "9143c7f2.16df18",
        "name": "Format iOS message",
        "func": "var title = \"Presence\"\nvar message = \"Jeff arriving (btle)\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n    }\n}\nreturn [ msg ];",
        "outputs": 1,
        "noerr": 0,
        "x": 580,
        "y": 2060,
        "wires": [
            []
        ]
    },
    {
        "id": "dd155455.bc9c28",
        "type": "trigger-state",
        "z": "af228686.65c8a8",
        "name": "not_home -> home",
        "server": "8b52884a.b76658",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityid": "sensor.anyone_home",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "home",
                "propertyValue": "new_state.state"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "not_home",
                "propertyValue": "old_state.state"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 110,
        "y": 160,
        "wires": [
            [
                "b98bed87.b9424"
            ],
            []
        ]
    },
    {
        "id": "213c8891.deb658",
        "type": "trigger-state",
        "z": "af228686.65c8a8",
        "name": "home -> not_home",
        "server": "8b52884a.b76658",
        "entityid": "sensor.anyone_home",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "m9qiqujd83",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "not_home"
            },
            {
                "id": "wl8tjeww34",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "home"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "str",
        "x": 110,
        "y": 240,
        "wires": [
            [
                "7dd47d21.519634"
            ],
            []
        ]
    },
    {
        "id": "34918ede.fb8b02",
        "type": "api-call-service",
        "z": "af228686.65c8a8",
        "name": "tree lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "",
        "entityId": "switch.outlet_a",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 980,
        "y": 1560,
        "wires": [
            []
        ]
    },
    {
        "id": "b5ce153f.7eca98",
        "type": "api-call-service",
        "z": "af228686.65c8a8",
        "name": "cabinet lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "",
        "entityId": "group.cabinet_lights",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 940,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "c3884fae.62ca4",
        "type": "function",
        "z": "af228686.65c8a8",
        "name": "turn_on",
        "func": "var service = \"turn_on\"\n\nmsg.payload = {\n    \"service\": service,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 540,
        "y": 160,
        "wires": [
            [
                "b5ce153f.7eca98",
                "700f243b.725e6c",
                "3af164aa.92a0ac",
                "78d24791.853db8"
            ]
        ]
    },
    {
        "id": "b98bed87.b9424",
        "type": "light-scheduler-filter",
        "z": "af228686.65c8a8",
        "settings": "f26da246.74a7f",
        "events": "[{\"start\":{\"dow\":1,\"mod\":900},\"end\":{\"dow\":2,\"mod\":0}},{\"start\":{\"dow\":2,\"mod\":900},\"end\":{\"dow\":3,\"mod\":0}},{\"start\":{\"dow\":3,\"mod\":900},\"end\":{\"dow\":4,\"mod\":0}},{\"start\":{\"dow\":4,\"mod\":900},\"end\":{\"dow\":5,\"mod\":0}},{\"start\":{\"dow\":5,\"mod\":900},\"end\":{\"dow\":6,\"mod\":0}},{\"start\":{\"dow\":6,\"mod\":900},\"end\":{\"dow\":0,\"mod\":0}},{\"start\":{\"dow\":0,\"mod\":900},\"end\":{\"dow\":1,\"mod\":0}}]",
        "name": "dark? (filter)",
        "onlyWhenDark": true,
        "scheduleRndMax": 0,
        "sunElevationThreshold": "10",
        "sunShowElevationInStatus": true,
        "x": 330,
        "y": 160,
        "wires": [
            [
                "c3884fae.62ca4"
            ],
            []
        ]
    },
    {
        "id": "4061f4ae.2bc80c",
        "type": "server-state-changed",
        "z": "af228686.65c8a8",
        "name": "garage door open?",
        "server": "8b52884a.b76658",
        "version": 1,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.garage_door",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 110,
        "y": 320,
        "wires": [
            [],
            [
                "21e174ab.aeac7c"
            ]
        ]
    },
    {
        "id": "296d6fd9.c260d",
        "type": "api-call-service",
        "z": "af228686.65c8a8",
        "name": "garage lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "",
        "entityId": "switch.garage",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 930,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "553dd4ac.2f6e4c",
        "type": "mqtt in",
        "z": "af228686.65c8a8",
        "name": "Jeff's Garage",
        "topic": "og-jeff/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 130,
        "y": 380,
        "wires": [
            [
                "827b5c98.ca3f8",
                "dd6fd7bd.097fb8"
            ]
        ]
    },
    {
        "id": "5cb60b49.9a87e4",
        "type": "mqtt in",
        "z": "af228686.65c8a8",
        "name": "Jen's Garage",
        "topic": "og-jen/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 130,
        "y": 440,
        "wires": [
            [
                "827b5c98.ca3f8",
                "dd6fd7bd.097fb8"
            ]
        ]
    },
    {
        "id": "4b2cdbdc.3114a4",
        "type": "rbe",
        "z": "b8b74cae.ffe4",
        "name": "state change",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 190,
        "y": 80,
        "wires": [
            [
                "99015cad.bf158"
            ]
        ]
    },
    {
        "id": "99015cad.bf158",
        "type": "switch",
        "z": "b8b74cae.ffe4",
        "name": "open?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OPEN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "827b5c98.ca3f8",
        "type": "subflow:b8b74cae.ffe4",
        "z": "af228686.65c8a8",
        "name": "open?",
        "env": [],
        "x": 310,
        "y": 380,
        "wires": [
            [
                "21e174ab.aeac7c",
                "7e3d7181.e5345",
                "3914a91f.c6db16"
            ]
        ]
    },
    {
        "id": "39ce4ca0.57f4a4",
        "type": "rbe",
        "z": "a9b8c57d.9659a8",
        "name": "state change",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 190,
        "y": 80,
        "wires": [
            [
                "d1347059.c62f3"
            ]
        ]
    },
    {
        "id": "d1347059.c62f3",
        "type": "switch",
        "z": "a9b8c57d.9659a8",
        "name": "closed?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "CLOSED",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 380,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "ff433106.9906a",
        "type": "subflow:b8b74cae.ffe4",
        "z": "9143c7f2.16df18",
        "name": "",
        "x": 590,
        "y": 460,
        "wires": [
            [
                "16f12e62.2031d2",
                "fe1f1f4a.3f5bc",
                "21e5467e.c04e6a",
                "e0d9002.3e0be"
            ]
        ]
    },
    {
        "id": "230d3ec9.e71a02",
        "type": "api-call-service",
        "z": "af228686.65c8a8",
        "name": "porch light",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "",
        "entityId": "switch.porch",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 930,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "aeb0b243.17cee",
        "type": "light-scheduler",
        "z": "af228686.65c8a8",
        "settings": "f26da246.74a7f",
        "events": "[{\"start\":{\"dow\":1,\"mod\":330},\"end\":{\"dow\":2,\"mod\":0}},{\"start\":{\"dow\":2,\"mod\":330},\"end\":{\"dow\":3,\"mod\":0}},{\"start\":{\"dow\":3,\"mod\":330},\"end\":{\"dow\":4,\"mod\":0}},{\"start\":{\"dow\":4,\"mod\":330},\"end\":{\"dow\":5,\"mod\":0}},{\"start\":{\"dow\":5,\"mod\":330},\"end\":{\"dow\":6,\"mod\":0}},{\"start\":{\"dow\":6,\"mod\":330},\"end\":{\"dow\":0,\"mod\":0}},{\"start\":{\"dow\":0,\"mod\":330},\"end\":{\"dow\":1,\"mod\":0}}]",
        "topic": "service",
        "name": "dark?",
        "onPayload": "turn_on",
        "onPayloadType": "str",
        "offPayload": "turn_off",
        "offPayloadType": "str",
        "onlyWhenDark": true,
        "scheduleRndMax": 0,
        "sunElevationThreshold": "10",
        "sunShowElevationInStatus": true,
        "outputfreq": "output.statechange",
        "x": 310,
        "y": 100,
        "wires": [
            [
                "710faff9.f3bb5"
            ]
        ]
    },
    {
        "id": "710faff9.f3bb5",
        "type": "function",
        "z": "af228686.65c8a8",
        "name": "format",
        "func": "var input = msg.payload\n\nmsg.payload = {\n    \"service\": input,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 530,
        "y": 100,
        "wires": [
            [
                "f6e6a362.ad7e6",
                "f5cb1a9d.0227e8"
            ]
        ]
    },
    {
        "id": "f6e6a362.ad7e6",
        "type": "api-current-state",
        "z": "af228686.65c8a8",
        "name": "home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": false,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 710,
        "y": 100,
        "wires": [
            [],
            [
                "b5ce153f.7eca98",
                "3af164aa.92a0ac",
                "78d24791.853db8"
            ]
        ]
    },
    {
        "id": "dd6a7e88.63808",
        "type": "inject",
        "z": "af228686.65c8a8",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "auto",
        "payloadType": "str",
        "x": 150,
        "y": 40,
        "wires": [
            [
                "53aba614.8eed08",
                "aeb0b243.17cee"
            ]
        ]
    },
    {
        "id": "39389ef1.9f2d62",
        "type": "function",
        "z": "af228686.65c8a8",
        "name": "format",
        "func": "var input = msg.payload\n\nmsg.payload = {\n    \"service\": input,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 530,
        "y": 40,
        "wires": [
            [
                "230d3ec9.e71a02"
            ]
        ]
    },
    {
        "id": "53aba614.8eed08",
        "type": "light-scheduler",
        "z": "af228686.65c8a8",
        "settings": "f26da246.74a7f",
        "events": "[{\"start\":{\"dow\":1,\"mod\":0},\"end\":{\"dow\":2,\"mod\":0}},{\"start\":{\"dow\":2,\"mod\":0},\"end\":{\"dow\":3,\"mod\":0}},{\"start\":{\"dow\":3,\"mod\":0},\"end\":{\"dow\":4,\"mod\":0}},{\"start\":{\"dow\":4,\"mod\":0},\"end\":{\"dow\":5,\"mod\":0}},{\"start\":{\"dow\":5,\"mod\":0},\"end\":{\"dow\":6,\"mod\":0}},{\"start\":{\"dow\":6,\"mod\":0},\"end\":{\"dow\":0,\"mod\":0}},{\"start\":{\"dow\":0,\"mod\":0},\"end\":{\"dow\":1,\"mod\":0}}]",
        "topic": "",
        "name": "dark? (full)",
        "onPayload": "turn_on",
        "onPayloadType": "str",
        "offPayload": "turn_off",
        "offPayloadType": "str",
        "onlyWhenDark": true,
        "scheduleRndMax": 0,
        "sunElevationThreshold": 6,
        "sunShowElevationInStatus": true,
        "outputfreq": "output.statechange.startup",
        "x": 330,
        "y": 40,
        "wires": [
            [
                "39389ef1.9f2d62"
            ]
        ]
    },
    {
        "id": "f88022fd.64e12",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Jeff's Garage",
        "topic": "og-jeff/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 150,
        "y": 2760,
        "wires": [
            [
                "fb7d9351.24da4"
            ]
        ]
    },
    {
        "id": "83585c2a.920ea",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Jen'sGarage",
        "topic": "og-jen/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 150,
        "y": 2820,
        "wires": [
            [
                "fb7d9351.24da4"
            ]
        ]
    },
    {
        "id": "d0b5cd57.0a66c",
        "type": "debug",
        "z": "2fad043e.317c8c",
        "name": "",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "false",
        "x": 650,
        "y": 2940,
        "wires": []
    },
    {
        "id": "fb7d9351.24da4",
        "type": "rbe",
        "z": "2fad043e.317c8c",
        "name": "state change",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 430,
        "y": 2800,
        "wires": [
            [
                "d0b5cd57.0a66c",
                "2171306f.378c8",
                "9e16928a.6d685"
            ]
        ]
    },
    {
        "id": "815f6b55.ace1a8",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Jen's Garage Notify",
        "topic": "og-jen/OUT/NOTIFY",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 170,
        "y": 2940,
        "wires": [
            [
                "411f2e77.3ab75",
                "2b0acfd7.6acab"
            ]
        ]
    },
    {
        "id": "411f2e77.3ab75",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "closed?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "og-jen just CLOSED!",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 420,
        "y": 2940,
        "wires": [
            [
                "d0b5cd57.0a66c"
            ]
        ]
    },
    {
        "id": "2b0acfd7.6acab",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "opened?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "og-jen just OPENED!",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 420,
        "y": 3000,
        "wires": [
            [
                "d0b5cd57.0a66c"
            ]
        ]
    },
    {
        "id": "1ca924ee.5d376b",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Jeff's Garage Notify",
        "topic": "og-jeff/OUT/NOTIFY",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 170,
        "y": 3060,
        "wires": [
            [
                "ec3f35b7.4d4b78",
                "fa627015.edd"
            ]
        ]
    },
    {
        "id": "ec3f35b7.4d4b78",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "closed?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "og-jeff just CLOSED!",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 420,
        "y": 3060,
        "wires": [
            [
                "d0b5cd57.0a66c"
            ]
        ]
    },
    {
        "id": "fa627015.edd",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "opened?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "og-jeff just OPENED!",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 420,
        "y": 3120,
        "wires": [
            [
                "d0b5cd57.0a66c"
            ]
        ]
    },
    {
        "id": "2171306f.378c8",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "closed?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "CLOSED",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 640,
        "y": 2800,
        "wires": [
            []
        ]
    },
    {
        "id": "9e16928a.6d685",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "open?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OPEN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 630,
        "y": 2860,
        "wires": [
            []
        ]
    },
    {
        "id": "8af4ba1c.44a458",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Triggerred iOS msg (critical)",
        "func": "var action = msg.payload\n\nvar category = \"alarm\"\nvar title = \"🚨 ALARM TRIGGERED! 🚨\"\nvar message = \"THE ALARM HAS TRIGGERED! OMG WTFBBQ!!!!111 🔥 \\n\" + action\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category,\n                sound: {\n                  name: \"ct-error.caf\",\n                  critical: 1,\n                  volume: 1.0\n                }\n            }\n        }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 980,
        "y": 1000,
        "wires": [
            [
                "aeafe637.1aeaf8",
                "f27a9952.dc7b18"
            ]
        ]
    },
    {
        "id": "ce9c084e.62c018",
        "type": "api-call-service",
        "z": "2fad043e.317c8c",
        "name": "tree turn off",
        "server": "8b52884a.b76658",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{\"entity_id\":\"switch.portable_outlet_a_switch\"}",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "x": 350,
        "y": 3240,
        "wires": [
            []
        ]
    },
    {
        "id": "fb0462de.ad838",
        "type": "api-call-service",
        "z": "2fad043e.317c8c",
        "name": "cabinet lights turn off",
        "server": "8b52884a.b76658",
        "service_domain": "switch",
        "service": "turn_off",
        "data": "{\"entity_id\":\"switch.portable_outlet_b_switch\"}",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "x": 380,
        "y": 3300,
        "wires": [
            []
        ]
    },
    {
        "id": "97200945.d9d238",
        "type": "light-scheduler-filter",
        "z": "2fad043e.317c8c",
        "settings": "f26da246.74a7f",
        "events": "[{\"start\":{\"dow\":1,\"mod\":0},\"end\":{\"dow\":2,\"mod\":0}},{\"start\":{\"dow\":2,\"mod\":0},\"end\":{\"dow\":3,\"mod\":0}},{\"start\":{\"dow\":3,\"mod\":0},\"end\":{\"dow\":4,\"mod\":0}},{\"start\":{\"dow\":4,\"mod\":0},\"end\":{\"dow\":5,\"mod\":0}},{\"start\":{\"dow\":5,\"mod\":0},\"end\":{\"dow\":6,\"mod\":0}},{\"start\":{\"dow\":6,\"mod\":0},\"end\":{\"dow\":0,\"mod\":0}},{\"start\":{\"dow\":0,\"mod\":0},\"end\":{\"dow\":1,\"mod\":0}}]",
        "name": "dark? (full filter)",
        "onlyWhenDark": true,
        "scheduleRndMax": 0,
        "sunElevationThreshold": 6,
        "sunShowElevationInStatus": true,
        "x": 160,
        "y": 3240,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "c00a4d58.9c179",
        "type": "light-scheduler",
        "z": "2fad043e.317c8c",
        "settings": "f26da246.74a7f",
        "events": "[{\"start\":{\"dow\":1,\"mod\":0},\"end\":{\"dow\":2,\"mod\":0}},{\"start\":{\"dow\":2,\"mod\":0},\"end\":{\"dow\":3,\"mod\":0}},{\"start\":{\"dow\":3,\"mod\":0},\"end\":{\"dow\":4,\"mod\":0}},{\"start\":{\"dow\":4,\"mod\":0},\"end\":{\"dow\":5,\"mod\":0}},{\"start\":{\"dow\":5,\"mod\":0},\"end\":{\"dow\":6,\"mod\":0}},{\"start\":{\"dow\":6,\"mod\":0},\"end\":{\"dow\":0,\"mod\":0}},{\"start\":{\"dow\":0,\"mod\":0},\"end\":{\"dow\":1,\"mod\":0}}]",
        "topic": "",
        "name": "dark? (full)",
        "onPayload": "turn_on",
        "onPayloadType": "str",
        "offPayload": "turn_off",
        "offPayloadType": "str",
        "onlyWhenDark": true,
        "scheduleRndMax": 0,
        "sunElevationThreshold": 6,
        "sunShowElevationInStatus": true,
        "outputfreq": "output.statechange",
        "x": 150,
        "y": 3300,
        "wires": [
            []
        ]
    },
    {
        "id": "ca1db6d.dab8448",
        "type": "api-current-state",
        "z": "b38cb3c4.c4815",
        "name": "jen's garage door closed?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "open",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "cover.jen_garage_door",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 510,
        "y": 60,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "8ec79c77.29d63",
        "type": "api-current-state",
        "z": "b38cb3c4.c4815",
        "name": "jeff's darage door closed?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "open",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "cover.jeff_garage_door",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 230,
        "y": 60,
        "wires": [
            [],
            [
                "ca1db6d.dab8448"
            ]
        ]
    },
    {
        "id": "bf15d046.2721b",
        "type": "function",
        "z": "9143c7f2.16df18",
        "name": "Format iOS message",
        "func": "var title = \"TEST\"\nvar distance = msg.payload\nvar message = \"Tesla away: \" + distance + \"m\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title\n    }\n}\nreturn [ msg ];",
        "outputs": 1,
        "noerr": 0,
        "x": 580,
        "y": 2120,
        "wires": [
            []
        ]
    },
    {
        "id": "13eee5ac.a4e0da",
        "type": "function",
        "z": "9143c7f2.16df18",
        "name": "Format iOS message",
        "func": "var title = \"TEST\"\nvar distance = msg.payload\nvar message = \"Tesla home: \" + distance + \"m\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title\n    }\n}\nreturn [ msg ];",
        "outputs": 1,
        "noerr": 0,
        "x": 580,
        "y": 2180,
        "wires": [
            []
        ]
    },
    {
        "id": "2aa1ad70.1c7ba2",
        "type": "trigger-state",
        "z": "9143c7f2.16df18",
        "name": "tesla away (>50m)",
        "server": "8b52884a.b76658",
        "entityid": "proximity.home_tesla",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "vuzmqkcrm4",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": ">",
                "comparatorValueDatatype": "num",
                "comparatorValue": "50"
            },
            {
                "id": "vgcke8epixl",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "<=",
                "comparatorValueDatatype": "num",
                "comparatorValue": "50"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "num",
        "x": 230,
        "y": 2120,
        "wires": [
            [
                "bf15d046.2721b"
            ],
            []
        ]
    },
    {
        "id": "eccb0c5a.1069a",
        "type": "trigger-state",
        "z": "9143c7f2.16df18",
        "name": "tesla home (<=50m)",
        "server": "8b52884a.b76658",
        "entityid": "proximity.home_tesla",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "hot737wuyh",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "<=",
                "comparatorValueDatatype": "num",
                "comparatorValue": "50"
            },
            {
                "id": "vkzkvdll7l",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": ">",
                "comparatorValueDatatype": "num",
                "comparatorValue": "50"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "num",
        "x": 220,
        "y": 2180,
        "wires": [
            [
                "13eee5ac.a4e0da"
            ],
            []
        ]
    },
    {
        "id": "1a21a398.7d454c",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "Jeff's garage open?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "Open",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "sensor.garage_status",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 560,
        "y": 1280,
        "wires": [
            [],
            [
                "92e131b8.3d212",
                "b8369518.acafc8"
            ]
        ]
    },
    {
        "id": "92e131b8.3d212",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Format iOS message",
        "func": "var title = \"AUTO GARAGE\"\nvar message = \"Closing Garage Door!\"\nvar category = \"garage\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category\n            }\n        }\n    }\n}\nreturn [ msg ];",
        "outputs": 1,
        "noerr": 0,
        "x": 1060,
        "y": 1220,
        "wires": [
            []
        ]
    },
    {
        "id": "dae80ca4.7cdc9",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "Jeff's car missing?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "Yes",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "sensor.garage_car_present",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 810,
        "y": 1340,
        "wires": [
            [],
            [
                "5d0e574c.e38908",
                "2f1a9a65.55d4a6"
            ]
        ]
    },
    {
        "id": "21c66dc2.f76db2",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "Jeff's garage closed?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "Closed",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "sensor.garage_status",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 560,
        "y": 1340,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "5d0e574c.e38908",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Format iOS message",
        "func": "var title = \"AUTO GARAGE\"\nvar message = \"Opening Garage Door!\"\nvar category = \"garage_open\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category\n            }\n        }\n    }\n}\nreturn [ msg ];",
        "outputs": 1,
        "noerr": 0,
        "x": 1060,
        "y": 1400,
        "wires": [
            []
        ]
    },
    {
        "id": "3310dcd2.e1fbe4",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "input_boolean.auto_garage_doors",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 350,
        "y": 1280,
        "wires": [
            [],
            [
                "1a21a398.7d454c"
            ]
        ]
    },
    {
        "id": "b8369518.acafc8",
        "type": "api-call-service",
        "z": "75b62c93.dd5d84",
        "name": "close jeff's garage door",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "cover",
        "service": "close_cover",
        "entityId": "cover.jeff_garage_door",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1070,
        "y": 1280,
        "wires": [
            []
        ]
    },
    {
        "id": "a56e765c.eb85d8",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "input_boolean.auto_garage_doors",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 350,
        "y": 1340,
        "wires": [
            [],
            [
                "21c66dc2.f76db2",
                "31fd2e46.0f9882"
            ]
        ]
    },
    {
        "id": "2f1a9a65.55d4a6",
        "type": "api-call-service",
        "z": "75b62c93.dd5d84",
        "name": "open jeff's garage door",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "cover",
        "service": "open_cover",
        "entityId": "cover.jeff_garage_door",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1070,
        "y": 1340,
        "wires": [
            []
        ]
    },
    {
        "id": "fe687cbb.d4f38",
        "type": "subflow:b8b74cae.ffe4",
        "z": "75b62c93.dd5d84",
        "name": "",
        "env": [],
        "x": 350,
        "y": 820,
        "wires": [
            [
                "65fb8035.02a31",
                "d478b33.601d25",
                "60724780.ab97c8"
            ]
        ]
    },
    {
        "id": "7b9c3894.6a8248",
        "type": "subflow:a9b8c57d.9659a8",
        "z": "75b62c93.dd5d84",
        "name": "",
        "x": 360,
        "y": 880,
        "wires": [
            [
                "449a1640.2c5008"
            ]
        ]
    },
    {
        "id": "d994bebd.cacc4",
        "type": "subflow:b8b74cae.ffe4",
        "z": "75b62c93.dd5d84",
        "name": "",
        "env": [],
        "x": 350,
        "y": 1060,
        "wires": [
            [
                "c31af48.35a2a08"
            ]
        ]
    },
    {
        "id": "1f4e8e01.7ed502",
        "type": "subflow:a9b8c57d.9659a8",
        "z": "75b62c93.dd5d84",
        "name": "",
        "x": 360,
        "y": 1120,
        "wires": [
            [
                "d047908d.ea259"
            ]
        ]
    },
    {
        "id": "c2c4850a.87e998",
        "type": "rbe",
        "z": "2fad043e.317c8c",
        "name": "state change",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 870,
        "y": 2860,
        "wires": [
            [
                "2700562e.76787a",
                "57973365.4f8e1c"
            ]
        ]
    },
    {
        "id": "2700562e.76787a",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "open?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OPEN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1030,
        "y": 2860,
        "wires": [
            []
        ]
    },
    {
        "id": "57973365.4f8e1c",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "closed?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "CLOSED",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 1040,
        "y": 2820,
        "wires": [
            []
        ]
    },
    {
        "id": "21e174ab.aeac7c",
        "type": "trigger",
        "z": "af228686.65c8a8",
        "name": "",
        "op1": "{\"service\":\"turn_on\"}",
        "op2": "{\"service\":\"turn_off\"}",
        "op1type": "json",
        "op2type": "json",
        "duration": "15",
        "extend": true,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "outputs": 1,
        "x": 550,
        "y": 320,
        "wires": [
            [
                "296d6fd9.c260d"
            ]
        ]
    },
    {
        "id": "6ecd277e.20aad8",
        "type": "mqtt out",
        "z": "af228686.65c8a8",
        "name": "set garage LED",
        "topic": "homeassistant/sunroom/garage/112/1/8/set",
        "qos": "",
        "retain": "",
        "broker": "649859a4.a17818",
        "x": 940,
        "y": 380,
        "wires": []
    },
    {
        "id": "d041b16d.ff12d",
        "type": "mqtt out",
        "z": "af228686.65c8a8",
        "name": "set porch LED",
        "topic": "homeassistant/porch/porch/112/1/8/set",
        "qos": "",
        "retain": "",
        "broker": "649859a4.a17818",
        "x": 940,
        "y": 440,
        "wires": []
    },
    {
        "id": "7e3d7181.e5345",
        "type": "function",
        "z": "af228686.65c8a8",
        "name": "pulsing yellow",
        "func": "msg.payload = \"83823149\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 560,
        "y": 400,
        "wires": [
            [
                "6ecd277e.20aad8",
                "d041b16d.ff12d"
            ]
        ]
    },
    {
        "id": "e5f64887.97ccc8",
        "type": "function",
        "z": "af228686.65c8a8",
        "name": "reset LED",
        "func": "msg.payload = \"0\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 540,
        "y": 520,
        "wires": [
            [
                "6ecd277e.20aad8",
                "d041b16d.ff12d"
            ]
        ]
    },
    {
        "id": "dd6fd7bd.097fb8",
        "type": "subflow:a9b8c57d.9659a8",
        "z": "af228686.65c8a8",
        "name": "",
        "x": 320,
        "y": 440,
        "wires": [
            [
                "e5f64887.97ccc8",
                "69f58306.46521c",
                "9e6b17c0.eca808"
            ]
        ]
    },
    {
        "id": "2a977759.39a808",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "turn_on",
        "func": "var service = \"turn_on\"\n\nmsg.payload = {\n    \"service\": service,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 380,
        "y": 3480,
        "wires": [
            []
        ]
    },
    {
        "id": "cdd01fa1.ea136",
        "type": "delay",
        "z": "2fad043e.317c8c",
        "name": "",
        "pauseType": "delay",
        "timeout": "1",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "x": 320,
        "y": 3520,
        "wires": [
            [
                "8df4ecd5.d9fa8"
            ]
        ]
    },
    {
        "id": "8df4ecd5.d9fa8",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "turn_off",
        "func": "var service = \"turn_off\"\n\nmsg.payload = {\n    \"service\": service,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 540,
        "y": 3520,
        "wires": [
            []
        ]
    },
    {
        "id": "a95719d3.3e3e08",
        "type": "light-scheduler-filter",
        "z": "2fad043e.317c8c",
        "settings": "f26da246.74a7f",
        "events": "[{\"start\":{\"dow\":1,\"mod\":0},\"end\":{\"dow\":2,\"mod\":0}},{\"start\":{\"dow\":2,\"mod\":0},\"end\":{\"dow\":3,\"mod\":0}},{\"start\":{\"dow\":3,\"mod\":0},\"end\":{\"dow\":4,\"mod\":0}},{\"start\":{\"dow\":4,\"mod\":0},\"end\":{\"dow\":5,\"mod\":0}},{\"start\":{\"dow\":5,\"mod\":0},\"end\":{\"dow\":6,\"mod\":0}},{\"start\":{\"dow\":6,\"mod\":0},\"end\":{\"dow\":0,\"mod\":0}},{\"start\":{\"dow\":0,\"mod\":0},\"end\":{\"dow\":1,\"mod\":0}}]",
        "name": "dark outside?",
        "onlyWhenDark": true,
        "scheduleRndMax": 0,
        "sunElevationThreshold": "10",
        "sunShowElevationInStatus": true,
        "x": 180,
        "y": 3420,
        "wires": [
            [],
            [
                "16e9a665.7d988a"
            ]
        ]
    },
    {
        "id": "16e9a665.7d988a",
        "type": "subflow:b38cb3c4.c4815",
        "z": "2fad043e.317c8c",
        "name": "",
        "env": [],
        "x": 420,
        "y": 3420,
        "wires": [
            []
        ]
    },
    {
        "id": "bf4ac402.28fe08",
        "type": "change",
        "z": "2fad043e.317c8c",
        "name": "reset timer",
        "rules": [
            {
                "t": "set",
                "p": "reset",
                "pt": "msg",
                "to": "1",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 130,
        "y": 3520,
        "wires": [
            [
                "cdd01fa1.ea136"
            ]
        ]
    },
    {
        "id": "4bc4ffe.2810b",
        "type": "server-state-changed",
        "z": "af228686.65c8a8",
        "name": "basement water",
        "server": "8b52884a.b76658",
        "version": 1,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.basement_water_sensor_a_water_alarm",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 120,
        "y": 780,
        "wires": [
            [],
            [
                "a779d8f0.785008",
                "e1af3f7c.67365"
            ]
        ]
    },
    {
        "id": "5f651bbf.ae9fd4",
        "type": "api-call-service",
        "z": "af228686.65c8a8",
        "name": "Notify Slack",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "notify",
        "service": "slack",
        "entityId": "",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 930,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "9d2ce8a1.185f48",
        "type": "api-call-service",
        "z": "af228686.65c8a8",
        "name": "notify jeff iOS",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "notify",
        "service": "mobile_app_jeffs_xs",
        "entityId": "",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 930,
        "y": 760,
        "wires": [
            []
        ]
    },
    {
        "id": "f16fcc66.5b4d2",
        "type": "api-call-service",
        "z": "af228686.65c8a8",
        "name": "notify jen iOS",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "notify",
        "service": "mobile_app_jennifers_xs_max",
        "entityId": "",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 930,
        "y": 820,
        "wires": [
            []
        ]
    },
    {
        "id": "e1af3f7c.67365",
        "type": "function",
        "z": "af228686.65c8a8",
        "name": "water sensor slack msg",
        "func": "var message = \"@channel 💦 WATER DETECTED IN THE BASEMENT! 💦\"\n\n\nmsg.payload = {\n    \"data\": {\n        message,\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 410,
        "y": 840,
        "wires": [
            [
                "c01d0666.9cba28"
            ]
        ]
    },
    {
        "id": "a779d8f0.785008",
        "type": "function",
        "z": "af228686.65c8a8",
        "name": "water sensor iOS msg",
        "func": "var title = \"💦 WATER DETECTED! 💦\"\nvar message = \"Water detected in the basement! 🌊\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                sound: {\n                  name: \"US-EN-Morgan-Freeman-Water-Detected-In-Basement.wav\",\n                  critical: 1,\n                  volume: 1.0\n                }\n            }\n        }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 400,
        "y": 780,
        "wires": [
            [
                "30867e7d.819d12"
            ]
        ]
    },
    {
        "id": "30867e7d.819d12",
        "type": "delay",
        "z": "af228686.65c8a8",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 740,
        "y": 780,
        "wires": [
            [
                "9d2ce8a1.185f48",
                "f16fcc66.5b4d2"
            ]
        ]
    },
    {
        "id": "c01d0666.9cba28",
        "type": "delay",
        "z": "af228686.65c8a8",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 740,
        "y": 840,
        "wires": [
            [
                "5f651bbf.ae9fd4"
            ]
        ]
    },
    {
        "id": "834f3964.92aed8",
        "type": "trigger-state",
        "z": "75b62c93.dd5d84",
        "name": "tesla away (>50m)",
        "server": "8b52884a.b76658",
        "entityid": "proximity.home_tesla",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "vuzmqkcrm4",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": ">",
                "comparatorValueDatatype": "num",
                "comparatorValue": "50"
            },
            {
                "id": "vgcke8epixl",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "<=",
                "comparatorValueDatatype": "num",
                "comparatorValue": "50"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "num",
        "x": 130,
        "y": 1280,
        "wires": [
            [
                "3310dcd2.e1fbe4"
            ],
            []
        ]
    },
    {
        "id": "32d7f.835aa2818",
        "type": "trigger-state",
        "z": "75b62c93.dd5d84",
        "name": "tesla home (<=75m)",
        "server": "8b52884a.b76658",
        "entityid": "proximity.home_tesla",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "gwjmcau7nhf",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "<=",
                "comparatorValueDatatype": "num",
                "comparatorValue": "75"
            },
            {
                "id": "tlyhwoxxc7l",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": ">",
                "comparatorValueDatatype": "num",
                "comparatorValue": "75"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "num",
        "x": 120,
        "y": 1340,
        "wires": [
            [
                "a56e765c.eb85d8"
            ],
            []
        ]
    },
    {
        "id": "ed27ad8.ce2aa5",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "Tesla home -> not_home",
        "server": "8b52884a.b76658",
        "entityid": "device_tracker.tesla_location",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "z1zzizr1n1",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "home"
            },
            {
                "id": "geusjwd530t",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "not_home"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": true,
        "state_type": "str",
        "x": 190,
        "y": 3620,
        "wires": [
            [
                "572353b7.8f887c"
            ],
            []
        ]
    },
    {
        "id": "82823a86.c6f288",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "Tesla not_home -> home",
        "server": "8b52884a.b76658",
        "entityid": "device_tracker.tesla_location",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "n2mfbe9vw6a",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "home"
            },
            {
                "id": "s04vxlpox79",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "not_home"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": true,
        "state_type": "str",
        "x": 190,
        "y": 3680,
        "wires": [
            [
                "6da47b70.9d4c84"
            ],
            []
        ]
    },
    {
        "id": "572353b7.8f887c",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "Format iOS message",
        "func": "var title = \"TEST\"\nvar message = \"Tesla away\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title\n    }\n}\nreturn [ msg ];",
        "outputs": 1,
        "noerr": 0,
        "x": 560,
        "y": 3620,
        "wires": [
            []
        ]
    },
    {
        "id": "6da47b70.9d4c84",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "Format iOS message",
        "func": "var title = \"TEST\"\nvar message = \"Tesla home\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title\n    }\n}\nreturn [ msg ];",
        "outputs": 1,
        "noerr": 0,
        "x": 560,
        "y": 3680,
        "wires": [
            []
        ]
    },
    {
        "id": "81ff9ee2.9151c",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "Jeff home -> not_home (phone)",
        "server": "8b52884a.b76658",
        "entityid": "device_tracker.jeffs_xs_2",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "z1zzizr1n1",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "home"
            },
            {
                "id": "geusjwd530t",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "not_home"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": true,
        "state_type": "str",
        "x": 190,
        "y": 3880,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "d877b319.9cc6e",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "Jeff not_home -> home (phone)",
        "server": "8b52884a.b76658",
        "entityid": "device_tracker.jeffs_xs_2",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "n2mfbe9vw6a",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "home"
            },
            {
                "id": "s04vxlpox79",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "not_home"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": true,
        "state_type": "str",
        "x": 190,
        "y": 3940,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "3d1602c9.fef17e",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "tesla away (>100m)",
        "server": "8b52884a.b76658",
        "entityid": "proximity.home_tesla",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "l1r7qlkeld9",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": ">",
                "comparatorValueDatatype": "num",
                "comparatorValue": "100"
            },
            {
                "id": "rjmexlis3q",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": "<=",
                "comparatorValueDatatype": "num",
                "comparatorValue": "100"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "num",
        "x": 150,
        "y": 3760,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "c77e8444.770fc8",
        "type": "trigger-state",
        "z": "2fad043e.317c8c",
        "name": "tesla home (<=100m)",
        "server": "8b52884a.b76658",
        "entityid": "proximity.home_tesla",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "id": "b0cz35wk8in",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "propertyValue": "new_state.state",
                "comparatorType": "<=",
                "comparatorValueDatatype": "num",
                "comparatorValue": "100"
            },
            {
                "id": "netyei4972o",
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "propertyValue": "old_state.state",
                "comparatorType": ">",
                "comparatorValueDatatype": "num",
                "comparatorValue": "100"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": false,
        "state_type": "num",
        "x": 160,
        "y": 3820,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "1e6b2a9d.463715",
        "type": "mqtt out",
        "z": "75b62c93.dd5d84",
        "name": "set garage LED",
        "topic": "homeassistant/sunroom/garage/112/1/8/set",
        "qos": "",
        "retain": "",
        "broker": "649859a4.a17818",
        "x": 1440,
        "y": 660,
        "wires": []
    },
    {
        "id": "3f7f862b.8c5a7a",
        "type": "mqtt out",
        "z": "75b62c93.dd5d84",
        "name": "set porch LED",
        "topic": "homeassistant/porch/porch/112/1/8/set",
        "qos": "",
        "retain": "",
        "broker": "649859a4.a17818",
        "x": 1440,
        "y": 720,
        "wires": []
    },
    {
        "id": "2e6a3c1f.ce9614",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "flashing red LED",
        "func": "msg.payload = \"50268673\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1040,
        "y": 640,
        "wires": [
            [
                "1e6b2a9d.463715",
                "3f7f862b.8c5a7a"
            ]
        ]
    },
    {
        "id": "18705175.cf6bff",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "open > 30 mins?",
        "func": "var epochMS = new Date().getTime();\nvar minsToCheck = 30;\nvar minutesInMS = 60000;\nvar initTimeMS = global.get('cover.jen_garage_door_mqtt.initTimeMS') || epochMS;\nvar duration = epochMS - initTimeMS\nglobal.set('cover.jen_garage_door_mqtt.durationTimeMS',duration);\n\nif ((duration) >= (minutesInMS*minsToCheck)) {\n  return [ msg ];\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 690,
        "y": 620,
        "wires": [
            [
                "2e6a3c1f.ce9614",
                "1dfe2789.5fa7c8",
                "79809bca.5bba24"
            ]
        ]
    },
    {
        "id": "debdf7a8.eab358",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "open > 30 mins?",
        "func": "var epochMS = new Date().getTime();\nvar minsToCheck = 30;\nvar minutesInMS = 60000;\nvar initTimeMS = global.get('cover.jeff_garage_door_mqtt.initTimeMS') || epochMS;\nvar duration = epochMS - initTimeMS\nglobal.set('cover.jeff_garage_door_mqtt.durationTimeMS',duration);\n\nif ((duration) >= (minutesInMS*minsToCheck)) {\n  return [ msg ];\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 690,
        "y": 680,
        "wires": [
            [
                "2e6a3c1f.ce9614",
                "1dfe2789.5fa7c8",
                "79809bca.5bba24"
            ]
        ]
    },
    {
        "id": "94aecea5.31678",
        "type": "switch",
        "z": "75b62c93.dd5d84",
        "name": "open?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OPEN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 290,
        "y": 620,
        "wires": [
            [
                "18705175.cf6bff"
            ]
        ]
    },
    {
        "id": "66a33e59.f9a1b",
        "type": "switch",
        "z": "75b62c93.dd5d84",
        "name": "open?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OPEN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 290,
        "y": 680,
        "wires": [
            [
                "debdf7a8.eab358"
            ]
        ]
    },
    {
        "id": "9d4f1c41.654ec",
        "type": "mqtt in",
        "z": "75b62c93.dd5d84",
        "name": "Jeff's Garage",
        "topic": "og-jeff/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 90,
        "y": 680,
        "wires": [
            [
                "66a33e59.f9a1b"
            ]
        ]
    },
    {
        "id": "b5e3c706.1682d8",
        "type": "mqtt in",
        "z": "75b62c93.dd5d84",
        "name": "Jen'sGarage",
        "topic": "og-jen/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 90,
        "y": 620,
        "wires": [
            [
                "94aecea5.31678"
            ]
        ]
    },
    {
        "id": "ef43dbae.116a58",
        "type": "api-call-service",
        "z": "af228686.65c8a8",
        "name": "deck lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "",
        "entityId": "switch.outlet_a",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1090,
        "y": 940,
        "wires": [
            []
        ]
    },
    {
        "id": "5574530a.93fa3c",
        "type": "server-state-changed",
        "z": "af228686.65c8a8",
        "name": "sump pump water",
        "server": "8b52884a.b76658",
        "version": 1,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.sump_pump_water_sensor_b_water_alarm",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 110,
        "y": 840,
        "wires": [
            [],
            [
                "e1af3f7c.67365",
                "a779d8f0.785008"
            ]
        ]
    },
    {
        "id": "4fdbeade.1c57a4",
        "type": "server-state-changed",
        "z": "af228686.65c8a8",
        "name": "sliding door open?",
        "server": "8b52884a.b76658",
        "version": "1",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.sliding_door",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 110,
        "y": 940,
        "wires": [
            [],
            [
                "6136719f.1718d",
                "444fce21.363b4"
            ]
        ]
    },
    {
        "id": "bac65d72.83ad3",
        "type": "trigger",
        "z": "af228686.65c8a8",
        "name": "",
        "op1": "{\"service\":\"turn_on\"}",
        "op2": "{\"service\":\"turn_off\"}",
        "op1type": "json",
        "op2type": "json",
        "duration": "15",
        "extend": true,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "outputs": 1,
        "x": 730,
        "y": 940,
        "wires": [
            [
                "ef43dbae.116a58"
            ]
        ]
    },
    {
        "id": "6136719f.1718d",
        "type": "light-scheduler-filter",
        "z": "af228686.65c8a8",
        "settings": "f26da246.74a7f",
        "events": "[{\"start\":{\"dow\":1,\"mod\":300},\"end\":{\"dow\":1,\"mod\":660}},{\"start\":{\"dow\":2,\"mod\":300},\"end\":{\"dow\":2,\"mod\":660}},{\"start\":{\"dow\":3,\"mod\":300},\"end\":{\"dow\":3,\"mod\":660}},{\"start\":{\"dow\":4,\"mod\":300},\"end\":{\"dow\":4,\"mod\":660}},{\"start\":{\"dow\":5,\"mod\":300},\"end\":{\"dow\":5,\"mod\":660}},{\"start\":{\"dow\":6,\"mod\":300},\"end\":{\"dow\":6,\"mod\":660}},{\"start\":{\"dow\":0,\"mod\":300},\"end\":{\"dow\":0,\"mod\":660}}]",
        "name": "morning filter",
        "onlyWhenDark": true,
        "scheduleRndMax": 0,
        "sunElevationThreshold": "6",
        "sunShowElevationInStatus": true,
        "x": 330,
        "y": 940,
        "wires": [
            [
                "e73e7ead.f56eb"
            ],
            []
        ]
    },
    {
        "id": "e73e7ead.f56eb",
        "type": "function",
        "z": "af228686.65c8a8",
        "name": "turn_on",
        "func": "var service = \"turn_on\"\n\nmsg.payload = {\n    \"service\": service,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 560,
        "y": 940,
        "wires": [
            [
                "bac65d72.83ad3"
            ]
        ]
    },
    {
        "id": "519672b2.9eeb1c",
        "type": "delay",
        "z": "75b62c93.dd5d84",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "5",
        "rateUnits": "minute",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 1040,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "f331051d.e5b5d8",
        "type": "api-call-service",
        "z": "75b62c93.dd5d84",
        "name": "wake teslamate",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "script",
        "service": "turn_on",
        "entityId": "script.wake_teslamate",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1440,
        "y": 880,
        "wires": [
            []
        ]
    },
    {
        "id": "d478b33.601d25",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 770,
        "y": 760,
        "wires": [
            [],
            [
                "519672b2.9eeb1c"
            ]
        ]
    },
    {
        "id": "c4f6121f.5050a",
        "type": "trigger",
        "z": "af228686.65c8a8",
        "name": "",
        "op1": "{\"service\":\"turn_on\"}",
        "op2": "{\"service\":\"turn_off\"}",
        "op1type": "json",
        "op2type": "json",
        "duration": "60",
        "extend": true,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 890,
        "y": 1000,
        "wires": [
            [
                "ef43dbae.116a58"
            ]
        ]
    },
    {
        "id": "444fce21.363b4",
        "type": "light-scheduler-filter",
        "z": "af228686.65c8a8",
        "settings": "f26da246.74a7f",
        "events": "[{\"start\":{\"dow\":1,\"mod\":1020},\"end\":{\"dow\":2,\"mod\":0}},{\"start\":{\"dow\":2,\"mod\":1020},\"end\":{\"dow\":3,\"mod\":0}},{\"start\":{\"dow\":3,\"mod\":1020},\"end\":{\"dow\":4,\"mod\":0}},{\"start\":{\"dow\":4,\"mod\":1020},\"end\":{\"dow\":5,\"mod\":0}},{\"start\":{\"dow\":5,\"mod\":1020},\"end\":{\"dow\":6,\"mod\":0}},{\"start\":{\"dow\":6,\"mod\":1020},\"end\":{\"dow\":0,\"mod\":0}},{\"start\":{\"dow\":0,\"mod\":1020},\"end\":{\"dow\":1,\"mod\":0}}]",
        "name": "evening filter",
        "onlyWhenDark": true,
        "scheduleRndMax": 0,
        "sunElevationThreshold": "6",
        "sunShowElevationInStatus": true,
        "x": 330,
        "y": 1020,
        "wires": [
            [
                "10780376.abbc6d"
            ],
            []
        ]
    },
    {
        "id": "66a85fcc.bcdf1",
        "type": "function",
        "z": "af228686.65c8a8",
        "name": "turn_on",
        "func": "var service = \"turn_on\"\n\nmsg.payload = {\n    \"service\": service,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 720,
        "y": 1000,
        "wires": [
            [
                "c4f6121f.5050a"
            ]
        ]
    },
    {
        "id": "10780376.abbc6d",
        "type": "weekday",
        "z": "af228686.65c8a8",
        "name": "'weekend'?",
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": false,
        "sat": false,
        "x": 550,
        "y": 1020,
        "wires": [
            [
                "66a85fcc.bcdf1"
            ],
            [
                "21d4f91c.de1306"
            ]
        ]
    },
    {
        "id": "21d4f91c.de1306",
        "type": "function",
        "z": "af228686.65c8a8",
        "name": "turn_on",
        "func": "var service = \"turn_on\"\n\nmsg.payload = {\n    \"service\": service,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 720,
        "y": 1060,
        "wires": [
            [
                "25ea17aa.545428"
            ]
        ]
    },
    {
        "id": "25ea17aa.545428",
        "type": "trigger",
        "z": "af228686.65c8a8",
        "name": "",
        "op1": "{\"service\":\"turn_on\"}",
        "op2": "{\"service\":\"turn_off\"}",
        "op1type": "json",
        "op2type": "json",
        "duration": "90",
        "extend": true,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "outputs": 1,
        "x": 890,
        "y": 1060,
        "wires": [
            [
                "ef43dbae.116a58"
            ]
        ]
    },
    {
        "id": "80ee1fdc.1e802",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "format pushover msg",
        "func": "var baseUrl = \"https://frigate.eviljungle.com\"\nvar topic = msg.topic\nvar topicArray = topic.split(\"/\");\nvar camera = topicArray[1];\nvar object = topicArray[2];\nvar url = baseUrl + \"/\" + camera + \"/\" + object + \"/best.jpg\"\n\nmsg.topic = object + \" detected (\" + camera + \")\";\nmsg.payload = camera + \": \" + url; \nmsg.sound = \"intermission\"\n// msg.priority = 1;\nmsg.image = url;\nmsg.url = url;\nmsg.url_title = camera + \"/\" + object;\nreturn msg;\n",
        "outputs": 2,
        "noerr": 0,
        "x": 180,
        "y": 1400,
        "wires": [
            [
                "8e3a35fa.2fd5e8"
            ],
            []
        ]
    },
    {
        "id": "8e3a35fa.2fd5e8",
        "type": "pushover api",
        "z": "2fad043e.317c8c",
        "keys": "1be7789.845ca87",
        "title": "",
        "name": "",
        "x": 440,
        "y": 1400,
        "wires": []
    },
    {
        "id": "bca9942.41f0668",
        "type": "api-call-service",
        "z": "75b62c93.dd5d84",
        "name": "",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "tts",
        "service": "google_say",
        "entityId": "all",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1450,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "84638053.1d746",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Jeff's garage open tts",
        "func": "var name = \"Jeff's\";\nvar openTimeinMS = global.get('cover.jeff_garage_door_mqtt.durationTimeMS') || 0;\nvar message = name + \" garage door has remained open for about \" + millisecondsToStr(openTimeinMS)\n\nmsg.payload = {\n    \"data\": {\n        message,\n    }\n}\nreturn [ msg ];\n\nfunction millisecondsToStr (milliseconds) {\n    // TIP: to find current time in milliseconds, use:\n    // var  current_time_milliseconds = new Date().getTime();\n\n    function numberEnding (number) {\n        return (number > 1) ? 's' : '';\n    }\n\n    var temp = Math.floor(milliseconds / 1000);\n    var years = Math.floor(temp / 31536000);\n    if (years) {\n        return years + ' year' + numberEnding(years);\n    }\n    //TODO: Months! Maybe weeks? \n    var days = Math.floor((temp %= 31536000) / 86400);\n    if (days) {\n        return days + ' day' + numberEnding(days);\n    }\n    var hours = Math.floor((temp %= 86400) / 3600);\n    if (hours) {\n        return hours + ' hour' + numberEnding(hours);\n    }\n    var minutes = Math.floor((temp %= 3600) / 60);\n    if (minutes) {\n        return minutes + ' minute' + numberEnding(minutes);\n    }\n    var seconds = temp % 60;\n    if (seconds) {\n        return seconds + ' second' + numberEnding(seconds);\n    }\n    return 'less than a second'; //'just now' //or other string you like;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1180,
        "y": 340,
        "wires": [
            []
        ]
    },
    {
        "id": "d9d836af.784958",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Jen's garage open tts",
        "func": "var name = \"Jen's\";\nvar openTimeinMS = global.get('cover.jen_garage_door_mqtt.durationTimeMS') || 0;\nvar message = name + \" garage door has remained open for about \" + millisecondsToStr(openTimeinMS)\n\nmsg.payload = {\n    \"data\": {\n        message,\n    }\n}\nreturn [ msg ];\n\nfunction millisecondsToStr (milliseconds) {\n    // TIP: to find current time in milliseconds, use:\n    // var  current_time_milliseconds = new Date().getTime();\n\n    function numberEnding (number) {\n        return (number > 1) ? 's' : '';\n    }\n\n    var temp = Math.floor(milliseconds / 1000);\n    var years = Math.floor(temp / 31536000);\n    if (years) {\n        return years + ' year' + numberEnding(years);\n    }\n    //TODO: Months! Maybe weeks? \n    var days = Math.floor((temp %= 31536000) / 86400);\n    if (days) {\n        return days + ' day' + numberEnding(days);\n    }\n    var hours = Math.floor((temp %= 86400) / 3600);\n    if (hours) {\n        return hours + ' hour' + numberEnding(hours);\n    }\n    var minutes = Math.floor((temp %= 3600) / 60);\n    if (minutes) {\n        return minutes + ' minute' + numberEnding(minutes);\n    }\n    var seconds = temp % 60;\n    if (seconds) {\n        return seconds + ' second' + numberEnding(seconds);\n    }\n    return 'less than a second'; //'just now' //or other string you like;\n}\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1180,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "f3eb4a40.4ffd18",
        "type": "api-call-service",
        "z": "75b62c93.dd5d84",
        "name": "",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "tts",
        "service": "google_say",
        "entityId": "all",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1450,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "ee5938d2.5f5108",
        "type": "api-call-service",
        "z": "4aedf9e8.044e08",
        "name": "play on all speakers",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "media_player",
        "service": "play_media",
        "entityId": "all",
        "data": "{\"media_content_id\":\"https://hass.eviljungle.com/local/US-EN-Morgan-Freeman-Vacate-The-Premises.wav\",\"media_content_type\":\"audio/wav\"}",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 940,
        "y": 1340,
        "wires": [
            []
        ]
    },
    {
        "id": "e2f0bf60.7c222",
        "type": "delay",
        "z": "4aedf9e8.044e08",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "30",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 660,
        "y": 1340,
        "wires": [
            [
                "ee5938d2.5f5108"
            ]
        ]
    },
    {
        "id": "52004fde.a9b63",
        "type": "mqtt in",
        "z": "afb0f186.cfb0d",
        "name": "iOS shortcuts",
        "topic": "homeassistant/shortcuts",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 170,
        "y": 180,
        "wires": [
            [
                "b7327631.554ea8"
            ]
        ]
    },
    {
        "id": "b7327631.554ea8",
        "type": "switch",
        "z": "afb0f186.cfb0d",
        "name": "sleep?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "sleep",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 350,
        "y": 180,
        "wires": [
            [
                "abaa348a.014658",
                "c7daa875.529798",
                "1e7a0313.46060d",
                "bf057d34.456c4",
                "ad95fe70.c19c6"
            ]
        ]
    },
    {
        "id": "6050e0f4.c5a5f",
        "type": "function",
        "z": "43703bf3.b01b24",
        "name": "turn_off",
        "func": "var service = \"turn_off\"\n\nmsg.payload = {\n    \"service\": service,\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 200,
        "y": 80,
        "wires": [
            [
                "89834abb.4ef668",
                "510bee04.ba47c",
                "10d4db91.a75214",
                "da8d24c5.0c87e8",
                "39b8136a.8621ec",
                "86d4f834.021e58",
                "b520cc14.e3d0e",
                "bb404911.ad8978",
                "d0a97ae.0d59e88",
                "cc4d6e76.6d591",
                "ab752c4d.a1bdc",
                "ea25edb9.d9596"
            ]
        ]
    },
    {
        "id": "da8d24c5.0c87e8",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "cabinet lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "",
        "entityId": "group.cabinet_lights",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 390,
        "y": 80,
        "wires": [
            []
        ]
    },
    {
        "id": "89834abb.4ef668",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "pool light",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "light",
        "service": "",
        "entityId": "switch.pool",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 380,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "510bee04.ba47c",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "deck lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "",
        "entityId": "switch.outlet_a",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 390,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "10d4db91.a75214",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "garage lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "",
        "entityId": "switch.garage",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 390,
        "y": 260,
        "wires": [
            []
        ]
    },
    {
        "id": "abaa348a.014658",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 510,
        "y": 180,
        "wires": [
            [],
            [
                "df49345d.517b08"
            ]
        ]
    },
    {
        "id": "df49345d.517b08",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "alarm disarmed?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "disarmed",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "alarm_control_panel.alarm_panel",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 730,
        "y": 180,
        "wires": [
            [],
            [
                "1565a2c3.f7cafd"
            ]
        ]
    },
    {
        "id": "1565a2c3.f7cafd",
        "type": "credentials",
        "z": "afb0f186.cfb0d",
        "name": "alarm code",
        "props": [
            {
                "value": "alarm_code",
                "type": "msg"
            }
        ],
        "x": 970,
        "y": 180,
        "wires": [
            [
                "bb125ee2.c2487"
            ]
        ]
    },
    {
        "id": "bb125ee2.c2487",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "arm alarm",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "alarm_control_panel",
        "service": "alarm_arm_home",
        "entityId": "alarm_control_panel.alarm_panel",
        "data": "{\"code\":\"{{ alarm_code }}\"}",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1180,
        "y": 180,
        "wires": [
            []
        ]
    },
    {
        "id": "c7daa875.529798",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "Jeff's Garage Door Open?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "open",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "cover.jeff_garage_door",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 580,
        "y": 300,
        "wires": [
            [],
            [
                "b82a7714.327f98"
            ]
        ]
    },
    {
        "id": "b82a7714.327f98",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "close jeff's garage door",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "cover",
        "service": "close_cover",
        "entityId": "cover.jeff_garage_door",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1010,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "1e7a0313.46060d",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "Jen's Garage Door Open?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "open",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "cover.jen_garage_door",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 580,
        "y": 360,
        "wires": [
            [],
            [
                "d90e37d0.539998"
            ]
        ]
    },
    {
        "id": "d90e37d0.539998",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "close jen's garage door",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "cover",
        "service": "close_cover",
        "entityId": "cover.jen_garage_door",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1010,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "5d68df15.4a20a",
        "type": "server-state-changed",
        "z": "afb0f186.cfb0d",
        "d": true,
        "name": "US coronavirus deaths",
        "server": "8b52884a.b76658",
        "version": 1,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "sensor.us_coronavirus_deaths",
        "entityidfiltertype": "substring",
        "outputinitially": true,
        "state_type": "str",
        "haltifstate": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 1,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 120,
        "y": 500,
        "wires": [
            [
                "87024ed3.3b412"
            ]
        ]
    },
    {
        "id": "f06bec87.5e22f",
        "type": "function",
        "z": "afb0f186.cfb0d",
        "name": "Coronavirus message tts",
        "func": "var message = msg.payload + \" people in the US now DEAD from the Coronavirus\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n        language: 'de'\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 750,
        "y": 500,
        "wires": [
            [
                "c3ba738d.78e8a"
            ]
        ]
    },
    {
        "id": "c3ba738d.78e8a",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "office speaker",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "tts",
        "service": "google_say",
        "entityId": "media_player.office_speaker",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 980,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "cf9ac261.41332",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "US confirmed",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "sensor.us_coronavirus_confirmed",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 380,
        "y": 440,
        "wires": [
            [
                "f06bec87.5e22f"
            ]
        ]
    },
    {
        "id": "66fd933a.920a0c",
        "type": "inject",
        "z": "afb0f186.cfb0d",
        "name": "",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 180,
        "y": 440,
        "wires": [
            [
                "cf9ac261.41332"
            ]
        ]
    },
    {
        "id": "502eed22.a9fcb4",
        "type": "api-call-service",
        "z": "afb0f186.cfb0d",
        "name": "ansley speaker",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "tts",
        "service": "google_say",
        "entityId": "media_player.sun_room_speaker",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 980,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "87024ed3.3b412",
        "type": "api-current-state",
        "z": "afb0f186.cfb0d",
        "name": "alarm disarmed?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "disarmed",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": false,
        "entity_id": "alarm_control_panel.alarm_panel",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 390,
        "y": 500,
        "wires": [
            [],
            [
                "f06bec87.5e22f"
            ]
        ]
    },
    {
        "id": "39b8136a.8621ec",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "basement bedroom lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "",
        "entityId": "switch.bedroom",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 430,
        "y": 320,
        "wires": [
            []
        ]
    },
    {
        "id": "86d4f834.021e58",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "basement livingroom lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "",
        "entityId": "switch.livingroom",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 440,
        "y": 380,
        "wires": [
            []
        ]
    },
    {
        "id": "b520cc14.e3d0e",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "basement hallway lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "",
        "entityId": "switch.hallway",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 430,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "bb404911.ad8978",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "basement stairs lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "light",
        "service": "",
        "entityId": "light.stairs",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 420,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "bf057d34.456c4",
        "type": "subflow:43703bf3.b01b24",
        "z": "afb0f186.cfb0d",
        "name": "",
        "env": [],
        "x": 530,
        "y": 240,
        "wires": []
    },
    {
        "id": "7dd47d21.519634",
        "type": "subflow:43703bf3.b01b24",
        "z": "af228686.65c8a8",
        "name": "",
        "env": [],
        "x": 550,
        "y": 240,
        "wires": []
    },
    {
        "id": "910caaaf.b41098",
        "type": "subflow:43703bf3.b01b24",
        "z": "4aedf9e8.044e08",
        "name": "",
        "x": 370,
        "y": 80,
        "wires": []
    },
    {
        "id": "700f243b.725e6c",
        "type": "api-call-service",
        "z": "af228686.65c8a8",
        "name": "foyer stairs lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "light",
        "service": "",
        "entityId": "light.stairs_2",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 950,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "d0a97ae.0d59e88",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "foyer stairs lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "light",
        "service": "",
        "entityId": "light.stairs_2",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 410,
        "y": 620,
        "wires": [
            []
        ]
    },
    {
        "id": "1dfe2789.5fa7c8",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "red LED (dimmer)",
        "func": "msg.payload = \"1\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1050,
        "y": 540,
        "wires": [
            [
                "d9fc950e.9146b8",
                "b3d13083.19a3b"
            ]
        ]
    },
    {
        "id": "d9fc950e.9146b8",
        "type": "mqtt out",
        "z": "75b62c93.dd5d84",
        "name": "set basement stairs LED",
        "topic": "homeassistant/basement/stairs/112/1/13/set",
        "qos": "",
        "retain": "",
        "broker": "649859a4.a17818",
        "x": 1470,
        "y": 420,
        "wires": []
    },
    {
        "id": "79809bca.5bba24",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "bright LED (dimmer)",
        "func": "msg.payload = \"10\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1060,
        "y": 580,
        "wires": [
            [
                "703a0c9a.e86f74",
                "d7fe279.38eaed8"
            ]
        ]
    },
    {
        "id": "703a0c9a.e86f74",
        "type": "mqtt out",
        "z": "75b62c93.dd5d84",
        "name": "set basement stairs brightness",
        "topic": "homeassistant/basement/stairs/112/1/14/set",
        "qos": "",
        "retain": "",
        "broker": "649859a4.a17818",
        "x": 1490,
        "y": 480,
        "wires": []
    },
    {
        "id": "b3d13083.19a3b",
        "type": "mqtt out",
        "z": "75b62c93.dd5d84",
        "name": "set foyer stairs LED",
        "topic": "homeassistant/foyer/stairs/112/1/13/set",
        "qos": "",
        "retain": "",
        "broker": "649859a4.a17818",
        "x": 1450,
        "y": 540,
        "wires": []
    },
    {
        "id": "d7fe279.38eaed8",
        "type": "mqtt out",
        "z": "75b62c93.dd5d84",
        "name": "set foyer stairs brightness",
        "topic": "homeassistant/foyer/stairs/112/1/14/set",
        "qos": "",
        "retain": "",
        "broker": "649859a4.a17818",
        "x": 1470,
        "y": 600,
        "wires": []
    },
    {
        "id": "73880f98.ecb8",
        "type": "mqtt out",
        "z": "af228686.65c8a8",
        "name": "set basement stairs LED",
        "topic": "homeassistant/basement/stairs/112/1/13/set",
        "qos": "",
        "retain": "",
        "broker": "649859a4.a17818",
        "x": 970,
        "y": 500,
        "wires": []
    },
    {
        "id": "c5e30a64.94ae28",
        "type": "mqtt out",
        "z": "af228686.65c8a8",
        "name": "set foyer stairs LED",
        "topic": "homeassistant/foyer/stairs/112/1/13/set",
        "qos": "",
        "retain": "",
        "broker": "649859a4.a17818",
        "x": 950,
        "y": 560,
        "wires": []
    },
    {
        "id": "3914a91f.c6db16",
        "type": "function",
        "z": "af228686.65c8a8",
        "name": "yellow led (dimmer)",
        "func": "msg.payload = \"43\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 570,
        "y": 460,
        "wires": [
            [
                "c5e30a64.94ae28",
                "73880f98.ecb8"
            ]
        ]
    },
    {
        "id": "69f58306.46521c",
        "type": "function",
        "z": "af228686.65c8a8",
        "name": "reset LED (dimmer)",
        "func": "msg.payload = \"170\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 570,
        "y": 580,
        "wires": [
            [
                "c5e30a64.94ae28",
                "73880f98.ecb8"
            ]
        ]
    },
    {
        "id": "9e6b17c0.eca808",
        "type": "function",
        "z": "af228686.65c8a8",
        "name": "reset brightness (dimmer)",
        "func": "msg.payload = \"5\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 590,
        "y": 640,
        "wires": [
            [
                "77d2dc73.0dae94",
                "55da92d9.c7e24c"
            ]
        ]
    },
    {
        "id": "77d2dc73.0dae94",
        "type": "mqtt out",
        "z": "af228686.65c8a8",
        "name": "set foyer stairs brightness",
        "topic": "homeassistant/foyer/stairs/112/1/14/set",
        "qos": "",
        "retain": "",
        "broker": "649859a4.a17818",
        "x": 970,
        "y": 680,
        "wires": []
    },
    {
        "id": "55da92d9.c7e24c",
        "type": "mqtt out",
        "z": "af228686.65c8a8",
        "name": "set basement stairs brightness",
        "topic": "homeassistant/basement/stairs/112/1/14/set",
        "qos": "",
        "retain": "",
        "broker": "649859a4.a17818",
        "x": 990,
        "y": 620,
        "wires": []
    },
    {
        "id": "9705290.81165d8",
        "type": "inject",
        "z": "af228686.65c8a8",
        "name": "trigger",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 330,
        "y": 500,
        "wires": [
            [
                "7e3d7181.e5345",
                "3914a91f.c6db16"
            ]
        ]
    },
    {
        "id": "5bc56f1f.13e04",
        "type": "inject",
        "z": "af228686.65c8a8",
        "name": "trigger",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 330,
        "y": 560,
        "wires": [
            [
                "e5f64887.97ccc8",
                "69f58306.46521c",
                "9e6b17c0.eca808"
            ]
        ]
    },
    {
        "id": "5a294dbb.04d8f4",
        "type": "inject",
        "z": "75b62c93.dd5d84",
        "name": "trigger",
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 730,
        "y": 560,
        "wires": [
            [
                "1dfe2789.5fa7c8",
                "79809bca.5bba24"
            ]
        ]
    },
    {
        "id": "9c10550.dd717a8",
        "type": "bigtimer",
        "z": "75b62c93.dd5d84",
        "outtopic": "",
        "outpayload1": "1",
        "outpayload2": "",
        "name": "10pm every day",
        "comment": "",
        "lat": "33.94519",
        "lon": "-84.45379",
        "starttime": "1320",
        "endtime": "1335",
        "starttime2": 0,
        "endtime2": 0,
        "startoff": "0",
        "endoff": "0",
        "offs": 0,
        "outtext1": "",
        "outtext2": "",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "repeat": false,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 140,
        "y": 1480,
        "wires": [
            [
                "2b32108e.ca6c4"
            ],
            [],
            []
        ]
    },
    {
        "id": "2b32108e.ca6c4",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "input_boolean.auto_garage_doors_night",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 350,
        "y": 1480,
        "wires": [
            [],
            [
                "7580ad02.1d1094",
                "9a89a3bd.5cd1f"
            ]
        ]
    },
    {
        "id": "9a89a3bd.5cd1f",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "Jeff's garage open?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "Open",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "sensor.garage_status",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 560,
        "y": 1660,
        "wires": [
            [],
            [
                "c7f621d7.fd034",
                "1c715195.a5445e",
                "8c50572e.649c28"
            ]
        ]
    },
    {
        "id": "7580ad02.1d1094",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "Jen's garage open?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "Open",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "sensor.garage2_status",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 560,
        "y": 1480,
        "wires": [
            [],
            [
                "1feaae97.9eff71",
                "74b073d6.9da86c",
                "31c28c54.28e824"
            ]
        ]
    },
    {
        "id": "74b073d6.9da86c",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Jen's garage open tts",
        "func": "var name = \"Jen's\";\nvar message = \"Automatically closing \" + name + \" garage door\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 820,
        "y": 1600,
        "wires": [
            [
                "b3cce24d.11415"
            ]
        ]
    },
    {
        "id": "1feaae97.9eff71",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Jen's garage open msg",
        "func": "var category = \"garage2\";\nvar name = \"Jen's\";\nvar title = \"Jen's Garage Door\";\nvar message = \"Automatically closing \" + title;\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category\n            }\n        }\n    }\n}\nreturn [ msg ];",
        "outputs": 1,
        "noerr": 0,
        "x": 830,
        "y": 1540,
        "wires": [
            [
                "f15ae5b4.cdfb08",
                "29c0f0d7.83eba"
            ]
        ]
    },
    {
        "id": "f15ae5b4.cdfb08",
        "type": "api-call-service",
        "z": "75b62c93.dd5d84",
        "name": "notify jeff iOS",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "notify",
        "service": "mobile_app_jeffs_xs",
        "entityId": "",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1160,
        "y": 1540,
        "wires": [
            []
        ]
    },
    {
        "id": "b3cce24d.11415",
        "type": "api-call-service",
        "z": "75b62c93.dd5d84",
        "name": "",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "tts",
        "service": "google_say",
        "entityId": "all",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1170,
        "y": 1660,
        "wires": [
            []
        ]
    },
    {
        "id": "29c0f0d7.83eba",
        "type": "api-call-service",
        "z": "75b62c93.dd5d84",
        "name": "notify jen iOS",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "notify",
        "service": "mobile_app_jennifers_xs_max",
        "entityId": "",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1160,
        "y": 1600,
        "wires": [
            []
        ]
    },
    {
        "id": "31c28c54.28e824",
        "type": "api-call-service",
        "z": "75b62c93.dd5d84",
        "name": "close jen's garage door",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "cover",
        "service": "close_cover",
        "entityId": "cover.jen_garage_door",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 830,
        "y": 1480,
        "wires": [
            []
        ]
    },
    {
        "id": "8c50572e.649c28",
        "type": "api-call-service",
        "z": "75b62c93.dd5d84",
        "name": "close jeff's garage door",
        "server": "8b52884a.b76658",
        "version": "1",
        "debugenabled": false,
        "service_domain": "cover",
        "service": "close_cover",
        "entityId": "cover.jeff_garage_door",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 830,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "1c715195.a5445e",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Jeff's garage open tts",
        "func": "var name = \"Jeff's\";\nvar message = \"Automatically closing \" + name + \" garage door\"\n\nmsg.payload = {\n    \"data\": {\n        message,\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "x": 820,
        "y": 1720,
        "wires": [
            [
                "b3cce24d.11415"
            ]
        ]
    },
    {
        "id": "c7f621d7.fd034",
        "type": "function",
        "z": "75b62c93.dd5d84",
        "name": "Jeff's garage open msg",
        "func": "var category = \"garage\";\nvar name = \"Jeff's\";\nvar title = \"Jeff's Garage Door\";\nvar message = \"Automatically closing \" + title;\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category\n            }\n        }\n    }\n}\nreturn [ msg ];",
        "outputs": 1,
        "noerr": 0,
        "x": 830,
        "y": 1660,
        "wires": [
            [
                "f15ae5b4.cdfb08",
                "29c0f0d7.83eba"
            ]
        ]
    },
    {
        "id": "f1b4871e.0645f8",
        "type": "bigtimer",
        "z": "4aedf9e8.044e08",
        "outtopic": "",
        "outpayload1": "1",
        "outpayload2": "",
        "name": "8:30am every day",
        "comment": "",
        "lat": "33.94519",
        "lon": "-84.45379",
        "starttime": "510",
        "endtime": "525",
        "starttime2": 0,
        "endtime2": 0,
        "startoff": "0",
        "endoff": "0",
        "startoff2": "",
        "endoff2": "",
        "offs": 0,
        "outtext1": "",
        "outtext2": "",
        "timeout": 1440,
        "sun": true,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": true,
        "jan": true,
        "feb": true,
        "mar": true,
        "apr": true,
        "may": true,
        "jun": true,
        "jul": true,
        "aug": true,
        "sep": true,
        "oct": true,
        "nov": true,
        "dec": true,
        "day1": 0,
        "month1": 0,
        "day2": 0,
        "month2": 0,
        "day3": 0,
        "month3": 0,
        "day4": 0,
        "month4": 0,
        "day5": 0,
        "month5": 0,
        "day6": 0,
        "month6": 0,
        "day7": "",
        "month7": "",
        "day8": "",
        "month8": "",
        "day9": "",
        "month9": "",
        "day10": "",
        "month10": "",
        "day11": "",
        "month11": "",
        "day12": "",
        "month12": "",
        "d1": 0,
        "w1": 0,
        "d2": 0,
        "w2": 0,
        "d3": 0,
        "w3": 0,
        "d4": 0,
        "w4": 0,
        "d5": 0,
        "w5": 0,
        "d6": 0,
        "w6": 0,
        "xday1": 0,
        "xmonth1": 0,
        "xday2": 0,
        "xmonth2": 0,
        "xday3": 0,
        "xmonth3": 0,
        "xday4": 0,
        "xmonth4": 0,
        "xday5": 0,
        "xmonth5": 0,
        "xday6": 0,
        "xmonth6": 0,
        "xd1": 0,
        "xw1": 0,
        "xd2": 0,
        "xw2": 0,
        "xd3": 0,
        "xw3": 0,
        "xd4": 0,
        "xw4": 0,
        "xd5": 0,
        "xw5": 0,
        "xd6": 0,
        "xw6": 0,
        "suspend": false,
        "random": false,
        "randon1": false,
        "randoff1": false,
        "randon2": false,
        "randoff2": false,
        "repeat": false,
        "atstart": true,
        "odd": false,
        "even": false,
        "x": 130,
        "y": 540,
        "wires": [
            [
                "a58f31c1.f84bd"
            ],
            [],
            []
        ]
    },
    {
        "id": "a58f31c1.f84bd",
        "type": "listEventsOnDays",
        "z": "4aedf9e8.044e08",
        "name": "Fetch Cal",
        "googleCredentials": "d02fa8ec.7c1538",
        "calendarIds": "[{\"id\":\"jeff@billimek.com\",\"name\":\"Jeff Billimek\"}]",
        "timezoneOffsetHours": "-5",
        "daysOffsetStart": "0",
        "daysOffsetEnd": "0",
        "refreshInterval": 0,
        "x": 360,
        "y": 540,
        "wires": [
            [
                "ce427313.c8ce3"
            ]
        ]
    },
    {
        "id": "ce427313.c8ce3",
        "type": "switch",
        "z": "4aedf9e8.044e08",
        "name": "Cleaning?",
        "property": "$lookup(payload, \"summary\")\t",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "cont",
                "v": "house cleaning",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 540,
        "y": 540,
        "wires": [
            [
                "f36487b8.7e8c48"
            ]
        ]
    },
    {
        "id": "8de13723.a5d308",
        "type": "listEventsOnDays",
        "z": "4aedf9e8.044e08",
        "name": "Fetch Cal",
        "googleCredentials": "d02fa8ec.7c1538",
        "calendarIds": "[{\"id\":\"jeff@billimek.com\",\"name\":\"Jeff Billimek\"}]",
        "timezoneOffsetHours": "-5",
        "daysOffsetStart": "0",
        "daysOffsetEnd": "0",
        "refreshInterval": 0,
        "x": 800,
        "y": 280,
        "wires": [
            [
                "aaa7449e.7de358"
            ]
        ]
    },
    {
        "id": "aaa7449e.7de358",
        "type": "switch",
        "z": "4aedf9e8.044e08",
        "name": "Cleaning?",
        "property": "$lookup(payload, \"summary\")\t",
        "propertyType": "jsonata",
        "rules": [
            {
                "t": "cont",
                "v": "house cleaning",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 800,
        "y": 220,
        "wires": [
            [],
            [
                "892a8bfd.69c738"
            ]
        ]
    },
    {
        "id": "dba11aed.2b5e28",
        "type": "time-range-switch",
        "z": "4aedf9e8.044e08",
        "name": "8:31am-1pm",
        "lat": "33.95092",
        "lon": "-84.44805",
        "startTime": "08:31",
        "endTime": "13:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 810,
        "y": 340,
        "wires": [
            [
                "8de13723.a5d308"
            ],
            [
                "892a8bfd.69c738"
            ]
        ]
    },
    {
        "id": "3d9da1d0.c9fb5e",
        "type": "time-range-switch",
        "z": "4aedf9e8.044e08",
        "name": "12am-5am",
        "lat": "33.95092",
        "lon": "-84.44805",
        "startTime": "00:00",
        "endTime": "05:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 550,
        "y": 880,
        "wires": [
            [
                "537b61b2.0a12d"
            ],
            []
        ]
    },
    {
        "id": "537b61b2.0a12d",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "Alarm iOS msg",
        "func": "var time = timeStamp();\n\nvar category = \"alarm\"\nvar title = \"Suspicious Activity\"\nvar message = \"Someone disarmed the alarm at \" + time\n\n\nmsg.payload = {\n    \"data\": {\n        message,\n        title,\n        data: {\n            push: {\n                category: category\n            }\n        }\n    }\n}\nreturn [ msg ];\n\n\nfunction timeStamp() {\n// Create a date object with the current time\n  var now = new Date();\n\n// Create an array with the current month, day and time\n  var date = [ now.getMonth() + 1, now.getDate(), now.getFullYear() ];\n\n// Create an array with the current hour, minute and second\n  var time = [ now.getHours(), now.getMinutes(), now.getSeconds() ];\n\n// Determine AM or PM suffix based on the hour\n  var suffix = ( time[0] < 12 ) ? \"AM\" : \"PM\";\n\n// Convert hour from military time\n  time[0] = ( time[0] < 12 ) ? time[0] : time[0] - 12;\n\n// If hour is 0, set it to 12\n  time[0] = time[0] || 12;\n\n// If seconds and minutes are less than 10, add a zero\n  for ( var i = 1; i < 3; i++ ) {\n    if ( time[i] < 10 ) {\n      time[i] = \"0\" + time[i];\n    }\n  }\n\n// Return the formatted string\n//   return date.join(\"/\") + \" \" + time.join(\":\") + \" \" + suffix;\n  return time.join(\":\") + \" \" + suffix;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 920,
        "y": 880,
        "wires": [
            [
                "aeafe637.1aeaf8"
            ]
        ]
    },
    {
        "id": "713a09bb.60db28",
        "type": "comment",
        "z": "4aedf9e8.044e08",
        "name": "Alert if someone is sneaking out",
        "info": "",
        "x": 610,
        "y": 940,
        "wires": []
    },
    {
        "id": "31fd2e46.0f9882",
        "type": "api-current-state",
        "z": "75b62c93.dd5d84",
        "name": "Jeff's garage closed?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "closed",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "cover.jeffs_garage_mqtt",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 560,
        "y": 1400,
        "wires": [
            [],
            [
                "dae80ca4.7cdc9"
            ]
        ]
    },
    {
        "id": "88ed4484.87c648",
        "type": "function",
        "z": "4aedf9e8.044e08",
        "name": "Alarm Triggerred discord msg",
        "func": "var action = msg.payload\nvar message = \"<@65851793686405120> 🚨 ALARM HAS TRIGGERED 🚨\\n\" + action + \" \\n OMG WTFBBQ!!!!!11 :fire:\"\nvar target = [\"782247274029776937\", \"65851793686405120\"]\nmsg.payload = {\n    \"data\": {\n        message,\n        target,\n        // data: {\n        //     attachments: [\n        //         {\n        //             title: \"Front Camera\",\n        //             image_url: \"https://hass.eviljungle.com/local/camera/camera.front.jpg\"\n        //         },\n        //         {\n        //             title: \"Driveway Camera\",\n        //             image_url: \"https://hass.eviljungle.com/local/camera/camera.driveway.jpg\"\n        //         },\n        //         {\n        //             title: \"Porch Camera\",\n        //             image_url: \"https://hass.eviljungle.com/local/camera/camera.porch.jpg\"\n        //         },\n        //         {\n        //             title: \"Pool Camera\",\n        //             image_url: \"https://hass.eviljungle.com/local/camera/camera.pool.jpg\"\n        //         },\n        //         {\n        //             title: \"Basement Camera\",\n        //             image_url: \"https://hass.eviljungle.com/local/camera/camera.basement.jpg\"\n        //         },\n        //         ]\n        // }\n    }\n}\nreturn [ msg ];\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "x": 960,
        "y": 1080,
        "wires": [
            [
                "253e7337.0501fc"
            ]
        ]
    },
    {
        "id": "253e7337.0501fc",
        "type": "api-call-service",
        "z": "4aedf9e8.044e08",
        "name": "Notify discord",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "notify",
        "service": "discord",
        "entityId": "",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1260,
        "y": 920,
        "wires": [
            []
        ]
    },
    {
        "id": "cc4d6e76.6d591",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "desk lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "",
        "entityId": "switch.outlet_e_2",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 390,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "ab752c4d.a1bdc",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "camera lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "",
        "entityId": "switch.outlet_e",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 390,
        "y": 680,
        "wires": [
            []
        ]
    },
    {
        "id": "3af164aa.92a0ac",
        "type": "api-call-service",
        "z": "af228686.65c8a8",
        "name": "tree lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "",
        "entityId": "switch.outlet_d",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 920,
        "y": 220,
        "wires": [
            []
        ]
    },
    {
        "id": "10f1ece0.fa3373",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "tree lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "",
        "entityId": "switch.outlet_d",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 380,
        "y": 860,
        "wires": [
            []
        ]
    },
    {
        "id": "5da2f0fb.840db",
        "type": "mqtt in",
        "z": "af228686.65c8a8",
        "name": "wyze-3 motion",
        "topic": "camera/wyze-3/motion",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 130,
        "y": 1240,
        "wires": [
            [
                "ec2d36d0.f17fb8"
            ]
        ]
    },
    {
        "id": "ec2d36d0.f17fb8",
        "type": "rbe",
        "z": "af228686.65c8a8",
        "name": "state change",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 330,
        "y": 1240,
        "wires": [
            [
                "e915233a.c4b9e"
            ]
        ]
    },
    {
        "id": "e915233a.c4b9e",
        "type": "switch",
        "z": "af228686.65c8a8",
        "name": "motion?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "ON",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 540,
        "y": 1240,
        "wires": [
            [
                "71f227c0.43b6f8"
            ]
        ]
    },
    {
        "id": "83092d58.56334",
        "type": "api-call-service",
        "z": "af228686.65c8a8",
        "name": "turn on desk lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "turn_on",
        "entityId": "switch.outlet_e_2",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 930,
        "y": 1240,
        "wires": [
            []
        ]
    },
    {
        "id": "91d47683.a22478",
        "type": "server-state-changed",
        "z": "af228686.65c8a8",
        "name": "no desk motion for 10 min",
        "server": "8b52884a.b76658",
        "version": 1,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.wyze_3_motion_sensor",
        "entityidfiltertype": "exact",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": true,
        "for": "10",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 170,
        "y": 1320,
        "wires": [
            [
                "432fde78.07eef"
            ],
            []
        ]
    },
    {
        "id": "432fde78.07eef",
        "type": "api-call-service",
        "z": "af228686.65c8a8",
        "name": "turn off desk lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "turn_off",
        "entityId": "switch.outlet_e_2",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 930,
        "y": 1320,
        "wires": [
            []
        ]
    },
    {
        "id": "38fd4b19.dc2404",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "Ansley's phone (wifi) not_home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "device_tracker.ansleys_xr",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 190,
        "y": 160,
        "wires": [
            [],
            [
                "16f12e62.2031d2",
                "21e5467e.c04e6a"
            ]
        ]
    },
    {
        "id": "7aa315ba.50ef1c",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "Ansley's phone (gps) not_home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "device_tracker.ansleys_xr_2",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 190,
        "y": 340,
        "wires": [
            [],
            [
                "16f12e62.2031d2",
                "21e5467e.c04e6a"
            ]
        ]
    },
    {
        "id": "99244591.4adac8",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "Ansley's phone (wifi) home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "device_tracker.ansleys_xr",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "not_home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 200,
        "y": 1080,
        "wires": [
            [],
            [
                "fe1f1f4a.3f5bc",
                "e0d9002.3e0be"
            ]
        ]
    },
    {
        "id": "9e47d0c1.372bf",
        "type": "server-state-changed",
        "z": "9143c7f2.16df18",
        "name": "Ansley's phone (gps) home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "device_tracker.ansleys_xr_2",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "not_home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 200,
        "y": 1260,
        "wires": [
            [],
            [
                "fe1f1f4a.3f5bc",
                "e0d9002.3e0be"
            ]
        ]
    },
    {
        "id": "eeb8b22f.4f942",
        "type": "api-call-service",
        "z": "9143c7f2.16df18",
        "name": "jeffs_phone_bt not_home",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "device_tracker",
        "service": "see",
        "entityId": "",
        "data": "{\"dev_id\":\"jeffs_phone_bt\",\"location_name\":\"not_home\"}",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 590,
        "y": 1540,
        "wires": [
            []
        ]
    },
    {
        "id": "33a9ae.2d6d7652",
        "type": "api-call-service",
        "z": "9143c7f2.16df18",
        "name": "jeffs_phone_bt home",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "device_tracker",
        "service": "see",
        "entityId": "",
        "data": "{\"dev_id\":\"jeffs_phone_bt\",\"location_name\":\"home\"}",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 580,
        "y": 1600,
        "wires": [
            []
        ]
    },
    {
        "id": "c1b0882f.ec1b48",
        "type": "trigger-state",
        "z": "9143c7f2.16df18",
        "name": "Jen home -> not_home (bluetooth)",
        "server": "8b52884a.b76658",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityid": "input_boolean.jen_occupancy",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "off",
                "propertyValue": "new_state.state"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on",
                "propertyValue": "old_state.state"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": true,
        "state_type": "str",
        "x": 180,
        "y": 1660,
        "wires": [
            [
                "2696659d.d3703a"
            ],
            [
                "d7b13820.4ec6d8"
            ]
        ]
    },
    {
        "id": "e7895deb.f85fb",
        "type": "trigger-state",
        "z": "9143c7f2.16df18",
        "name": "Jen not_home -> home (bluetooth)",
        "server": "8b52884a.b76658",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityid": "input_boolean.jen_occupancy",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on",
                "propertyValue": "new_state.state"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "off",
                "propertyValue": "old_state.state"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": true,
        "state_type": "str",
        "x": 180,
        "y": 1720,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "2696659d.d3703a",
        "type": "api-call-service",
        "z": "9143c7f2.16df18",
        "name": "jens_phone_bt not_home",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "device_tracker",
        "service": "see",
        "entityId": "",
        "data": "{\"dev_id\":\"jens_phone_bt\",\"location_name\":\"not_home\"}",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 590,
        "y": 1660,
        "wires": [
            []
        ]
    },
    {
        "id": "d7b13820.4ec6d8",
        "type": "api-call-service",
        "z": "9143c7f2.16df18",
        "name": "jens_phone_bt home",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "device_tracker",
        "service": "see",
        "entityId": "",
        "data": "{\"dev_id\":\"jens_phone_bt\",\"location_name\":\"home\"}",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 580,
        "y": 1720,
        "wires": [
            []
        ]
    },
    {
        "id": "f42a16fe.1a4c18",
        "type": "api-call-service",
        "z": "9143c7f2.16df18",
        "name": "ansleys_phone_bt not_home",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "device_tracker",
        "service": "see",
        "entityId": "",
        "data": "{\"dev_id\":\"ansleys_phone_bt\",\"location_name\":\"not_home\"}",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 600,
        "y": 1780,
        "wires": [
            []
        ]
    },
    {
        "id": "91d891c6.aa4fc",
        "type": "api-call-service",
        "z": "9143c7f2.16df18",
        "name": "ansleys_phone_bt home",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "device_tracker",
        "service": "see",
        "entityId": "",
        "data": "{\"dev_id\":\"ansleys_phone_bt\",\"location_name\":\"home\"}",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "",
        "output_location_type": "none",
        "mustacheAltTags": false,
        "x": 590,
        "y": 1840,
        "wires": [
            []
        ]
    },
    {
        "id": "5ec9e6e1.d8f5c8",
        "type": "trigger-state",
        "z": "9143c7f2.16df18",
        "name": "Ansley home -> not_home (bluetooth)",
        "server": "8b52884a.b76658",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityid": "input_boolean.ansley_occupancy",
        "entityidfiltertype": "exact",
        "debugenabled": false,
        "constraints": [
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "current_state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "off",
                "propertyValue": "new_state.state"
            },
            {
                "targetType": "this_entity",
                "targetValue": "",
                "propertyType": "previous_state",
                "comparatorType": "is",
                "comparatorValueDatatype": "str",
                "comparatorValue": "on",
                "propertyValue": "old_state.state"
            }
        ],
        "outputs": 2,
        "customoutputs": [],
        "outputinitially": true,
        "state_type": "str",
        "x": 170,
        "y": 1780,
        "wires": [
            [
                "f42a16fe.1a4c18"
            ],
            [
                "91d891c6.aa4fc"
            ]
        ]
    },
    {
        "id": "ad77dc4c.32823",
        "type": "api-current-state",
        "z": "29f6dc7c.662814",
        "name": "track Ansley?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "input_boolean.track_ansley",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 290,
        "y": 140,
        "wires": [
            [
                "130a1049.f4969"
            ],
            []
        ]
    },
    {
        "id": "130a1049.f4969",
        "type": "api-current-state",
        "z": "29f6dc7c.662814",
        "name": "",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "person.ansley_billimek",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 610,
        "y": 140,
        "wires": [
            [
                "84c98e40.8a8eb"
            ]
        ]
    },
    {
        "id": "6cd320fa.c1848",
        "type": "api-current-state",
        "z": "29f6dc7c.662814",
        "name": "track Jeff?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "input_boolean.track_jeff",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 290,
        "y": 200,
        "wires": [
            [
                "d3dac816.86c128"
            ],
            []
        ]
    },
    {
        "id": "68a507e8.f20bf8",
        "type": "api-current-state",
        "z": "29f6dc7c.662814",
        "name": "track Jen?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is_not",
        "override_topic": true,
        "entity_id": "input_boolean.track_jen",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 290,
        "y": 260,
        "wires": [
            [
                "f4e256fe.bfc5e8"
            ],
            []
        ]
    },
    {
        "id": "d3dac816.86c128",
        "type": "api-current-state",
        "z": "29f6dc7c.662814",
        "name": "",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "person.jeff_billimek",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 600,
        "y": 200,
        "wires": [
            [
                "10e9b1c5.34e31e"
            ]
        ]
    },
    {
        "id": "f4e256fe.bfc5e8",
        "type": "api-current-state",
        "z": "29f6dc7c.662814",
        "name": "",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "person.jennifer_billimek",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 610,
        "y": 260,
        "wires": [
            [
                "781bdbb4.5a2724"
            ]
        ]
    },
    {
        "id": "84c98e40.8a8eb",
        "type": "switch",
        "z": "29f6dc7c.662814",
        "name": "home?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "home",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "not_home",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 890,
        "y": 140,
        "wires": [
            [
                "626b893d.59dfa8"
            ],
            []
        ]
    },
    {
        "id": "10e9b1c5.34e31e",
        "type": "switch",
        "z": "29f6dc7c.662814",
        "name": "home?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "home",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "not_home",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 890,
        "y": 200,
        "wires": [
            [
                "626b893d.59dfa8"
            ],
            []
        ]
    },
    {
        "id": "781bdbb4.5a2724",
        "type": "switch",
        "z": "29f6dc7c.662814",
        "name": "home?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "home",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "not_home",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 890,
        "y": 260,
        "wires": [
            [
                "626b893d.59dfa8"
            ],
            []
        ]
    },
    {
        "id": "626b893d.59dfa8",
        "type": "join",
        "z": "29f6dc7c.662814",
        "name": "",
        "mode": "custom",
        "build": "object",
        "property": "payload",
        "propertyType": "msg",
        "key": "topic",
        "joiner": "\\n",
        "joinerType": "str",
        "accumulate": false,
        "timeout": "",
        "count": "",
        "reduceRight": false,
        "reduceExp": "",
        "reduceInit": "",
        "reduceInitType": "",
        "reduceFixup": "",
        "x": 1110,
        "y": 200,
        "wires": [
            []
        ]
    },
    {
        "id": "ab22106d.8bafb",
        "type": "switch",
        "z": "29f6dc7c.662814",
        "name": "home?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "home",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "not_home",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 890,
        "y": 40,
        "wires": [
            [],
            []
        ]
    },
    {
        "id": "6303d5b7.53726c",
        "type": "api-current-state",
        "z": "29f6dc7c.662814",
        "name": "presence selection",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "input_select.presence",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 270,
        "y": 40,
        "wires": [
            [
                "3d6fbc9a.f077f4"
            ]
        ]
    },
    {
        "id": "3d6fbc9a.f077f4",
        "type": "api-current-state",
        "z": "29f6dc7c.662814",
        "name": "group status",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 1,
        "halt_if": "",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "group.{{payload}}",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 530,
        "y": 40,
        "wires": [
            [
                "ab22106d.8bafb"
            ]
        ]
    },
    {
        "id": "21e5467e.c04e6a",
        "type": "subflow:29f6dc7c.662814",
        "z": "9143c7f2.16df18",
        "d": true,
        "name": "",
        "env": [],
        "x": 870,
        "y": 280,
        "wires": [
            [],
            [
                "5b3f844.f2cf77c"
            ]
        ]
    },
    {
        "id": "ad95fe70.c19c6",
        "type": "subflow:29f6dc7c.662814",
        "z": "afb0f186.cfb0d",
        "d": true,
        "name": "",
        "env": [],
        "x": 510,
        "y": 140,
        "wires": [
            [],
            [
                "df49345d.517b08"
            ]
        ]
    },
    {
        "id": "3ff0a0c.e3cf96",
        "type": "subflow:29f6dc7c.662814",
        "z": "4aedf9e8.044e08",
        "d": true,
        "name": "",
        "env": [],
        "x": 530,
        "y": 100,
        "wires": [
            [],
            [
                "8d782ee4.3daf1"
            ]
        ]
    },
    {
        "id": "de5bd3a9.a8a66",
        "type": "subflow:29f6dc7c.662814",
        "z": "4aedf9e8.044e08",
        "d": true,
        "name": "",
        "env": [],
        "x": 530,
        "y": 480,
        "wires": [
            [],
            [
                "f36487b8.7e8c48"
            ]
        ]
    },
    {
        "id": "3b0b9b77.a62ff4",
        "type": "subflow:29f6dc7c.662814",
        "z": "4aedf9e8.044e08",
        "d": true,
        "name": "",
        "env": [],
        "x": 530,
        "y": 720,
        "wires": [
            [],
            [
                "fe046407.ab0868"
            ]
        ]
    },
    {
        "id": "e0d9002.3e0be",
        "type": "subflow:29f6dc7c.662814",
        "z": "9143c7f2.16df18",
        "d": true,
        "name": "",
        "env": [],
        "x": 830,
        "y": 920,
        "wires": [
            [],
            [
                "46cdb220.d99dbc"
            ]
        ]
    },
    {
        "id": "f9984dec.1157b",
        "type": "subflow:29f6dc7c.662814",
        "z": "75b62c93.dd5d84",
        "d": true,
        "name": "",
        "env": [],
        "x": 770,
        "y": 940,
        "wires": [
            [
                "3ab2d709.6538b8"
            ],
            [
                "c42a5b00.4342c8"
            ]
        ]
    },
    {
        "id": "59ec5f4a.d8bc9",
        "type": "subflow:29f6dc7c.662814",
        "z": "75b62c93.dd5d84",
        "d": true,
        "name": "",
        "env": [],
        "x": 770,
        "y": 980,
        "wires": [
            [
                "a7875b7c.d961c8"
            ],
            [
                "4cb25abb.6dc924"
            ]
        ]
    },
    {
        "id": "60724780.ab97c8",
        "type": "subflow:29f6dc7c.662814",
        "z": "75b62c93.dd5d84",
        "d": true,
        "name": "",
        "env": [],
        "x": 770,
        "y": 720,
        "wires": [
            [],
            [
                "519672b2.9eeb1c"
            ]
        ]
    },
    {
        "id": "2f3e0f3c.f3db3",
        "type": "subflow:29f6dc7c.662814",
        "z": "75b62c93.dd5d84",
        "d": true,
        "name": "",
        "env": [],
        "x": 770,
        "y": 1020,
        "wires": [
            [
                "55f9ad38.78bbf4"
            ],
            [
                "dba0b367.9cfa"
            ]
        ]
    },
    {
        "id": "1dba506a.727e2",
        "type": "subflow:29f6dc7c.662814",
        "z": "75b62c93.dd5d84",
        "d": true,
        "name": "",
        "env": [],
        "x": 770,
        "y": 1180,
        "wires": [
            [
                "1423693d.38f4a7"
            ],
            [
                "5a4230ac.531df"
            ]
        ]
    },
    {
        "id": "f5cb1a9d.0227e8",
        "type": "subflow:29f6dc7c.662814",
        "z": "af228686.65c8a8",
        "d": true,
        "name": "",
        "env": [],
        "x": 710,
        "y": 60,
        "wires": [
            [],
            [
                "b5ce153f.7eca98",
                "3af164aa.92a0ac",
                "78d24791.853db8"
            ]
        ]
    },
    {
        "id": "ea25edb9.d9596",
        "type": "api-call-service",
        "z": "43703bf3.b01b24",
        "name": "sunroom lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "",
        "entityId": "group.sunroom_lights",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 400,
        "y": 740,
        "wires": [
            []
        ]
    },
    {
        "id": "78d24791.853db8",
        "type": "api-call-service",
        "z": "af228686.65c8a8",
        "name": "sunroom lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "switch",
        "service": "",
        "entityId": "group.sunroom_lights",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1150,
        "y": 120,
        "wires": [
            []
        ]
    },
    {
        "id": "71f227c0.43b6f8",
        "type": "trigger",
        "z": "af228686.65c8a8",
        "name": "",
        "op1": "{\"service\":\"turn_on\"}",
        "op2": "{\"service\":\"turn_off\"}",
        "op1type": "json",
        "op2type": "json",
        "duration": "15",
        "extend": true,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 730,
        "y": 1240,
        "wires": [
            [
                "83092d58.56334"
            ]
        ]
    },
    {
        "id": "8858eb58.4a5e68",
        "type": "switch",
        "z": "2299e9e0.40f656",
        "name": "1.front -- 2.porch -- 3. driveway -- 4. pool -- 5. basement",
        "property": "payload.after.camera",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "front",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "porch",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "driveway",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "pool",
                "vt": "str"
            },
            {
                "t": "eq",
                "v": "basement",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 5,
        "x": 690,
        "y": 80,
        "wires": [
            [],
            [],
            [],
            [],
            []
        ],
        "info": "Change **front** and **back** Switch names to be the names of your cameras defined in the Frigate Config"
    },
    {
        "id": "1d657054.6f0ae",
        "type": "mqtt in",
        "z": "2299e9e0.40f656",
        "name": "",
        "topic": "frigate/events",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 90,
        "y": 80,
        "wires": [
            [
                "2357bb6d.b17e24"
            ]
        ]
    },
    {
        "id": "2357bb6d.b17e24",
        "type": "json",
        "z": "2299e9e0.40f656",
        "name": "",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 250,
        "y": 80,
        "wires": [
            [
                "2e507a21.970b96"
            ]
        ],
        "info": "Convert JSON Strings to Objects"
    },
    {
        "id": "2e507a21.970b96",
        "type": "rbe",
        "z": "2299e9e0.40f656",
        "name": "",
        "func": "rbe",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload.after.id",
        "x": 390,
        "y": 80,
        "wires": [
            [
                "8858eb58.4a5e68"
            ]
        ],
        "info": "Block any Messages that have  duplicate After ID.  Cuts down on multiple mqtt messages for the same notification"
    },
    {
        "id": "be7afd67.3bfa4",
        "type": "comment",
        "z": "2299e9e0.40f656",
        "name": "Automation Based on Frigate Camera Name",
        "info": "Flow to action something based on the camera name that triggered detction",
        "x": 190,
        "y": 40,
        "wires": []
    },
    {
        "id": "807d53eb.e265b",
        "type": "function",
        "z": "ea946133.0085b",
        "name": "trigger front camera (BI)",
        "func": "msg.payload = \"camera=front&trigger\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1530,
        "y": 40,
        "wires": [
            [
                "8b018174.c0b2d"
            ]
        ]
    },
    {
        "id": "74a6c66e.9b3788",
        "type": "api-current-state",
        "z": "ea946133.0085b",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "input_boolean.camera_front_notify",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 470,
        "y": 40,
        "wires": [
            [],
            [
                "8ae554fc.f290b8"
            ]
        ]
    },
    {
        "id": "8ae554fc.f290b8",
        "type": "delay",
        "z": "ea946133.0085b",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "10",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 1280,
        "y": 40,
        "wires": [
            [
                "807d53eb.e265b"
            ]
        ]
    },
    {
        "id": "551b9747.0c2428",
        "type": "function",
        "z": "ea946133.0085b",
        "name": "trigger porch camera (BI)",
        "func": "msg.payload = \"camera=porch&trigger\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1530,
        "y": 100,
        "wires": [
            [
                "8b018174.c0b2d"
            ]
        ]
    },
    {
        "id": "8faf5cc1.5c41a",
        "type": "delay",
        "z": "ea946133.0085b",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "10",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 1280,
        "y": 100,
        "wires": [
            [
                "551b9747.0c2428"
            ]
        ]
    },
    {
        "id": "3c2395cd.f242ca",
        "type": "time-range-switch",
        "z": "ea946133.0085b",
        "name": "10pm-6am",
        "lat": "33.95092",
        "lon": "-84.44805",
        "startTime": "22:00",
        "endTime": "06:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 870,
        "y": 100,
        "wires": [
            [
                "8faf5cc1.5c41a"
            ],
            []
        ]
    },
    {
        "id": "c73198e9.b2deb8",
        "type": "api-current-state",
        "z": "ea946133.0085b",
        "name": "not home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 650,
        "y": 100,
        "wires": [
            [
                "3c2395cd.f242ca"
            ],
            [
                "8faf5cc1.5c41a"
            ]
        ]
    },
    {
        "id": "202f9fb7.5baeb",
        "type": "api-current-state",
        "z": "ea946133.0085b",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "input_boolean.camera_porch_notify",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 470,
        "y": 100,
        "wires": [
            [],
            [
                "c73198e9.b2deb8"
            ]
        ]
    },
    {
        "id": "43491265.2b4ecc",
        "type": "mqtt in",
        "z": "ea946133.0085b",
        "name": "Jeff's Garage",
        "topic": "og-jeff/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 90,
        "y": 240,
        "wires": [
            [
                "7abf053c.d523dc"
            ]
        ]
    },
    {
        "id": "6d58509e.01ccb",
        "type": "mqtt in",
        "z": "ea946133.0085b",
        "name": "Jen'sGarage",
        "topic": "og-jen/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 90,
        "y": 300,
        "wires": [
            [
                "7abf053c.d523dc"
            ]
        ]
    },
    {
        "id": "ee4b488e.276818",
        "type": "api-current-state",
        "z": "ea946133.0085b",
        "name": "not home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 650,
        "y": 220,
        "wires": [
            [],
            [
                "f7432cb0.84a5e"
            ]
        ]
    },
    {
        "id": "4fb82dd3.faff04",
        "type": "api-current-state",
        "z": "ea946133.0085b",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "input_boolean.camera_pool_notify",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 470,
        "y": 280,
        "wires": [
            [],
            [
                "6a9b4076.f0afc"
            ]
        ]
    },
    {
        "id": "6a9b4076.f0afc",
        "type": "api-current-state",
        "z": "ea946133.0085b",
        "name": "not home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 650,
        "y": 280,
        "wires": [
            [
                "7a5f22bf.7e5bfc"
            ],
            [
                "eaf45bf4.756e28"
            ]
        ]
    },
    {
        "id": "7a5f22bf.7e5bfc",
        "type": "time-range-switch",
        "z": "ea946133.0085b",
        "name": "10pm-6am",
        "lat": "33.95092",
        "lon": "-84.44805",
        "startTime": "22:00",
        "endTime": "06:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 870,
        "y": 280,
        "wires": [
            [
                "eaf45bf4.756e28"
            ],
            []
        ]
    },
    {
        "id": "eaf45bf4.756e28",
        "type": "delay",
        "z": "ea946133.0085b",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "10",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 1280,
        "y": 280,
        "wires": [
            [
                "62d09fe5.948ce"
            ]
        ]
    },
    {
        "id": "62d09fe5.948ce",
        "type": "function",
        "z": "ea946133.0085b",
        "name": "trigger pool camera (BI)",
        "func": "msg.payload = \"camera=pool&trigger\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1530,
        "y": 280,
        "wires": [
            [
                "8b018174.c0b2d"
            ]
        ]
    },
    {
        "id": "6ef57559.1be93c",
        "type": "function",
        "z": "ea946133.0085b",
        "name": "trigger driveway camera (BI)",
        "func": "msg.payload = \"camera=driveway&trigger\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1540,
        "y": 220,
        "wires": [
            [
                "8b018174.c0b2d"
            ]
        ]
    },
    {
        "id": "f7432cb0.84a5e",
        "type": "delay",
        "z": "ea946133.0085b",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "10",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 1280,
        "y": 220,
        "wires": [
            [
                "6ef57559.1be93c"
            ]
        ]
    },
    {
        "id": "fb9a68c4.5d6128",
        "type": "time-range-switch",
        "z": "ea946133.0085b",
        "name": "6:45am-9am",
        "lat": "33.95092",
        "lon": "-84.44805",
        "startTime": "06:45",
        "endTime": "09:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 1070,
        "y": 160,
        "wires": [
            [],
            [
                "f7432cb0.84a5e"
            ]
        ]
    },
    {
        "id": "ff124fe7.97093",
        "type": "weekday",
        "z": "ea946133.0085b",
        "name": "",
        "sun": false,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": false,
        "x": 860,
        "y": 160,
        "wires": [
            [
                "fb9a68c4.5d6128"
            ],
            [
                "f7432cb0.84a5e"
            ]
        ]
    },
    {
        "id": "50264aaa.0cb994",
        "type": "api-current-state",
        "z": "ea946133.0085b",
        "name": "not home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 650,
        "y": 160,
        "wires": [
            [
                "ff124fe7.97093"
            ],
            [
                "f7432cb0.84a5e"
            ]
        ]
    },
    {
        "id": "60c909a0.99eda8",
        "type": "api-current-state",
        "z": "ea946133.0085b",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "input_boolean.camera_driveway_notify",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 470,
        "y": 160,
        "wires": [
            [],
            [
                "50264aaa.0cb994"
            ]
        ]
    },
    {
        "id": "fd5c63f5.50f9a",
        "type": "function",
        "z": "ea946133.0085b",
        "name": "trigger basement camera (BI)",
        "func": "msg.payload = \"camera=basement&trigger\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1540,
        "y": 340,
        "wires": [
            [
                "8b018174.c0b2d"
            ]
        ]
    },
    {
        "id": "4fcc2e7f.8b12f",
        "type": "delay",
        "z": "ea946133.0085b",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "10",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 1280,
        "y": 340,
        "wires": [
            [
                "fd5c63f5.50f9a"
            ]
        ]
    },
    {
        "id": "79eb2197.7c7f6",
        "type": "api-current-state",
        "z": "ea946133.0085b",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "input_boolean.camera_basement_notify",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 470,
        "y": 340,
        "wires": [
            [],
            [
                "4fcc2e7f.8b12f"
            ]
        ]
    },
    {
        "id": "258059a1.6f22a6",
        "type": "server-state-changed",
        "z": "ea946133.0085b",
        "name": "basement door open?",
        "server": "8b52884a.b76658",
        "version": "1",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.basement_door",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 120,
        "y": 360,
        "wires": [
            [],
            [
                "79eb2197.7c7f6"
            ]
        ]
    },
    {
        "id": "a534a995.cd0548",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Front Camera (frigate)",
        "topic": "frigate/front/+",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 160,
        "y": 4040,
        "wires": [
            [
                "dd0e1842.d27588"
            ]
        ]
    },
    {
        "id": "f68d0662.c23318",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Porch Camera (frigate)",
        "topic": "frigate/porch/+",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 160,
        "y": 4120,
        "wires": [
            [
                "a27b2c33.8df7c"
            ]
        ]
    },
    {
        "id": "9c945f9e.bf1eb",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Driveway Camera (frigate)",
        "topic": "frigate/driveway/+",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 170,
        "y": 4200,
        "wires": [
            [
                "f9e02c55.2efc6"
            ]
        ]
    },
    {
        "id": "db2f2b62.916038",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Pool Camera (frigate)",
        "topic": "frigate/pool/+",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 160,
        "y": 4420,
        "wires": [
            [
                "dddf1bf2.849c38"
            ]
        ]
    },
    {
        "id": "e7a33d1.ba5c6c",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Basement Camera (frigate)",
        "topic": "frigate/basement/+",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 170,
        "y": 4520,
        "wires": [
            [
                "5a6bb6fd.4ebb28"
            ]
        ]
    },
    {
        "id": "dd0e1842.d27588",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "motion",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 370,
        "y": 4040,
        "wires": [
            [
                "cb09b24e.6f2c8"
            ]
        ]
    },
    {
        "id": "f9e02c55.2efc6",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "motion",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 370,
        "y": 4200,
        "wires": [
            [
                "1d5197f6.b7f2e8"
            ]
        ]
    },
    {
        "id": "dddf1bf2.849c38",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "motion",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 370,
        "y": 4420,
        "wires": [
            [
                "61946aa1.8c8ea4"
            ]
        ]
    },
    {
        "id": "5a6bb6fd.4ebb28",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "motion",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 370,
        "y": 4520,
        "wires": [
            [
                "51ac765b.81be68"
            ]
        ]
    },
    {
        "id": "a273464b.ecddc8",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "trigger basement camera (BI)",
        "func": "msg.payload = \"camera=basement&trigger\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1640,
        "y": 4520,
        "wires": [
            [
                "57947b5f.c25b14"
            ]
        ]
    },
    {
        "id": "57947b5f.c25b14",
        "type": "mqtt out",
        "z": "2fad043e.317c8c",
        "name": "trigger blue iris",
        "topic": "BlueIris/admin",
        "qos": "",
        "retain": "",
        "broker": "649859a4.a17818",
        "x": 1900,
        "y": 4200,
        "wires": []
    },
    {
        "id": "41d3ab69.280584",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "trigger porch camera (BI)",
        "func": "msg.payload = \"camera=porch&trigger\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1630,
        "y": 4120,
        "wires": [
            [
                "57947b5f.c25b14"
            ]
        ]
    },
    {
        "id": "14b07406.daad8c",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "trigger front camera (BI)",
        "func": "msg.payload = \"camera=front&trigger\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1630,
        "y": 4040,
        "wires": [
            [
                "57947b5f.c25b14"
            ]
        ]
    },
    {
        "id": "1e440e97.31b281",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "trigger driveway camera (BI)",
        "func": "msg.payload = \"camera=driveway&trigger\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1640,
        "y": 4200,
        "wires": [
            [
                "57947b5f.c25b14"
            ]
        ]
    },
    {
        "id": "f250d1f1.570b6",
        "type": "function",
        "z": "2fad043e.317c8c",
        "name": "trigger pool camera (BI)",
        "func": "msg.payload = \"camera=pool&trigger\";\nreturn msg;\n",
        "outputs": 1,
        "noerr": 0,
        "x": 1630,
        "y": 4420,
        "wires": [
            [
                "57947b5f.c25b14"
            ]
        ]
    },
    {
        "id": "cb09b24e.6f2c8",
        "type": "api-current-state",
        "z": "2fad043e.317c8c",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "input_boolean.camera_front_notify",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 530,
        "y": 4040,
        "wires": [
            [],
            [
                "9cfa1512.6e86b8"
            ]
        ]
    },
    {
        "id": "2cb2f42c.aa631c",
        "type": "api-current-state",
        "z": "2fad043e.317c8c",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "input_boolean.camera_porch_notify",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 530,
        "y": 4120,
        "wires": [
            [],
            [
                "188e1252.539f2e",
                "3ed83b45.7c19b4"
            ]
        ]
    },
    {
        "id": "1d5197f6.b7f2e8",
        "type": "api-current-state",
        "z": "2fad043e.317c8c",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "input_boolean.camera_driveway_notify",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 530,
        "y": 4200,
        "wires": [
            [],
            [
                "9a2c13f8.a2213",
                "2b27e4cd.820e9c"
            ]
        ]
    },
    {
        "id": "61946aa1.8c8ea4",
        "type": "api-current-state",
        "z": "2fad043e.317c8c",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "input_boolean.camera_pool_notify",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 530,
        "y": 4420,
        "wires": [
            [],
            [
                "5ed10630.87bc58",
                "ef2c6f9e.76cc9"
            ]
        ]
    },
    {
        "id": "51ac765b.81be68",
        "type": "api-current-state",
        "z": "2fad043e.317c8c",
        "name": "run?",
        "server": "8b52884a.b76658",
        "version": "1",
        "outputs": 2,
        "halt_if": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "input_boolean.camera_basement_notify",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 530,
        "y": 4520,
        "wires": [
            [],
            [
                "9212364c.0d2678"
            ]
        ]
    },
    {
        "id": "188e1252.539f2e",
        "type": "api-current-state",
        "z": "2fad043e.317c8c",
        "name": "not home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 710,
        "y": 4120,
        "wires": [
            [
                "5b6a963b.0fd858"
            ],
            [
                "df753634.2ec788"
            ]
        ]
    },
    {
        "id": "5ed10630.87bc58",
        "type": "api-current-state",
        "z": "2fad043e.317c8c",
        "name": "not home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 710,
        "y": 4420,
        "wires": [
            [
                "3d589072.88acc"
            ],
            [
                "57607cb3.b950f4"
            ]
        ]
    },
    {
        "id": "5b6a963b.0fd858",
        "type": "time-range-switch",
        "z": "2fad043e.317c8c",
        "name": "10pm-6am",
        "lat": "33.95092",
        "lon": "-84.44805",
        "startTime": "22:00",
        "endTime": "06:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 1070,
        "y": 4140,
        "wires": [
            [
                "df753634.2ec788"
            ],
            []
        ]
    },
    {
        "id": "3d589072.88acc",
        "type": "time-range-switch",
        "z": "2fad043e.317c8c",
        "name": "10pm-6am",
        "lat": "33.95092",
        "lon": "-84.44805",
        "startTime": "22:00",
        "endTime": "06:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 950,
        "y": 4460,
        "wires": [
            [
                "57607cb3.b950f4"
            ],
            []
        ]
    },
    {
        "id": "9a2c13f8.a2213",
        "type": "api-current-state",
        "z": "2fad043e.317c8c",
        "name": "not home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 710,
        "y": 4200,
        "wires": [
            [
                "10f2f77e.8d0e69"
            ],
            [
                "93cb8038.29519"
            ]
        ]
    },
    {
        "id": "3411b327.96b4ac",
        "type": "server-state-changed",
        "z": "2fad043e.317c8c",
        "name": "basement door open?",
        "server": "8b52884a.b76658",
        "version": "1",
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.basement_door",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 160,
        "y": 4600,
        "wires": [
            [],
            [
                "51ac765b.81be68"
            ]
        ]
    },
    {
        "id": "10f2f77e.8d0e69",
        "type": "weekday",
        "z": "2fad043e.317c8c",
        "name": "",
        "sun": false,
        "mon": true,
        "tue": true,
        "wed": true,
        "thu": true,
        "fri": true,
        "sat": false,
        "x": 900,
        "y": 4220,
        "wires": [
            [
                "5d94e0f3.91d8d"
            ],
            [
                "93cb8038.29519"
            ]
        ]
    },
    {
        "id": "5d94e0f3.91d8d",
        "type": "time-range-switch",
        "z": "2fad043e.317c8c",
        "name": "6:45am-9am",
        "lat": "33.95092",
        "lon": "-84.44805",
        "startTime": "06:45",
        "endTime": "09:00",
        "startOffset": 0,
        "endOffset": 0,
        "x": 1070,
        "y": 4240,
        "wires": [
            [],
            [
                "93cb8038.29519"
            ]
        ]
    },
    {
        "id": "800b119b.5a365",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Jeff's Garage",
        "topic": "og-jeff/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 130,
        "y": 4280,
        "wires": [
            [
                "3feface4.653134"
            ]
        ]
    },
    {
        "id": "ce360a27.84f538",
        "type": "mqtt in",
        "z": "2fad043e.317c8c",
        "name": "Jen'sGarage",
        "topic": "og-jen/OUT/STATE",
        "qos": "2",
        "datatype": "auto",
        "broker": "649859a4.a17818",
        "x": 130,
        "y": 4340,
        "wires": [
            [
                "3feface4.653134"
            ]
        ]
    },
    {
        "id": "3feface4.653134",
        "type": "rbe",
        "z": "2fad043e.317c8c",
        "name": "state change",
        "func": "rbei",
        "gap": "",
        "start": "",
        "inout": "out",
        "property": "payload",
        "x": 350,
        "y": 4280,
        "wires": [
            [
                "3986e791.84ec78"
            ]
        ]
    },
    {
        "id": "3986e791.84ec78",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "open?",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "OPEN",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 530,
        "y": 4280,
        "wires": [
            [
                "8265af08.9768d",
                "73a9627e.88651c"
            ]
        ]
    },
    {
        "id": "8265af08.9768d",
        "type": "api-current-state",
        "z": "2fad043e.317c8c",
        "name": "not home?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "home",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": false,
        "entity_id": "sensor.anyone_home",
        "state_type": "str",
        "state_location": "",
        "override_payload": "none",
        "entity_location": "",
        "override_data": "none",
        "blockInputOverrides": false,
        "x": 1070,
        "y": 4320,
        "wires": [
            [],
            [
                "93cb8038.29519"
            ]
        ]
    },
    {
        "id": "a27b2c33.8df7c",
        "type": "switch",
        "z": "2fad043e.317c8c",
        "name": "motion",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gte",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 1,
        "x": 370,
        "y": 4120,
        "wires": [
            [
                "2cb2f42c.aa631c"
            ]
        ]
    },
    {
        "id": "ef2c6f9e.76cc9",
        "type": "subflow:29f6dc7c.662814",
        "z": "2fad043e.317c8c",
        "d": true,
        "name": "",
        "env": [],
        "x": 690,
        "y": 4380,
        "wires": [
            [
                "3d589072.88acc"
            ],
            []
        ]
    },
    {
        "id": "73a9627e.88651c",
        "type": "subflow:29f6dc7c.662814",
        "z": "2fad043e.317c8c",
        "d": true,
        "name": "",
        "env": [],
        "x": 1050,
        "y": 4380,
        "wires": [
            [],
            [
                "93cb8038.29519"
            ]
        ]
    },
    {
        "id": "3ed83b45.7c19b4",
        "type": "subflow:29f6dc7c.662814",
        "z": "2fad043e.317c8c",
        "d": true,
        "name": "",
        "env": [],
        "x": 690,
        "y": 4080,
        "wires": [
            [
                "5b6a963b.0fd858"
            ],
            [
                "df753634.2ec788"
            ]
        ]
    },
    {
        "id": "2b27e4cd.820e9c",
        "type": "subflow:29f6dc7c.662814",
        "z": "2fad043e.317c8c",
        "d": true,
        "name": "",
        "env": [],
        "x": 690,
        "y": 4260,
        "wires": [
            [
                "10f2f77e.8d0e69"
            ],
            [
                "93cb8038.29519"
            ]
        ]
    },
    {
        "id": "9cfa1512.6e86b8",
        "type": "delay",
        "z": "2fad043e.317c8c",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "10",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 1380,
        "y": 4040,
        "wires": [
            [
                "14b07406.daad8c"
            ]
        ]
    },
    {
        "id": "9212364c.0d2678",
        "type": "delay",
        "z": "2fad043e.317c8c",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "10",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 1380,
        "y": 4520,
        "wires": [
            [
                "a273464b.ecddc8"
            ]
        ]
    },
    {
        "id": "57607cb3.b950f4",
        "type": "delay",
        "z": "2fad043e.317c8c",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "10",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 1380,
        "y": 4420,
        "wires": [
            [
                "f250d1f1.570b6"
            ]
        ]
    },
    {
        "id": "df753634.2ec788",
        "type": "delay",
        "z": "2fad043e.317c8c",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "10",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 1380,
        "y": 4120,
        "wires": [
            [
                "41d3ab69.280584"
            ]
        ]
    },
    {
        "id": "93cb8038.29519",
        "type": "delay",
        "z": "2fad043e.317c8c",
        "name": "",
        "pauseType": "rate",
        "timeout": "2",
        "timeoutUnits": "minutes",
        "rate": "1",
        "nbRateUnits": "10",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": true,
        "x": 1380,
        "y": 4200,
        "wires": [
            [
                "1e440e97.31b281"
            ]
        ]
    },
    {
        "id": "8b018174.c0b2d",
        "type": "mqtt out",
        "z": "ea946133.0085b",
        "name": "trigger blue iris",
        "topic": "BlueIris/admin",
        "qos": "",
        "retain": "",
        "broker": "649859a4.a17818",
        "x": 1840,
        "y": 200,
        "wires": []
    },
    {
        "id": "590b1e5e.bd3d2",
        "type": "subflow:2299e9e0.40f656",
        "z": "ea946133.0085b",
        "x": 270,
        "y": 160,
        "wires": [
            [
                "74a6c66e.9b3788"
            ],
            [
                "202f9fb7.5baeb"
            ],
            [
                "60c909a0.99eda8"
            ],
            [
                "4fb82dd3.faff04"
            ],
            [
                "79eb2197.7c7f6"
            ]
        ]
    },
    {
        "id": "7abf053c.d523dc",
        "type": "subflow:b8b74cae.ffe4",
        "z": "ea946133.0085b",
        "name": "",
        "x": 290,
        "y": 240,
        "wires": [
            [
                "ee4b488e.276818"
            ]
        ]
    },
    {
        "id": "117b4fd1.34647",
        "type": "server-state-changed",
        "z": "af228686.65c8a8",
        "name": "upstairs motion",
        "server": "8b52884a.b76658",
        "version": 1,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.upstairs_motion",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 120,
        "y": 1180,
        "wires": [
            [],
            [
                "e1f00c73.48341"
            ]
        ]
    },
    {
        "id": "1e6b61d6.291ade",
        "type": "api-call-service",
        "z": "af228686.65c8a8",
        "name": "foyer stairs lights",
        "server": "8b52884a.b76658",
        "version": 1,
        "debugenabled": false,
        "service_domain": "light",
        "service": "",
        "entityId": "light.stairs_2",
        "data": "",
        "dataType": "json",
        "mergecontext": "",
        "output_location": "payload",
        "output_location_type": "msg",
        "mustacheAltTags": false,
        "x": 1030,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "e52b4bd4.919968",
        "type": "server-state-changed",
        "z": "af228686.65c8a8",
        "name": "main motion",
        "server": "8b52884a.b76658",
        "version": 1,
        "exposeToHomeAssistant": false,
        "haConfig": [
            {
                "property": "name",
                "value": ""
            },
            {
                "property": "icon",
                "value": ""
            }
        ],
        "entityidfilter": "binary_sensor.main_motion",
        "entityidfiltertype": "substring",
        "outputinitially": false,
        "state_type": "str",
        "haltifstate": "off",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "outputs": 2,
        "output_only_on_state_change": false,
        "for": "",
        "forType": "num",
        "forUnits": "minutes",
        "ignorePrevStateNull": false,
        "ignorePrevStateUnknown": false,
        "ignorePrevStateUnavailable": false,
        "ignoreCurrentStateUnknown": false,
        "ignoreCurrentStateUnavailable": false,
        "x": 130,
        "y": 1120,
        "wires": [
            [],
            [
                "e1f00c73.48341"
            ]
        ]
    },
    {
        "id": "3d4e398c.df8de6",
        "type": "trigger",
        "z": "af228686.65c8a8",
        "name": "",
        "op1": "{\"service\":\"turn_on\"}",
        "op2": "{\"service\":\"turn_off\"}",
        "op1type": "json",
        "op2type": "json",
        "duration": "5",
        "extend": true,
        "overrideDelay": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "topic": "topic",
        "outputs": 1,
        "x": 810,
        "y": 1120,
        "wires": [
            [
                "1e6b61d6.291ade"
            ]
        ]
    },
    {
        "id": "e1f00c73.48341",
        "type": "api-current-state",
        "z": "af228686.65c8a8",
        "name": "stairs lights off?",
        "server": "8b52884a.b76658",
        "version": 1,
        "outputs": 2,
        "halt_if": "on",
        "halt_if_type": "str",
        "halt_if_compare": "is",
        "override_topic": true,
        "entity_id": "light.stairs_2",
        "state_type": "str",
        "state_location": "payload",
        "override_payload": "msg",
        "entity_location": "data",
        "override_data": "msg",
        "blockInputOverrides": false,
        "x": 340,
        "y": 1120,
        "wires": [
            [],
            [
                "da31800d.4585a"
            ]
        ]
    },
    {
        "id": "da31800d.4585a",
        "type": "time-range-switch",
        "z": "af228686.65c8a8",
        "name": "11pm-7:30am",
        "lat": "33.95092",
        "lon": "-84.44805",
        "startTime": "23:00",
        "endTime": "07:30",
        "startOffset": 0,
        "endOffset": 0,
        "x": 560,
        "y": 1120,
        "wires": [
            [],
            [
                "3d4e398c.df8de6"
            ]
        ]
    }
]